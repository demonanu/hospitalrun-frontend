{"version":3,"sources":["page-header/title/TitleContext.tsx","shared/hooks/useTranslator.ts","dashboard/Dashboard.tsx","page-header/breadcrumbs/breadcrumbs-slice.ts","page-header/breadcrumbs/useAddBreadcrumbs.ts","shared/model/Permissions.ts","shared/components/PrivateRoute.tsx","shared/components/input/TextFieldWithLabelFormGroup.tsx","shared/components/input/TextInputWithLabelFormGroup.tsx","shared/config/pouchdb.ts","shared/util/generateCode.ts","shared/db/SortRequest.ts","shared/db/Repository.ts","shared/db/PatientRepository.ts","shared/db/ImagingRepository.ts","imagings/util/validate-imaging-request.ts","imagings/hooks/useRequestImaging.tsx","imagings/requests/NewImagingRequest.tsx","page-header/button-toolbar/ButtonBarProvider.tsx","shared/components/Loading.tsx","shared/util/extractUsername.ts","imagings/hooks/useImagingSearch.tsx","imagings/search/ImagingRequestTable.tsx","incidents/IncidentFilter.ts","imagings/search/ViewImagings.tsx","imagings/Imagings.tsx","shared/db/IncidentRepository.ts","incidents/hooks/useIncidents.tsx","incidents/list/ViewIncidentsTable.tsx","shared/util/DataHelpers.tsx","incidents/list/ViewIncidents.tsx","shared/components/input/DateTimePickerWithLabelFormGroup.tsx","incidents/util/validate-incident.ts","incidents/hooks/useReportIncident.tsx","incidents/report/ReportIncident.tsx","patients/hooks/usePatient.tsx","incidents/hooks/useIncident.tsx","incidents/hooks/useResolveIncident.tsx","incidents/view/ViewIncidentDetails.tsx","incidents/view/ViewIncident.tsx","incidents/visualize/VisualizeIncidents.tsx","incidents/Incidents.tsx","shared/util/uuid.ts","shared/db/LabRepository.ts","labs/utils/validate-lab.ts","labs/hooks/useRequestLab.ts","labs/requests/NewLabRequest.tsx","labs/hooks/useCancelLab.ts","labs/hooks/useCompleteLab.ts","labs/hooks/useLab.ts","labs/hooks/useUpdateLab.ts","labs/ViewLab.tsx","shared/hooks/useDebounce.ts","labs/hooks/useLabsSearch.ts","labs/ViewLabs.tsx","labs/Labs.tsx","shared/db/MedicationRepository.ts","medications/medication-slice.ts","medications/requests/NewMedicationRequest.tsx","medications/search/MedicationRequestSearch.tsx","medications/hooks/useMedicationSearch.tsx","medications/search/MedicationRequestTable.tsx","patients/ContactInfoTypes.ts","medications/search/ViewMedications.tsx","medications/ViewMedication.tsx","medications/Medications.tsx","page-header/breadcrumbs/Breadcrumbs.tsx","page-header/button-toolbar/ButtonToolBar.tsx","shared/components/input/DatePickerWithLabelFormGroup.tsx","patients/ContactInfo.tsx","patients/GeneralInformation.tsx","patients/util/patient-util.ts","patients/util/set-patient-helper.ts","patients/util/validate-patient.ts","patients/patient-slice.ts","patients/edit/EditPatient.tsx","patients/util/is-possible-duplicate-patient.ts","patients/new/DuplicateNewPatientModal.tsx","patients/new/NewPatient.tsx","patients/search/PatientSearchInput.tsx","shared/util/formatDate.ts","patients/hooks/usePatients.tsx","patients/search/NoPatientsExist.tsx","patients/search/ViewPatientsTable.tsx","patients/search/SearchPatients.tsx","patients/search/ViewPatients.tsx","patients/hooks/usePatientAllergies.tsx","patients/allergies/AllergiesList.tsx","patients/util/validate-allergy.tsx","patients/hooks/useAddAllergy.tsx","patients/allergies/NewAllergyModal.tsx","patients/hooks/useAllergy.tsx","patients/allergies/ViewAllergy.tsx","patients/allergies/Allergies.tsx","patients/hooks/usePatientAppointments.tsx","patients/appointments/AppointmentsList.tsx","shared/model/CareGoal.ts","patients/util/validate-caregoal.ts","patients/hooks/useAddCareGoal.tsx","patients/care-goals/CareGoalForm.tsx","patients/care-goals/AddCareGoalModal.tsx","patients/hooks/useCareGoal.tsx","patients/care-goals/ViewCareGoal.tsx","patients/hooks/usePatientCareGoals.tsx","patients/care-goals/CareGoalTable.tsx","shared/model/CarePlan.ts","patients/care-goals/ViewCareGoals.tsx","patients/care-goals/CareGoalTab.tsx","patients/util/validate-careplan.ts","patients/hooks/useAddCarePlan.tsx","patients/care-plans/CarePlanForm.tsx","patients/care-plans/AddCarePlanModal.tsx","patients/hooks/useCarePlan.tsx","patients/care-plans/ViewCarePlan.tsx","patients/hooks/usePatientCarePlans.tsx","patients/care-plans/CarePlanTable.tsx","shared/model/Diagnosis.ts","patients/care-plans/ViewCarePlans.tsx","patients/care-plans/CarePlanTab.tsx","patients/util/validate-diagnosis.ts","patients/hooks/useAddPatientDiagnosis.tsx","shared/locales/ar/translations/index.ts","shared/locales/ar/translations/actions/index.ts","shared/locales/ar/translations/dashboard/index.ts","shared/locales/ar/translations/patient/index.ts","shared/locales/ar/translations/patients/index.ts","shared/locales/ar/translations/settings/index.ts","shared/locales/ar/translations/medications/index.ts","shared/locales/de/translations/index.ts","shared/locales/de/translations/actions/index.ts","shared/locales/de/translations/dashboard/index.ts","shared/locales/de/translations/patient/index.ts","shared/locales/de/translations/patients/index.ts","shared/locales/de/translations/settings/index.ts","shared/locales/de/translations/scheduling/index.ts","shared/locales/de/translations/states/index.ts","shared/locales/de/translations/sex/index.ts","shared/locales/de/translations/labs/index.ts","shared/locales/de/translations/incidents/index.ts","shared/locales/de/translations/medications/index.ts","shared/locales/enUs/translations/index.ts","shared/locales/enUs/translations/actions/index.ts","shared/locales/enUs/translations/dashboard/index.ts","shared/locales/enUs/translations/network-status/index.ts","shared/locales/enUs/translations/patient/index.ts","shared/locales/enUs/translations/patients/index.ts","shared/locales/enUs/translations/scheduling/index.ts","shared/locales/enUs/translations/states/index.ts","shared/locales/enUs/translations/sex/index.ts","shared/locales/enUs/translations/labs/index.ts","shared/locales/enUs/translations/medications/index.ts","shared/locales/enUs/translations/incidents/index.ts","shared/locales/enUs/translations/settings/index.ts","shared/locales/enUs/translations/user/index.ts","shared/locales/enUs/translations/blood-type/index.ts","shared/locales/enUs/translations/imagings/index.ts","shared/locales/es/translations/index.ts","shared/locales/es/translations/actions/index.ts","shared/locales/es/translations/dashboard/index.ts","shared/locales/es/translations/labs/index.ts","shared/locales/es/translations/patient/index.ts","shared/locales/es/translations/patients/index.ts","shared/locales/es/translations/settings/index.ts","shared/locales/es/translations/medications/index.ts","shared/locales/fr/translations/index.ts","shared/locales/fr/translations/actions/index.ts","shared/locales/fr/translations/dashboard/index.ts","shared/locales/fr/translations/patient/index.ts","shared/locales/fr/translations/patients/index.ts","shared/locales/fr/translations/scheduling/index.ts","shared/locales/fr/translations/states/index.ts","shared/locales/fr/translations/sex/index.ts","shared/locales/fr/translations/labs/index.ts","shared/locales/fr/translations/settings/index.ts","shared/locales/fr/translations/medications/index.ts","shared/locales/id/translations/index.ts","shared/locales/id/translations/actions/index.ts","shared/locales/id/translations/dashboard/index.ts","shared/locales/id/translations/labs/index.ts","shared/locales/id/translations/patient/index.ts","shared/locales/id/translations/patients/index.ts","shared/locales/id/translations/settings/index.ts","shared/locales/id/translations/medications/index.ts","shared/locales/index.ts","shared/locales/it/translations/index.ts","shared/locales/it/translations/actions/index.ts","shared/locales/it/translations/dashboard/index.ts","shared/locales/it/translations/patient/index.ts","shared/locales/it/translations/patients/index.ts","shared/locales/it/translations/scheduling/index.ts","shared/locales/it/translations/states/index.ts","shared/locales/it/translations/sex/index.ts","shared/locales/it/translations/labs/index.ts","shared/locales/it/translations/settings/index.ts","shared/locales/it/translations/medications/index.ts","shared/locales/ja/translations/index.ts","shared/locales/ja/translations/actions/index.ts","shared/locales/ja/translations/dashboard/index.ts","shared/locales/ja/translations/labs/index.ts","shared/locales/ja/translations/patient/index.ts","shared/locales/ja/translations/patients/index.ts","shared/locales/ja/translations/settings/index.ts","shared/locales/ja/translations/medications/index.ts","shared/locales/ptBr/translations/index.ts","shared/locales/ptBr/translations/actions/index.ts","shared/locales/ptBr/translations/dashboard/index.ts","shared/locales/ptBr/translations/patient/index.ts","shared/locales/ptBr/translations/patients/index.ts","shared/locales/ptBr/translations/scheduling/index.ts","shared/locales/ptBr/translations/states/index.ts","shared/locales/ptBr/translations/sex/index.ts","shared/locales/ptBr/translations/labs/index.ts","shared/locales/ptBr/translations/settings/index.ts","shared/locales/ptBr/translations/medications/index.ts","shared/locales/ru/translations/index.ts","shared/locales/ru/translations/actions/index.ts","shared/locales/ru/translations/dashboard/index.ts","shared/locales/ru/translations/sex/index.ts","shared/locales/ru/translations/incidents/index.ts","shared/locales/ru/translations/network-status/index.ts","shared/locales/ru/translations/labs/index.ts","shared/locales/ru/translations/states/index.ts","shared/locales/ru/translations/scheduling/index.ts","shared/locales/ru/translations/patient/index.ts","shared/locales/ru/translations/patients/index.ts","shared/locales/ru/translations/settings/index.ts","shared/locales/ru/translations/medications/index.ts","shared/locales/ru/translations/blood-type/index.ts","shared/locales/ru/translations/imagings/index.ts","shared/locales/tr/translations/index.ts","shared/locales/tr/translations/actions/index.ts","shared/locales/tr/translations/dashboard/index.ts","shared/locales/tr/translations/network-status/index.ts","shared/locales/tr/translations/patient/index.ts","shared/locales/tr/translations/patients/index.ts","shared/locales/tr/translations/scheduling/index.ts","shared/locales/tr/translations/states/index.ts","shared/locales/tr/translations/sex/index.ts","shared/locales/tr/translations/labs/index.ts","shared/locales/tr/translations/medications/index.ts","shared/locales/tr/translations/incidents/index.ts","shared/locales/tr/translations/settings/index.ts","shared/locales/tr/translations/user/index.ts","shared/locales/tr/translations/blood-type/index.ts","shared/locales/tr/translations/imagings/index.ts","shared/locales/zhCN/translations/index.ts","shared/locales/zhCN/translations/actions/index.ts","shared/locales/zhCN/translations/dashboard/index.ts","shared/locales/zhCN/translations/labs/index.ts","shared/locales/zhCN/translations/patient/index.ts","shared/locales/zhCN/translations/patients/index.ts","shared/locales/zhCN/translations/settings/index.ts","shared/locales/zhCN/translations/medications/index.ts","shared/config/i18n.ts","shared/components/input/LanguageSelector.tsx","shared/components/input/index.tsx","patients/hooks/usePatientVisits.tsx","patients/diagnoses/DiagnosisForm.tsx","patients/diagnoses/AddDiagnosisModal.tsx","patients/hooks/usePatientDiagnoses.tsx","patients/diagnoses/DiagnosisTable.tsx","patients/diagnoses/ViewDiagnoses.tsx","patients/hooks/useDiagnosis.tsx","patients/diagnoses/ViewDiagnosis.tsx","shared/model/PatientHistoryRecord.tsx","patients/diagnoses/Diagnoses.tsx","patients/hooks/usePatientLabs.tsx","patients/history/mappers/helpers.tsx","patients/history/mappers/HistoryRecordsMapper.tsx","patients/history/HistoryTable.tsx","patients/history/HistoryTab.tsx","patients/labs/LabsList.tsx","patients/labs/Labs.tsx","patients/hooks/usePatientMedications.tsx","patients/medications/MedicationsList.tsx","patients/medications/Medications.tsx","patients/util/validate-note.ts","patients/hooks/useAddPatientNote.tsx","patients/notes/NewNoteModal.tsx","patients/hooks/usePatientNotes.tsx","patients/notes/NotesList.tsx","patients/hooks/usePatientNote.tsx","patients/notes/ViewNote.tsx","patients/notes/NoteTab.tsx","patients/hooks/usePatientRelatedPersons.tsx","patients/hooks/useRemovePatientRelatedPerson.tsx","patients/util/validate-related-person.ts","patients/hooks/useAddPatientRelatedPerson.tsx","patients/related-persons/AddRelatedPersonModal.tsx","shared/model/Visit.ts","patients/related-persons/RelatedPersonTab.tsx","patients/util/validate-visit.ts","patients/hooks/useAddVisit.tsx","patients/visits/VisitForm.tsx","patients/visits/AddVisitModal.tsx","patients/hooks/useVisit.tsx","patients/visits/ViewVisit.tsx","patients/visits/VisitTable.tsx","patients/visits/VisitTab.tsx","patients/view/ImportantPatientInfo.tsx","patients/view/ViewPatient.tsx","patients/Patients.tsx","shared/db/AppointmentRepository.ts","scheduling/hooks/useAppointment.tsx","scheduling/appointments/util/validate-appointment.ts","scheduling/hooks/useUpdateAppointment.tsx","scheduling/appointments/AppointmentDetailForm.tsx","scheduling/appointments/util/scheduling-appointment.util.ts","scheduling/appointments/edit/EditAppointment.tsx","scheduling/hooks/useScheduleAppointment.tsx","scheduling/appointments/new/NewAppointment.tsx","scheduling/hooks/useDeleteAppointment.tsx","scheduling/appointments/view/ViewAppointment.tsx","scheduling/hooks/useAppointments.tsx","scheduling/appointments/ViewAppointments.tsx","scheduling/appointments/Appointments.tsx","settings/Settings.tsx","user/user-slice.ts","shared/components/navbar/pageMap.tsx","shared/components/navbar/Navbar.tsx","shared/components/network-status/NetworkStatusMessage.tsx","shared/components/network-status/useNetworkStatus.ts","shared/components/component-slice.ts","shared/components/Sidebar.tsx","HospitalRun.tsx","App.tsx","serviceWorker.ts","patients/patients-slice.ts","shared/store/index.ts","index.tsx"],"names":["TitleStateContext","React","undefined","TitleDispatchContext","TitleProvider","children","title","setTitle","Provider","value","useUpdateTitle","context","Error","useTranslator","t","useTranslation","useCallback","key","Dashboard","updateTitle","useEffect","breadcrumbsSlice","createSlice","name","initialState","breadcrumbs","reducers","addBreadcrumbs","state","payload","sort","b1","b2","location","length","removeBreadcrumbs","locations","map","b","filter","breadcrumb","includes","actions","useAddBreadcrumbs","withDashboard","dispatch","useDispatch","breadcrumbsStringified","JSON","stringify","i18nKey","breadcrumbsParsed","parse","Permissions","PrivateRoute","component","isAuthenticated","rest","render","props","createElement","to","pathname","TextFieldWithLabelFormGroup","label","isEditable","isInvalid","isRequired","feedback","onChange","inputId","className","text","htmlFor","id","rows","disabled","defaultProps","TextInputWithLabelFormGroup","placeholder","type","serverDb","localDb","memoryAdapter","require","search","PouchDB","plugin","RelationalPouch","PouchdbFind","PouchAuth","process","REACT_APP_HOSPITALRUN_API","skip_setup","sync","live","retry","schema","singular","plural","relations","appointments","hasMany","options","queryInverse","async","labs","medications","imagings","patient","belongsTo","relationalDb","setSchema","remoteDb","generateCode","prefix","shortid","generate","Unsorted","sorts","Repository","db","pluralType","this","find","s","a","rel","documents","entity","selector","_id","$regex","RegExp","forEach","field","$gt","Promise","all","createIndex","index","fields","direction","result","parseRelDocs","docs","relDocs","findAll","criteria","$and","response","data","currentTime","Date","toISOString","rev","valuesToSave","save","uuidv4","createdAt","updatedAt","savedEntity","dataToSave","entityToUpdate","entityToDelete","del","escapedString","escapeStringRegexp","$or","patientCode","code","saveResult","patientId","findHasMany","container","searchValue","status","x","defaultSortRequest","imagingCode","statusType","validateImagingRequest","request","imagingRequestError","useRequestImaging","user","useMutation","error","isEmpty","ImagingRepository","requestedBy","requestedByFullName","fullName","requestedOn","now","requestImagingWrapper","onSuccess","queryCache","invalidateQueries","throwOnError","NewImagingRequest","history","useHistory","useSelector","mutate","useState","setError","visitOption","setVisitOption","statusOptions","notes","visitId","newImagingRequest","setNewImagingRequest","onSave","push","color","message","p","previousNewImagingRequest","visits","v","format","startDateTime","onPatientChange","onSearch","query","PatientRepository","searchAccessor","renderMenuItemChildren","data-testid","defaultSelected","values","event","currentTarget","onClick","ButtonBarStateContext","createContext","ButtonBarUpdateContext","ButtonBarProvider","setState","useButtonToolbarSetter","useContext","Loading","loading","size","extractUsername","username","slice","lastIndexOf","searchImagingRequests","_","searchRequest","IncidentFilter","ImagingRequestTable","useQuery","useImagingSearch","getID","row","columns","formatter","ViewImagings","permissions","setButtons","setSearchRequest","getButtons","buttons","RequestImaging","icon","outlined","previousRequest","Imagings","exact","path","ImagingRequests","IncidentRepository","getSearchCriteria","fetchIncidents","useIncidents","ViewIncidentsTable","isLoading","exportData","downloadCSV","dataToPopulate","theData","first","elm","entry","date","reportedBy","reportedOn","populateExportData","fileName","element","document","setAttribute","encodeURIComponent","style","display","body","appendChild","click","removeChild","DownloadLink","opts","Object","keys","Parser","getCSV","concat","dropdownItems","variant","marginLeft","marginBottom","items","actionsHeaderText","action","ViewIncidents","setButtonToolBar","reported","searchFilter","setSearchFilter","filterOptions","md","lg","DateTimePickerWithLabelFormGroup","dateFormat","dateFormatCalendar","dropdownMode","selected","inputDate","showTimeSelect","timeCaption","timeFormat","timeIntervals","withPortal","reportIncident","incident","newError","isAfter","department","category","categoryItem","description","validateIncident","updatedIncident","ReportIncident","setIncident","onTextInputChange","prevState","aria-label","newDate","prevIncident","fetchPatient","usePatient","enabled","fetchIncidentById","incidentId","resolveIncident","saveOrUpdate","resolvedOn","ViewIncidentDetails","useIncident","setQueryData","onResolve","ResolveIncident","ViewIncident","useParams","root","VisualizeIncidents","showGraph","setShowGraph","Array","fill","monthlyIncidents","setMonthlyIncidents","totalIncidents","incidentMonth","Number","prevIncidents","datasets","backgroundColor","borderColor","y","xAxes","yAxes","Incidents","ViewIncidentWidgets","uuid","labCode","requestLab","newLab","requestLabErrors","lab","labError","validateLabRequest","valueOf","LabRepository","NewLabRequest","newNoteText","setNewNoteText","visitOptions","setVisitOptions","newLabRequest","setNewLabRequest","Toast","previousNewLabRequest","noteText","newNote","deleted","cancelLab","canceledOn","completeLab","completeLabErrors","validateLabComplete","completedLab","completedOn","fetchLab","labId","updateLab","labToUpdate","ViewLab","labToView","setLabToView","setIsEditable","getTitle","deleteNote","noteIdToDelete","updatedNotes","note","onUpdate","updatedLab","onComplete","onCancel","getPastNotes","CompleteLab","CancelLab","delayInMilliseconds","debouncedValue","setDebouncedValue","debounceHandler","setTimeout","clearTimeout","fetchLabs","trim","ViewLabs","searchText","setSearchText","debouncedSearchText","useDebounce","RequestLab","target","Labs","LabRequests","medication","start","finish","medicationSlice","fetchMedicationStart","fetchMedicationSuccess","updateMedicationStart","updateMedicationSuccess","requestMedicationStart","requestMedicationSuccess","requestMedicationError","cancelMedicationStart","cancelMedicationSuccess","validateMedicationRequest","newMedication","medicationRequestError","quantity","requestMedication","getState","MedicationRepository","requestedMedication","cancelMedication","medicationToCancel","canceledMedication","updateMedication","medicationToUpdate","updatedMedication","NewMedicationRequest","intent","priority","unit","newMedicationRequest","setNewMedicationRequest","statusOptionsNew","intentOptions","priorityOptions","onFieldChange","previousNewMedicationRequest","medicationRequest","propertyPath","set","createdMedication","quantityValue","quantityUnit","MedicationRequestSearch","onFilterChange","searchMedicationRequests","ContactInfoTypes","MedicationRequestTable","useMedicationRequestSearch","ViewMedications","RequestMedication","newSearchRequest","ViewMedication","medicationToView","setMedicationToView","medicationId","fetchedMedication","fetchedPatient","statusOptionsEdit","onQuantityChange","getBadgeColor","onNotesChange","CancelMedication","Medications","MedicationRequests","Breadcrumbs","isLast","active","ButtonToolBar","useButtons","button","DatePickerWithLabelFormGroup","maxDate","showYearDropdown","ContactInfo","errors","typeOptions","header","xs","sm","Component","onTypeChange","newType","currentContact","newContacts","splice","onValueChange","newValue","entries","i","addButton","newData","aria-hidden","GeneralInformation","newPatient","sexOptions","bloodTypeOptions","collapsible","givenName","familyName","suffix","sex","bloodType","isApproximateDateOfBirth","differenceInYears","dateOfBirth","age","isNaN","parseFloat","subYears","startOfDay","guessDateOfBirthFromApproximateAge","checked","occupation","preferredLanguage","phoneNumbers","newPhoneNumbers","emails","newEmails","addresses","newAddresses","appendNamePart","namePart","getNamePartString","getPatientName","getPatientFullName","cleanupPatient","nonEmpty","existAndHasNumbers","test","PatientValidationError","fieldErrors","validatePatient","today","parseISO","existAndIsAfterToday","emailsErrors","email","validator","isEmail","phoneNumbersErrors","phone","isMobilePhone","some","Boolean","count","isUpdatedSuccessfully","relatedPersons","createError","updateError","diagnosisError","relatedPersonError","patientSlice","createPatientStart","createPatientSuccess","createPatientError","updatePatientStart","updatePatientSuccess","updatePatientError","addDiagnosisError","createPatient","cleanPatient","newPatientError","updatePatient","updatedPatient","EditPatient","givenPatient","setPatient","onSuccessfulSave","isPossibleDuplicatePatient","existingPatient","DuplicateNewPatientModal","duplicatePatient","show","toggle","onCloseButtonClick","onContinueButtonClick","toString","closeButton","successButton","NewPatient","patients","setDuplicatePatient","showDuplicateNewPatientModal","setShowDuplicateNewPatientModal","testPatient","closeDuplicateNewPatientModal","duplicatePatients","PatientSearchInput","queryString","formatDate","dateObject","getTime","fetchPatients","totalCount","usePatients","NoPatientsExist","justifyContent","flexDirection","outline","textAlign","width","margin","ViewPatientsTable","SearchPatients","onSearchRequestChange","ViewPatients","fetchPatientAllergies","allergies","usePatientAllergies","AllergiesList","validateAllergy","allergy","nameError","addAllergy","newAllergy","NewAllergyModal","variables","setAllergy","allergyError","setAllergyError","onSaveButtonClick","onClose","prevAllergy","iconLocation","getAllergy","allergyId","maybeAllergy","ViewAllergy","useAllergy","Allergies","showNewAllergyModal","setShowNewAllergyModal","AddAllergy","fetchPatientAppointments","getAppointments","usePatientsAppointments","CareGoalStatus","CareGoalAchievementStatus","AppointmentsList","onRowClick","endDateTime","validateCareGoal","careGoal","achievementStatus","startDate","dueDate","isBefore","addCareGoal","careGoals","newCareGoal","createdOn","CareGoalForm","careGoalError","setPriority","setStatus","setAchievementStatus","achievementsStatusOptions","initialCareGoalState","addMonths","Accepted","InProgress","AddCareGoalModal","setCareGoal","setCareGoalError","getCareGoal","careGoalId","maybeCareGoal","c","ViewCareGoal","useCareGoal","fetchPatientCareGoals","CarePlanStatus","CarePlanIntent","CareGoalTable","usePatientCareGoals","ViewCareGoals","CareGoalTab","showAddCareGoalModal","setShowAddCareGoalModal","AddCareGoal","validateCarePlan","carePlan","endDate","diagnosisId","condition","addCarePlan","carePlans","newCarePlan","CarePlanForm","carePlanError","setCondition","setIntent","conditionOptions","diagnoses","d","initialCarePlanState","Active","Plan","AddCarePlanModal","setCarePlan","setCarePlanError","getCarePlan","maybeCarePlan","ViewCarePlan","carePlanId","patientStatus","useCarePlan","carePlanStatus","fetchPatientCarePlans","DiagnosisStatus","CarePlanTable","usePatientCarePlans","ViewCarePlans","CarePlanTab","showAddCarePlanModal","setShowAddCarePlanModal","AddCarePlan","validateDiagnosis","diagnosis","diagnosisDate","onsetDate","abatementDate","addDiagnosis","newDiagnosis","edit","cancel","new","list","dashboard","firstName","lastName","warning","noMedications","noMedicationsMessage","viewPatients","noPatients","viewPatient","editPatient","settings","filterTitle","draft","onHold","cancelled","completed","enteredInError","stopped","unknown","proposal","plan","order","originalOrder","reflexOrder","fillerOrder","instanceOrder","option","routine","urgent","asap","stat","requests","view","complete","unableToRequest","unableToComplete","quantityRequired","unitRequired","for","update","delete","confirmDelete","approximateDateOfBirth","approximateAge","placeOfBirth","phoneNumber","address","basicInformation","generalInformation","contactInformation","unknownDateOfBirth","relatedPerson","unableToAddRelatedPerson","relatedPersonRequired","relationshipTypeRequired","add","relationshipType","noRelatedPersons","addRelatedPersonAbove","allergyName","nameRequired","unableToAdd","noAllergies","addAllergyAbove","successfullyAdded","diagnosisName","noDiagnoses","dateRequired","addDiagnosisAbove","noNotes","noteRequired","addNoteAbove","noLabs","noLabsMessage","types","charity","private","patientGivenNameFeedback","patientDateOfBirthFeedback","patientNumInSuffixFeedback","patientNumInPrefixFeedback","patientNumInFamilyNameFeedback","patientNumInPreferredLanguageFeedback","invalidEmail","invalidPhoneNumber","scheduling","schedule","editAppointment","deleteAppointment","viewAppointment","appointment","checkup","emergency","followUp","walkIn","createAppointmentError","updateAppointmentError","patientRequired","startDateMustBeBeforeEndDate","reason","deleteConfirmationMessage","successfullyCreated","successfullyDeleted","states","success","male","female","other","requested","canceled","typeRequired","resultRequiredToComplete","incidents","report","reports","dateOfIncident","dateMustBeInThePast","departmentRequired","categoryRequired","categoryItemRequired","descriptionRequired","next","previous","page","logout","networkStatus","offline","online","contactInfoType","home","mobile","work","temporary","old","noAppointments","addAppointmentAbove","visit","recurrence","relapse","inactive","remission","resolved","low","medium","high","priorityRequired","statusRequired","achievementStatusRequired","dueDateMustBeAfterStartDate","noCareGoals","addCareGoalAbove","titleRequired","conditionRequired","intentRequired","noCarePlans","addCarePlanAbove","eventDate","recordType","information","noHistoryTitle","noHistoryMessage","startDateRequired","endDateRequired","endDateMustBeAfterStartDate","reasonRequired","locationRequired","noVisits","addVisitAbove","patientsList","successfullyAddedNote","successfullyAddedRelatedPerson","successfullyUpdated","possibleDuplicatePatient","duplicatePatientWarning","createAppointment","updateAppointment","successfullyCompleted","successfullyDeletedNote","resolve","download","visualize","language","login","required","incorrect","password","currentlySignedInAs","apositive","anegative","abpositive","abnegative","bpositive","bnegative","opositive","onegative","create","incorrectStatus","imaging","resources","it","translation","errorCreatingAppointment","ar","translationAR","de","translationDE","en","translationEnUs","es","translationES","fr","translationFR","translationID","ja","ptBR","ru","tr","zhCN","i18n","use","LanguageDetector","initReactI18next","init","fallbackLng","debug","interpolation","escapeValue","LanguageSelector","setSelected","languageOptions","abbr","sortBy","o","changeLanguage","DateTimePickerWithLabelFromGroup","fetchPatientVisits","usePatientVisits","DiagnosisForm","patientVisits","initialDiagnosisState","AddDiagnosisModal","setDiagnosis","setDiagnosisError","fetchPatientDiagnoses","DiagnosisTable","usePatientDiagnoses","ViewDiagnoses","getDiagnosis","maybeDiagnosis","HistoryRecordType","ViewDiagnosis","useDiagnosis","diagnosisStatus","Diagnoses","showDiagnosisModal","setShowDiagnosisModal","AddDiagnosis","fetchPatientLabs","getLabs","fetchedLabs","usePatientLabs","mapLabs","flattenedRecords","labEvents","LAB","info","recordId","convertLab","mapAppointments","appt","apptEvents","APPOINTMENT","convertAppointment","HistoryTable","mappedHistoryRecords","labRecords","appointmentRecords","mapHistoryRecords","usePatientAppointments","historyRecord","HistoryTab","LabsList","fetchPatientMedications","getMedications","fetchedMedications","MedicationsList","validateNote","noteError","addNote","initialNoteState","NewNoteModal","setNoteError","setNote","fetchPatientNotes","NotesList","usePatientNotes","toLocaleString","role","getNote","noteId","maybeNote","n","ViewNote","usePatientNote","NoteTab","showNewNoteModal","setShowNoteModal","closeNewNoteModal","WritePatients","fetchPatientRelatedPersons","person","fetchedRelatedPerson","removeRelatedPerson","rp","relatedPersonId","validateRelatedPerson","relationshipTypeError","addRelatedPerson","newRelated","VisitStatus","AddRelatedPersonModal","setRelatedPerson","patientQuery","setPatientQuery","setRelatedPersonError","onInputElementChange","fieldName","RelatedPersonTab","showNewRelatedPersonModal","setShowRelatedPersonModal","closeNewRelatedPersonModal","buttonColor","validateVisit","addVisit","VisitForm","visitError","newVisit","initialVisitState","AddVisitModal","setVisit","fetchVisit","visitsId","ViewVisit","useVisit","VisitTable","VisitTab","showAddVisitModal","setShowAddVisitModal","AddVisit","ImportantPatientInfo","headerInfoStyle","position","fontSize","height","middleRowSectionStyle","tableContainerStyle","minHeight","tableClassName","withRouter","useLocation","useRouteMatch","startsWith","Patients","ReadPatients","ViewPatient","getAppointmentById","appointmentId","AppointmentRepository","useAppointment","validateAppointment","AppointmentDetailForm","onDateChange","year","month","day","hour","minute","getAppointmentLabel","EditAppointment","newAppointment","setAppointment","currentAppointment","isLoadingAppointment","isError","useUpdateAppointment","updateMutate","isLoadingUpdate","isErrorUpdate","updateMutateError","then","createNewAppointment","validateCreateAppointment","NewAppointment","roundToNearestMinutes","nearestTo","addMinutes","saved","setSaved","newAppointmentMutateError","useScheduleAppointment","newAppointmentMutate","isLoadingNewAppointment","isErrorNewAppointment","validateNewAppointment","ViewAppointment","deleteMutate","showDeleteConfirmation","setShowDeleteConfirmation","onAppointmentDeleteButtonClick","preventDefault","WriteAppointments","DeleteAppointment","buttonsAlignment","fetchAppointments","fetchedAppointments","ViewAppointments","events","setEvents","eventsArray","end","allDay","onEventClick","Appointments","ReadAppointments","Settings","ReadCarePlan","ReadCareGoal","CompleteMedication","ReadVisits","userSlice","fetchPermissions","loginSuccess","loginError","logoutSuccess","pageMap","permission","viewAppointments","viewMedications","viewLabs","newImaging","viewImagings","newIncident","viewIncidents","viewIncidentWidgets","Navbar","navigateTo","dividerAboveLabels","getDropdownListOfPages","pages","dividerAbove","hambergerPages","addPages","bg","navItems","src","alignRight","iconClassName","logOut","BASE_STYLE","pointerEvents","transition","NetworkStatusMessage","isOnline","navigator","onLine","wasOffline","setNetworkStatus","handleOnline","handleOffline","window","addEventListener","removeEventListener","useNetworkStatus","shouldRender","setShouldRender","opacity","setOpacity","componentSlice","sidebarCollapsed","toggleSidebar","Sidebar","components","splittedPath","split","listItemStyle","cursor","expandibleArrow","marginRight","iconMargin","expandedItem","setExpandedItem","setExpansion","item","listSubItemStyle","borderBottomWidth","borderTopWidth","padding","listSubItemStyleNew","layout","float","HospitalRun","useTitle","autoClose","hideProgressBar","draggable","App","setLoading","getSession","session","userCtx","getUser","metadata","catch","e","console","log","finally","fallback","initialIsOpen","isLocalhost","hostname","match","register","config","URL","href","origin","swUrl","fetch","contentType","headers","get","indexOf","serviceWorker","ready","registration","unregister","reload","registerValidSW","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","controller","patientsSlice","fetchPatientsStart","fetchPatientsSuccess","fetchCountSuccess","reducer","combineReducers","store","configureStore","middleware","ReduxThunk","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.3921c13d.chunk.js","sourcesContent":["import * as React from 'react'\n\ntype SetTitle = (title: string) => void\ntype State = { title: string }\ntype TitleProviderProps = { children: React.ReactNode }\nconst TitleStateContext = React.createContext<State | undefined>(undefined)\nconst TitleDispatchContext = React.createContext<SetTitle | undefined>(undefined)\n\nfunction TitleProvider({ children }: TitleProviderProps) {\n  const [title, setTitle] = React.useState('')\n  return (\n    <TitleStateContext.Provider value={{ title }}>\n      <TitleDispatchContext.Provider value={setTitle}>{children}</TitleDispatchContext.Provider>\n    </TitleStateContext.Provider>\n  )\n}\nfunction useTitle() {\n  const context = React.useContext(TitleStateContext)\n  if (context === undefined) {\n    throw new Error('useTitle must be used within a TitleProvider')\n  }\n  return context\n}\nfunction useUpdateTitle() {\n  const context = React.useContext(TitleDispatchContext)\n  if (context === undefined) {\n    throw new Error('useUpdateTitle must be used within a TitleProvider')\n  }\n  return context\n}\nexport { TitleProvider, useTitle, useUpdateTitle }\n","import { useCallback } from 'react'\nimport { useTranslation } from 'react-i18next'\n\nexport default function useTranslator() {\n  const { t } = useTranslation()\n\n  const translate = useCallback((key: any): any => (key !== undefined ? t(key) : undefined), [t])\n\n  return {\n    t: translate,\n  }\n}\n","import React, { useEffect } from 'react'\n\nimport { useUpdateTitle } from '../page-header/title/TitleContext'\nimport useTranslator from '../shared/hooks/useTranslator'\n\nconst Dashboard: React.FC = () => {\n  const { t } = useTranslator()\n  const updateTitle = useUpdateTitle()\n  useEffect(() => {\n    updateTitle(t('dashboard.label'))\n  })\n  return <h3>Example</h3>\n}\n\nexport default Dashboard\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit'\n\nimport Breadcrumb from '../../shared/model/Breadcrumb'\n\ninterface BreadcrumbsState {\n  breadcrumbs: Breadcrumb[]\n}\n\nconst initialState: BreadcrumbsState = {\n  breadcrumbs: [],\n}\n\nconst breadcrumbsSlice = createSlice({\n  name: 'breadcrumbs',\n  initialState,\n  reducers: {\n    addBreadcrumbs(state, { payload }: PayloadAction<Breadcrumb[]>) {\n      state.breadcrumbs = [...state.breadcrumbs, ...payload].sort(\n        (b1, b2) => b1.location.length - b2.location.length,\n      )\n    },\n    removeBreadcrumbs(state, { payload }: PayloadAction<Breadcrumb[]>) {\n      const locations = payload.map((b) => b.location)\n      state.breadcrumbs = state.breadcrumbs.filter(\n        (breadcrumb) => !locations.includes(breadcrumb.location),\n      )\n    },\n  },\n})\n\nexport const { addBreadcrumbs, removeBreadcrumbs } = breadcrumbsSlice.actions\n\nexport default breadcrumbsSlice.reducer\n","import { useEffect } from 'react'\nimport { useDispatch } from 'react-redux'\n\nimport Breadcrumb from '../../shared/model/Breadcrumb'\nimport { addBreadcrumbs, removeBreadcrumbs } from './breadcrumbs-slice'\n\nexport default function useAddBreadcrumbs(breadcrumbs: Breadcrumb[], withDashboard = false): void {\n  const dispatch = useDispatch()\n\n  const breadcrumbsStringified = withDashboard\n    ? JSON.stringify([...breadcrumbs, { i18nKey: 'dashboard.label', location: '/' }])\n    : JSON.stringify(breadcrumbs)\n\n  useEffect(() => {\n    const breadcrumbsParsed: Breadcrumb[] = JSON.parse(breadcrumbsStringified)\n    dispatch(addBreadcrumbs(breadcrumbsParsed))\n\n    return () => {\n      dispatch(removeBreadcrumbs(breadcrumbsParsed))\n    }\n  }, [breadcrumbsStringified, dispatch])\n}\n","enum Permissions {\n  ReadPatients = 'read:patients',\n  WritePatients = 'write:patients',\n  ReadAppointments = 'read:appointments',\n  WriteAppointments = 'write:appointments',\n  DeleteAppointment = 'delete:appointment',\n  AddAllergy = 'write:allergy',\n  AddDiagnosis = 'write:diagnosis',\n  RequestLab = 'write:labs',\n  CancelLab = 'cancel:lab',\n  CompleteLab = 'complete:lab',\n  ViewLab = 'read:lab',\n  ViewLabs = 'read:labs',\n  ViewIncidents = 'read:incidents',\n  ViewIncident = 'read:incident',\n  ReportIncident = 'write:incident',\n  ResolveIncident = 'resolve:incident',\n  AddCarePlan = 'write:care_plan',\n  ReadCarePlan = 'read:care_plan',\n  AddCareGoal = 'write:care_goal',\n  ReadCareGoal = 'read:care_goal',\n  RequestMedication = 'write:medications',\n  CancelMedication = 'cancel:medication',\n  CompleteMedication = 'complete:medication',\n  ViewMedication = 'read:medication',\n  ViewMedications = 'read:medications',\n  AddVisit = 'write:visit',\n  ReadVisits = 'read:visit',\n  RequestImaging = 'write:imaging',\n  ViewImagings = 'read:imagings',\n  ViewIncidentWidgets = 'read:incident_widgets',\n}\n\nexport default Permissions\n","import React from 'react'\nimport { Route, Redirect } from 'react-router-dom'\n\nconst PrivateRoute = ({ component, isAuthenticated, ...rest }: any) => {\n  const routeComponent = (props: any) =>\n    isAuthenticated ? React.createElement(component, props) : <Redirect to={{ pathname: '/' }} />\n  return <Route {...rest} render={routeComponent} />\n}\n\nexport default PrivateRoute\n","import { TextField, Label } from '@hospitalrun/components'\nimport React from 'react'\n\ninterface Props {\n  value: string\n  label?: string\n  name: string\n  isEditable?: boolean\n  onChange?: (event: React.ChangeEvent<HTMLTextAreaElement>) => void\n  isRequired?: boolean\n  feedback?: string\n  isInvalid?: boolean\n}\n\nconst TextFieldWithLabelFormGroup = (props: Props) => {\n  const { value, label, name, isEditable, isInvalid, isRequired, feedback, onChange } = props\n  const inputId = `${name}TextField`\n  return (\n    <div className=\"form-group\">\n      {label && <Label text={label} htmlFor={inputId} isRequired={isRequired} />}\n      <TextField\n        id={inputId}\n        rows={4}\n        value={value}\n        disabled={!isEditable}\n        onChange={onChange}\n        isInvalid={isInvalid}\n        feedback={feedback}\n      />\n    </div>\n  )\n}\n\nTextFieldWithLabelFormGroup.defaultProps = {\n  value: '',\n}\n\nexport default TextFieldWithLabelFormGroup\n","import { TextInput, Label } from '@hospitalrun/components'\nimport React from 'react'\n\ninterface Props {\n  value: string\n  label?: string\n  name: string\n  isEditable?: boolean\n  type: 'text' | 'email' | 'number' | 'tel' | 'password'\n  placeholder?: string\n  onChange?: (event: React.ChangeEvent<HTMLInputElement>) => void\n  isRequired?: boolean\n  feedback?: string\n  isInvalid?: boolean\n}\n\nconst TextInputWithLabelFormGroup = (props: Props) => {\n  const {\n    value,\n    label,\n    name,\n    isEditable,\n    onChange,\n    placeholder,\n    type,\n    isRequired,\n    feedback,\n    isInvalid,\n  } = props\n  const id = `${name}TextInput`\n  return (\n    <div className=\"form-group\">\n      {label && <Label text={label} htmlFor={id} isRequired={isRequired} />}\n      <TextInput\n        feedback={feedback}\n        id={id}\n        isInvalid={isInvalid}\n        value={value}\n        disabled={!isEditable}\n        onChange={onChange}\n        type={type}\n        placeholder={placeholder || label}\n      />\n    </div>\n  )\n}\n\nTextInputWithLabelFormGroup.defaultProps = {\n  value: '',\n  type: 'text',\n}\n\nexport default TextInputWithLabelFormGroup\n","/* eslint-disable @typescript-eslint/no-var-requires */\n/* eslint-disable camelcase */\nimport PouchDB from 'pouchdb'\nimport PouchAuth from 'pouchdb-authentication'\nimport PouchdbFind from 'pouchdb-find'\nimport RelationalPouch from 'relational-pouch'\n\nconst memoryAdapter = require('pouchdb-adapter-memory')\nconst search = require('pouchdb-quick-search')\n\nPouchDB.plugin(search)\nPouchDB.plugin(memoryAdapter)\nPouchDB.plugin(RelationalPouch)\nPouchDB.plugin(PouchdbFind)\nPouchDB.plugin(PouchAuth)\n\nlet serverDb\nlet localDb\n\nif (process.env.NODE_ENV === 'test') {\n  serverDb = new PouchDB('hospitalrun', { skip_setup: true, adapter: 'memory' })\n  localDb = new PouchDB('local_hospitalrun', { skip_setup: true, adapter: 'memory' })\n} else {\n  serverDb = new PouchDB(`${process.env.REACT_APP_HOSPITALRUN_API}/hospitalrun`, {\n    skip_setup: true,\n  })\n\n  localDb = new PouchDB('local_hospitalrun', { skip_setup: true })\n  localDb.sync(serverDb, { live: true, retry: true })\n}\n\nexport const schema = [\n  {\n    singular: 'patient',\n    plural: 'patients',\n    relations: {\n      appointments: {\n        hasMany: { type: 'appointment', options: { queryInverse: 'patient', async: true } },\n      },\n      labs: { hasMany: { type: 'lab', options: { queryInverse: 'patient', async: true } } },\n      medications: {\n        hasMany: { type: 'medication', options: { queryInverse: 'patient', async: true } },\n      },\n      imagings: { hasMany: { type: 'imaging', options: { queryInverse: 'patient', async: true } } },\n    },\n  },\n  {\n    singular: 'appointment',\n    plural: 'appointments',\n    relations: { patient: { belongsTo: 'patient' } },\n  },\n  {\n    singular: 'incident',\n    plural: 'incidents',\n  },\n  {\n    singular: 'lab',\n    plural: 'labs',\n    relations: { patient: { belongsTo: 'patient' } },\n  },\n  {\n    singular: 'imaging',\n    plural: 'imagings',\n    relations: { patient: { belongsTo: 'patient' } },\n  },\n  {\n    singular: 'medication',\n    plural: 'medications',\n    relations: { patient: { belongsTo: 'patient' } },\n  },\n]\nexport const relationalDb = localDb.setSchema(schema)\nexport const remoteDb = serverDb as PouchDB.Database\n","import shortid from 'shortid'\n\nconst generateCode = (prefix: string) => {\n  const id = shortid.generate()\n  return `${prefix}-${id}`\n}\n\nexport default generateCode\n","import Sort from './Sort'\n\nexport default interface SortRequest {\n  sorts: Sort[]\n}\n\nexport const Unsorted: SortRequest = { sorts: [] }\n","import { v4 as uuidv4 } from 'uuid'\n\nimport { schema } from '../config/pouchdb'\nimport AbstractDBModel from '../model/AbstractDBModel'\nimport SortRequest, { Unsorted } from './SortRequest'\n\nexport default class Repository<T extends AbstractDBModel> {\n  db: PouchDB.RelDatabase\n\n  type: string\n\n  pluralType: string\n\n  constructor(type: string, db: PouchDB.RelDatabase) {\n    this.db = db\n    this.type = type\n    this.pluralType = schema.find((s) => s.singular === this.type)?.plural || ''\n  }\n\n  async find(id: string): Promise<T> {\n    const documents = await this.db.rel.find(this.type, id)\n    const entity = documents[this.pluralType][0]\n    return entity\n  }\n\n  async findAll(sort = Unsorted): Promise<T[]> {\n    const selector: any = {\n      _id: {\n        $regex: RegExp(this.type, 'i'),\n      },\n    }\n\n    sort.sorts.forEach((s) => {\n      selector[`data.${s.field}`] = { $gt: null }\n    })\n\n    // Adds an index to each of the fields coming from the sorting object\n    // allowing the algorithm to sort by any given SortRequest, by avoiding the default index error (lack of index)\n\n    await Promise.all(\n      sort.sorts.map(\n        async (s): Promise<SortRequest> => {\n          await this.db.createIndex({\n            index: {\n              fields: [`data.${s.field}`],\n            },\n          })\n\n          return sort\n        },\n      ),\n    )\n\n    const result = await this.db.find({\n      selector,\n      sort:\n        sort.sorts.length > 0\n          ? sort.sorts.map((s) => ({ [`data.${s.field}`]: s.direction }))\n          : undefined,\n    })\n    const relDocs = await this.db.rel.parseRelDocs(this.type, result.docs)\n    return relDocs[this.pluralType]\n  }\n\n  async count(): Promise<number> {\n    const result = await this.findAll()\n    return result.length\n  }\n\n  async search(criteria: any): Promise<T[]> {\n    const response = await this.db.find({\n      selector: {\n        $and: [\n          {\n            _id: {\n              $regex: RegExp(this.type, 'i'),\n            },\n          },\n          { ...criteria.selector },\n        ],\n      },\n    })\n    const data = await this.db.rel.parseRelDocs(this.type, response.docs)\n    return data[this.pluralType]\n  }\n\n  async save(entity: T): Promise<T> {\n    const currentTime = new Date().toISOString()\n\n    const { id, rev, ...valuesToSave } = entity\n    const savedEntity = await this.db.rel.save(this.type, {\n      id: uuidv4(),\n      ...valuesToSave,\n      createdAt: currentTime,\n      updatedAt: currentTime,\n    })\n    return this.find(savedEntity.id)\n  }\n\n  async saveOrUpdate(entity: T): Promise<T> {\n    if (!entity.id) {\n      return this.save(entity)\n    }\n\n    const { id, rev, ...dataToSave } = entity\n\n    try {\n      await this.find(entity.id)\n      const entityToUpdate = {\n        id,\n        rev,\n        ...dataToSave,\n        updatedAt: new Date().toISOString(),\n      }\n\n      await this.db.rel.save(this.type, entityToUpdate)\n      return this.find(entity.id)\n    } catch (error) {\n      return this.save(entity)\n    }\n  }\n\n  async delete(entity: T): Promise<T> {\n    const entityToDelete = await this.find(entity.id)\n    await this.db.rel.del(this.type, entity)\n    return entityToDelete\n  }\n}\n","import escapeStringRegexp from 'escape-string-regexp'\n\nimport { relationalDb } from '../config/pouchdb'\nimport Appointment from '../model/Appointment'\nimport Lab from '../model/Lab'\nimport Medication from '../model/Medication'\nimport Patient from '../model/Patient'\nimport generateCode from '../util/generateCode'\nimport Repository from './Repository'\n\nclass PatientRepository extends Repository<Patient> {\n  constructor() {\n    super('patient', relationalDb)\n    relationalDb.createIndex({\n      index: { fields: ['_id', 'data.fullName', 'data.code'] },\n    })\n  }\n\n  async search(text: string): Promise<Patient[]> {\n    const escapedString = escapeStringRegexp(text)\n    return super.search({\n      selector: {\n        $or: [\n          {\n            'data.fullName': {\n              $regex: RegExp(escapedString, 'i'),\n            },\n          },\n          {\n            'data.code': text,\n          },\n        ],\n      },\n    })\n  }\n\n  async save(entity: Patient): Promise<Patient> {\n    const patientCode = generateCode('P')\n    entity.code = patientCode\n    const saveResult = await super.save(entity)\n    return this.find(saveResult.id)\n  }\n\n  async createIndex() {\n    return this.db.createIndex({\n      index: { fields: ['index'] },\n    })\n  }\n\n  async getAppointments(patientId: string): Promise<Appointment[]> {\n    const result = await this.db.rel.findHasMany('appointment', 'patient', patientId)\n    return result.appointments\n  }\n\n  async getLabs(patientId: string): Promise<Lab[]> {\n    const result = await this.db.rel.findHasMany('lab', 'patient', patientId)\n    return result.labs\n  }\n\n  async getMedications(patientId: string): Promise<Medication[]> {\n    const result = await this.db.rel.findHasMany('medication', 'patient', patientId)\n    return result.medications\n  }\n}\n\nexport default new PatientRepository()\n","import { relationalDb } from '../config/pouchdb'\nimport Imaging from '../model/Imaging'\nimport generateCode from '../util/generateCode'\nimport Repository from './Repository'\nimport SortRequest from './SortRequest'\n\ninterface SearchContainer {\n  text: string\n  status: 'requested' | 'completed' | 'canceled' | 'all'\n  defaultSortRequest: SortRequest\n}\n\nclass ImagingRepository extends Repository<Imaging> {\n  constructor() {\n    super('imaging', relationalDb)\n  }\n\n  async search(container: SearchContainer): Promise<Imaging[]> {\n    const searchValue = { $regex: RegExp(container.text, 'i') }\n    const selector = {\n      $and: [\n        {\n          $or: [\n            {\n              'data.type': searchValue,\n            },\n            {\n              'data.code': searchValue,\n            },\n          ],\n        },\n        ...(container.status !== 'all' ? [{ 'data.status': container.status }] : [undefined]),\n      ].filter((x) => x !== undefined),\n      sorts: container.defaultSortRequest,\n    }\n\n    return super.search({\n      selector,\n    })\n  }\n\n  async save(entity: Imaging): Promise<Imaging> {\n    const imagingCode = generateCode('I')\n    entity.code = imagingCode\n    return super.save(entity)\n  }\n}\n\nexport default new ImagingRepository()\n","import Imaging from '../../shared/model/Imaging'\n\nconst statusType: string[] = ['requested', 'completed', 'canceled']\n\nexport class ImagingRequestError extends Error {\n  patient?: string\n\n  type?: string\n\n  status?: string\n\n  constructor(message: string, patient?: string, type?: string, status?: string) {\n    super(message)\n    this.patient = patient\n    this.type = type\n    this.status = status\n    Object.setPrototypeOf(this, ImagingRequestError.prototype)\n  }\n}\n\nexport default function validateImagingRequest(request: Partial<Imaging>) {\n  const imagingRequestError = {} as any\n  if (!request.patient) {\n    imagingRequestError.patient = 'imagings.requests.error.patientRequired'\n  }\n\n  if (!request.type) {\n    imagingRequestError.type = 'imagings.requests.error.typeRequired'\n  }\n\n  if (!request.status) {\n    imagingRequestError.status = 'imagings.requests.error.statusRequired'\n  } else if (!statusType.includes(request.status)) {\n    imagingRequestError.status = 'imagings.requests.error.incorrectStatus'\n  }\n\n  return imagingRequestError\n}\n","import isEmpty from 'lodash/isEmpty'\nimport { queryCache, useMutation } from 'react-query'\n\nimport ImagingRepository from '../../shared/db/ImagingRepository'\nimport Imaging from '../../shared/model/Imaging'\nimport validateImagingRequest from '../util/validate-imaging-request'\n\nexport interface ImagingRequest {\n  status: 'completed' | 'requested' | 'canceled'\n  patient: string\n  visitId: string\n  fullName: string\n  notes?: string\n  type: string\n}\n\nfunction requestImagingWrapper(user: any) {\n  return async function requestImaging(request: ImagingRequest): Promise<void> {\n    const error = validateImagingRequest(request)\n\n    if (!isEmpty(error)) {\n      throw error\n    }\n\n    await ImagingRepository.save({\n      ...request,\n      requestedBy: user?.id || '',\n      requestedByFullName: user?.fullName || '',\n      requestedOn: new Date(Date.now()).toISOString(),\n    } as Imaging)\n  }\n}\n\nexport default function useRequestImaging(user: any) {\n  return useMutation(requestImagingWrapper(user), {\n    onSuccess: async () => {\n      await queryCache.invalidateQueries('imagings')\n    },\n    throwOnError: true,\n  })\n}\n","import { Select, Typeahead, Label, Button, Alert, Column, Row } from '@hospitalrun/components'\nimport format from 'date-fns/format'\nimport React, { useState, useEffect } from 'react'\nimport { useSelector } from 'react-redux'\nimport { useHistory } from 'react-router-dom'\n\nimport useAddBreadcrumbs from '../../page-header/breadcrumbs/useAddBreadcrumbs'\nimport { useUpdateTitle } from '../../page-header/title/TitleContext'\nimport { SelectOption } from '../../shared/components/input/SelectOption'\nimport TextFieldWithLabelFormGroup from '../../shared/components/input/TextFieldWithLabelFormGroup'\nimport TextInputWithLabelFormGroup from '../../shared/components/input/TextInputWithLabelFormGroup'\nimport PatientRepository from '../../shared/db/PatientRepository'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport Patient from '../../shared/model/Patient'\nimport { RootState } from '../../shared/store'\nimport useRequestImaging, { ImagingRequest } from '../hooks/useRequestImaging'\nimport { ImagingRequestError } from '../util/validate-imaging-request'\n\nconst NewImagingRequest = () => {\n  const { t } = useTranslator()\n  const history = useHistory()\n  const { user } = useSelector((state: RootState) => state.user)\n\n  const updateTitle = useUpdateTitle()\n  useEffect(() => {\n    updateTitle(t('imagings.requests.new'))\n  })\n  const [mutate] = useRequestImaging(user)\n  const [error, setError] = useState<ImagingRequestError>()\n  const [visitOption, setVisitOption] = useState([] as SelectOption[])\n\n  const statusOptions: SelectOption[] = [\n    { label: t('imagings.status.requested'), value: 'requested' },\n    { label: t('imagings.status.completed'), value: 'completed' },\n    { label: t('imagings.status.canceled'), value: 'canceled' },\n  ]\n\n  const [newImagingRequest, setNewImagingRequest] = useState<ImagingRequest>({\n    patient: '',\n    fullName: '',\n    status: 'requested',\n    notes: '',\n    type: '',\n    visitId: '',\n  })\n\n  const breadcrumbs = [\n    {\n      i18nKey: 'imagings.requests.new',\n      location: `/imaging/new`,\n    },\n  ]\n  useAddBreadcrumbs(breadcrumbs)\n\n  const onPatientChange = (patient: Patient) => {\n    if (patient) {\n      setNewImagingRequest((previousNewImagingRequest) => ({\n        ...previousNewImagingRequest,\n        patient: patient.id,\n        fullName: patient.fullName as string,\n      }))\n\n      const visits = patient.visits?.map((v) => ({\n        label: `${v.type} at ${format(new Date(v.startDateTime), 'yyyy-MM-dd hh:mm a')}`,\n        value: v.id,\n      })) as SelectOption[]\n\n      setVisitOption(visits)\n    } else {\n      setNewImagingRequest((previousNewImagingRequest) => ({\n        ...previousNewImagingRequest,\n        patient: '',\n        fullName: '',\n        visitId: '',\n      }))\n      setVisitOption([])\n    }\n  }\n\n  const onImagingTypeChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const type = event.currentTarget.value\n    setNewImagingRequest((previousNewImagingRequest) => ({\n      ...previousNewImagingRequest,\n      type,\n    }))\n  }\n\n  const onStatusChange = (value: string) => {\n    setNewImagingRequest((previousNewImagingRequest) => ({\n      ...previousNewImagingRequest,\n      status: value as 'completed' | 'canceled' | 'requested',\n    }))\n  }\n\n  const onVisitChange = (value: string) => {\n    setNewImagingRequest((previousNewImagingRequest) => ({\n      ...previousNewImagingRequest,\n      visitId: value,\n    }))\n  }\n\n  const onNoteChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const notes = event.currentTarget.value\n    setNewImagingRequest((previousNewImagingRequest) => ({\n      ...previousNewImagingRequest,\n      notes,\n    }))\n  }\n\n  const onSave = async () => {\n    try {\n      await mutate(newImagingRequest)\n      history.push(`/imaging`)\n    } catch (e) {\n      setError(e)\n    }\n  }\n\n  const onCancel = () => {\n    history.push('/imaging')\n  }\n\n  const defaultSelectedVisitsOption = () => {\n    if (visitOption !== undefined) {\n      return visitOption.filter(({ value }) => value === newImagingRequest.visitId)\n    }\n    return []\n  }\n\n  return (\n    <>\n      {error !== undefined && (\n        <Alert color=\"danger\" title={t('states.error')} message={t(error.message)} />\n      )}\n      <form>\n        <Row>\n          <Column>\n            <div className=\"form-group patient-typeahead\">\n              <Label htmlFor=\"patientTypeahead\" isRequired text={t('imagings.imaging.patient')} />\n              <Typeahead\n                id=\"patientTypeahead\"\n                placeholder={t('imagings.imaging.patient')}\n                onChange={(p: Patient[]) => {\n                  onPatientChange(p[0])\n                }}\n                onSearch={async (query: string) => PatientRepository.search(query)}\n                searchAccessor=\"fullName\"\n                renderMenuItemChildren={(p: Patient) => <div>{`${p.fullName} (${p.code})`}</div>}\n                isInvalid={!!error?.patient}\n                feedback={t(error?.patient)}\n              />\n            </div>\n          </Column>\n          <Column>\n            <div className=\"visits\" data-testid=\"visitSelect\">\n              <Label text={t('patient.visits.label')} title=\"visit\" isRequired />\n              <Select\n                id=\"visitSelect\"\n                options={visitOption || []}\n                defaultSelected={defaultSelectedVisitsOption()}\n                onChange={(values) => {\n                  onVisitChange(values[0])\n                }}\n                disabled={false}\n              />\n            </div>\n          </Column>\n        </Row>\n\n        <TextInputWithLabelFormGroup\n          name=\"imagingType\"\n          label={t('imagings.imaging.type')}\n          isRequired\n          isEditable\n          isInvalid={!!error?.type}\n          feedback={t(error?.type)}\n          value={newImagingRequest.type}\n          onChange={onImagingTypeChange}\n        />\n        <div className=\"imaging-status\" data-testid=\"statusSelect\">\n          <Label text={t('imagings.imaging.status')} title=\"status\" isRequired />\n          <Select\n            id=\"statusSelect\"\n            options={statusOptions}\n            defaultSelected={statusOptions.filter(\n              ({ value }) => value === newImagingRequest.status,\n            )}\n            onChange={(values) => onStatusChange(values[0])}\n            disabled={false}\n          />\n        </div>\n        <div className=\"form-group\">\n          <TextFieldWithLabelFormGroup\n            name=\"ImagingNotes\"\n            label={t('imagings.imaging.notes')}\n            isEditable\n            value={newImagingRequest.notes}\n            onChange={onNoteChange}\n          />\n        </div>\n        <div className=\"row float-right\">\n          <div className=\"btn-group btn-group-lg mt-3 mr-3\">\n            <Button className=\"mr-2\" color=\"success\" onClick={onSave}>\n              {t('imagings.requests.create')}\n            </Button>\n            <Button color=\"danger\" onClick={onCancel}>\n              {t('actions.cancel')}\n            </Button>\n          </div>\n        </div>\n      </form>\n    </>\n  )\n}\n\nexport default NewImagingRequest\n","import React, { useState } from 'react'\n\ntype Props = {\n  children?: React.ReactNode\n}\n\ntype ButtonUpdater = (buttons: React.ReactNode[]) => void\n\nconst ButtonBarStateContext = React.createContext<React.ReactNode[]>([])\nconst ButtonBarUpdateContext = React.createContext<ButtonUpdater>(() => {\n  // empty initial state\n})\n\nfunction ButtonBarProvider(props: Props) {\n  const { children } = props\n  const [state, setState] = useState<React.ReactNode[]>([])\n  return (\n    <ButtonBarStateContext.Provider value={state}>\n      <ButtonBarUpdateContext.Provider value={setState}>{children}</ButtonBarUpdateContext.Provider>\n    </ButtonBarStateContext.Provider>\n  )\n}\nfunction useButtons() {\n  const context = React.useContext(ButtonBarStateContext)\n  if (context === undefined) {\n    throw new Error('useButtons must be used within a Button Bar Context')\n  }\n  return context\n}\nfunction useButtonToolbarSetter() {\n  const context = React.useContext(ButtonBarUpdateContext)\n  if (context === undefined) {\n    throw new Error('useButtonToolBarSetter must be used within a Button Bar Context')\n  }\n  return context\n}\n\nexport { ButtonBarProvider, useButtons, useButtonToolbarSetter }\n","import { Spinner } from '@hospitalrun/components'\nimport React from 'react'\n\nconst Loading = () => <Spinner color=\"blue\" loading size={20} type=\"BeatLoader\" />\n\nexport default Loading\n","export const extractUsername = (username: string) =>\n  username ? username.slice(username.lastIndexOf(':') + 1) : ''\n","import { useQuery } from 'react-query'\n\nimport ImagingRepository from '../../shared/db/ImagingRepository'\nimport SortRequest from '../../shared/db/SortRequest'\nimport Imaging from '../../shared/model/Imaging'\nimport ImagingSearchRequest from '../model/ImagingSearchRequest'\n\nconst defaultSortRequest: SortRequest = {\n  sorts: [\n    {\n      field: 'requestedOn',\n      direction: 'desc',\n    },\n  ],\n}\n\nfunction searchImagingRequests(_: string, searchRequest: ImagingSearchRequest): Promise<Imaging[]> {\n  return ImagingRepository.search({ ...searchRequest, defaultSortRequest })\n}\n\nexport default function useImagingSearch(searchRequest: ImagingSearchRequest) {\n  return useQuery(['imagings', searchRequest], searchImagingRequests)\n}\n","import { Table } from '@hospitalrun/components'\nimport format from 'date-fns/format'\nimport React from 'react'\n\nimport Loading from '../../shared/components/Loading'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport { extractUsername } from '../../shared/util/extractUsername'\nimport useImagingSearch from '../hooks/useImagingSearch'\nimport ImagingSearchRequest from '../model/ImagingSearchRequest'\n\ninterface Props {\n  searchRequest: ImagingSearchRequest\n}\n\nconst ImagingRequestTable = (props: Props) => {\n  const { searchRequest } = props\n  const { t } = useTranslator()\n  const { data, status } = useImagingSearch(searchRequest)\n\n  if (data === undefined || status === 'loading') {\n    return <Loading />\n  }\n\n  return (\n    <Table\n      getID={(row) => row.id}\n      columns={[\n        { label: t('imagings.imaging.code'), key: 'code' },\n        { label: t('imagings.imaging.type'), key: 'type' },\n        {\n          label: t('imagings.imaging.requestedOn'),\n          key: 'requestedOn',\n          formatter: (row) =>\n            row.requestedOn ? format(new Date(row.requestedOn), 'yyyy-MM-dd hh:mm a') : '',\n        },\n        { label: t('imagings.imaging.patient'), key: 'fullName' },\n        {\n          label: t('imagings.imaging.requestedBy'),\n          key: 'requestedBy',\n          formatter: (row) => extractUsername(row.requestedByFullName || ''),\n        },\n        { label: t('imagings.imaging.status'), key: 'status' },\n      ]}\n      data={data}\n    />\n  )\n}\n\nexport default ImagingRequestTable\n","enum IncidentFilter {\n  reported = 'reported',\n  resolved = 'resolved',\n  all = 'all',\n}\n\nexport default IncidentFilter\n","import { Button, Container, Row } from '@hospitalrun/components'\nimport React, { useState, useEffect, useCallback } from 'react'\nimport { useSelector } from 'react-redux'\nimport { useHistory } from 'react-router-dom'\n\nimport { useButtonToolbarSetter } from '../../page-header/button-toolbar/ButtonBarProvider'\nimport { useUpdateTitle } from '../../page-header/title/TitleContext'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport Permissions from '../../shared/model/Permissions'\nimport { RootState } from '../../shared/store'\nimport ImagingSearchRequest from '../model/ImagingSearchRequest'\nimport ImagingRequestTable from './ImagingRequestTable'\n\nconst ViewImagings = () => {\n  const { t } = useTranslator()\n  const { permissions } = useSelector((state: RootState) => state.user)\n  const history = useHistory()\n  const setButtons = useButtonToolbarSetter()\n  const updateTitle = useUpdateTitle()\n  useEffect(() => {\n    updateTitle(t('imagings.label'))\n  })\n  const [searchRequest, setSearchRequest] = useState<ImagingSearchRequest>({\n    status: 'all',\n    text: '',\n  })\n\n  const getButtons = useCallback(() => {\n    const buttons: React.ReactNode[] = []\n\n    if (permissions.includes(Permissions.RequestImaging)) {\n      buttons.push(\n        <Button\n          icon=\"add\"\n          onClick={() => history.push('/imaging/new')}\n          outlined\n          color=\"success\"\n          key=\"imaging.requests.new\"\n        >\n          {t('imagings.requests.new')}\n        </Button>,\n      )\n    }\n\n    return buttons\n  }, [permissions, history, t])\n\n  useEffect(() => {\n    setSearchRequest((previousRequest) => ({ ...previousRequest, status: 'all' }))\n  }, [])\n\n  useEffect(() => {\n    setButtons(getButtons())\n    return () => {\n      setButtons([])\n    }\n  }, [getButtons, setButtons])\n\n  return (\n    <Container>\n      <Row>\n        <ImagingRequestTable searchRequest={searchRequest} />\n      </Row>\n    </Container>\n  )\n}\n\nexport default ViewImagings\n","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { Switch } from 'react-router-dom'\n\nimport useAddBreadcrumbs from '../page-header/breadcrumbs/useAddBreadcrumbs'\nimport PrivateRoute from '../shared/components/PrivateRoute'\nimport Permissions from '../shared/model/Permissions'\nimport { RootState } from '../shared/store'\nimport NewImagingRequest from './requests/NewImagingRequest'\nimport ImagingRequests from './search/ViewImagings'\n\nconst Imagings = () => {\n  const { permissions } = useSelector((state: RootState) => state.user)\n  const breadcrumbs = [\n    {\n      i18nKey: 'imagings.imaging.label',\n      location: '/imaging',\n    },\n  ]\n  useAddBreadcrumbs(breadcrumbs, true)\n\n  return (\n    <Switch>\n      <PrivateRoute\n        isAuthenticated={permissions.includes(Permissions.ViewImagings)}\n        exact\n        path=\"/imaging\"\n        component={ImagingRequests}\n      />\n      <PrivateRoute\n        isAuthenticated={permissions.includes(Permissions.RequestImaging)}\n        exact\n        path=\"/imaging/new\"\n        component={NewImagingRequest}\n      />\n    </Switch>\n  )\n}\n\nexport default Imagings\n","import IncidentFilter from '../../incidents/IncidentFilter'\nimport { relationalDb } from '../config/pouchdb'\nimport Incident from '../model/Incident'\nimport Repository from './Repository'\n\ninterface SearchOptions {\n  status: IncidentFilter\n}\nclass IncidentRepository extends Repository<Incident> {\n  constructor() {\n    super('incident', relationalDb)\n  }\n\n  async search(options: SearchOptions): Promise<Incident[]> {\n    return super.search(IncidentRepository.getSearchCriteria(options))\n  }\n\n  private static getSearchCriteria(options: SearchOptions): any {\n    const statusFilter =\n      options.status !== IncidentFilter.all ? [{ 'data.status': options.status }] : []\n    const selector = {\n      $and: statusFilter,\n    }\n    return {\n      selector,\n    }\n  }\n}\n\nexport default new IncidentRepository()\n","import { useQuery } from 'react-query'\n\nimport IncidentRepository from '../../shared/db/IncidentRepository'\nimport Incident from '../../shared/model/Incident'\nimport IncidentSearchRequest from '../model/IncidentSearchRequest'\n\nfunction fetchIncidents(_: string, searchRequest: IncidentSearchRequest): Promise<Incident[]> {\n  return IncidentRepository.search(searchRequest)\n}\n\nexport default function useIncidents(searchRequest: IncidentSearchRequest) {\n  return useQuery(['incidents', searchRequest], fetchIncidents)\n}\n","import { Spinner, Table, Dropdown } from '@hospitalrun/components'\nimport format from 'date-fns/format'\nimport React from 'react'\nimport { useHistory } from 'react-router'\n\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport { DownloadLink, getCSV } from '../../shared/util/DataHelpers'\nimport { extractUsername } from '../../shared/util/extractUsername'\nimport useIncidents from '../hooks/useIncidents'\nimport IncidentSearchRequest from '../model/IncidentSearchRequest'\n\ninterface Props {\n  searchRequest: IncidentSearchRequest\n}\n\nexport function populateExportData(dataToPopulate: any, theData: any) {\n  let first = true\n  if (theData != null) {\n    theData.forEach((elm: any) => {\n      const entry = {\n        code: elm.code,\n        date: format(new Date(elm.date), 'yyyy-MM-dd hh:mm a'),\n        reportedBy: elm.reportedBy,\n        reportedOn: format(new Date(elm.reportedOn), 'yyyy-MM-dd hh:mm a'),\n        status: elm.status,\n      }\n      if (first) {\n        dataToPopulate[0] = entry\n        first = false\n      } else {\n        dataToPopulate.push(entry)\n      }\n    })\n  }\n}\n\nfunction ViewIncidentsTable(props: Props) {\n  const { searchRequest } = props\n  const { t } = useTranslator()\n  const history = useHistory()\n  const { data, isLoading } = useIncidents(searchRequest)\n\n  if (data === undefined || isLoading) {\n    return <Spinner type=\"DotLoader\" loading />\n  }\n\n  // filter data\n  const exportData = [{}]\n\n  function downloadCSV() {\n    populateExportData(exportData, data)\n\n    const csv = getCSV(exportData)\n\n    const incidentsText = t('incidents.label')\n\n    const filename = incidentsText\n      .concat('-')\n      .concat(format(new Date(Date.now()), 'yyyy-MM-dd--hh-mma'))\n      .concat('.csv')\n\n    DownloadLink(csv, filename)\n  }\n\n  const dropdownItems = [\n    {\n      onClick: function runfun() {\n        downloadCSV()\n      },\n      text: 'CSV',\n    },\n  ]\n\n  const dropStyle = {\n    marginLeft: 'auto', // note the capital 'W' here\n    marginBottom: '4px', // 'ms' is the only lowercase vendor prefix\n  }\n\n  return (\n    <>\n      <Dropdown\n        direction=\"down\"\n        variant=\"secondary\"\n        text={t('incidents.reports.download')}\n        style={dropStyle}\n        items={dropdownItems}\n      />\n      <Table\n        getID={(row) => row.id}\n        data={data}\n        columns={[\n          {\n            label: t('incidents.reports.code'),\n            key: 'code',\n          },\n          {\n            label: t('incidents.reports.dateOfIncident'),\n            key: 'date',\n            formatter: (row) => (row.date ? format(new Date(row.date), 'yyyy-MM-dd hh:mm a') : ''),\n          },\n          {\n            label: t('incidents.reports.reportedBy'),\n            key: 'reportedBy',\n            formatter: (row) => extractUsername(row.reportedBy),\n          },\n          {\n            label: t('incidents.reports.reportedOn'),\n            key: 'reportedOn',\n            formatter: (row) =>\n              row.reportedOn ? format(new Date(row.reportedOn), 'yyyy-MM-dd hh:mm a') : '',\n          },\n          {\n            label: t('incidents.reports.status'),\n            key: 'status',\n          },\n        ]}\n        actionsHeaderText={t('actions.label')}\n        actions={[\n          {\n            label: t('actions.view'),\n            action: (row) => history.push(`incidents/${row.id}`),\n          },\n        ]}\n      />\n    </>\n  )\n}\n\nexport default ViewIncidentsTable\n","import { Parser } from 'json2csv'\n\nexport function getCSV<T>(data: T[]): string {\n  const fields = Object.keys(data[0])\n  const opts = { fields }\n  const parser = new Parser(opts)\n  const csv = parser.parse(data)\n  return csv\n}\n\nexport function DownloadLink(data: string, fileName: string) {\n  const text = data\n  const element = document.createElement('a')\n  element.setAttribute('href', `data:text/plain;charset=utf-8,${encodeURIComponent(text)}`)\n  element.setAttribute('download', fileName)\n\n  element.style.display = 'none'\n  document.body.appendChild(element)\n  element.click()\n\n  return document.body.removeChild(element)\n}\n","import { Select, Label, Button, Container, Row, Column } from '@hospitalrun/components'\nimport React, { useEffect, useState } from 'react'\nimport { useHistory } from 'react-router-dom'\n\nimport { useButtonToolbarSetter } from '../../page-header/button-toolbar/ButtonBarProvider'\nimport { useUpdateTitle } from '../../page-header/title/TitleContext'\nimport { SelectOption } from '../../shared/components/input/SelectOption'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport IncidentFilter from '../IncidentFilter'\nimport ViewIncidentsTable from './ViewIncidentsTable'\n\nconst ViewIncidents = () => {\n  const { t } = useTranslator()\n  const history = useHistory()\n  const setButtonToolBar = useButtonToolbarSetter()\n  const updateTitle = useUpdateTitle()\n  useEffect(() => {\n    updateTitle(t('incidents.reports.label'))\n  })\n  const [searchFilter, setSearchFilter] = useState(IncidentFilter.reported)\n\n  useEffect(() => {\n    setButtonToolBar([\n      <Button\n        key=\"newIncidentButton\"\n        outlined\n        color=\"success\"\n        icon=\"add\"\n        onClick={() => history.push('/incidents/new')}\n      >\n        {t('incidents.reports.new')}\n      </Button>,\n    ])\n\n    return () => {\n      setButtonToolBar([])\n    }\n  }, [setButtonToolBar, t, history])\n\n  const filterOptions: SelectOption[] = Object.values(IncidentFilter).map((filter) => ({\n    label: t(`incidents.status.${filter}`),\n    value: `${filter}`,\n  }))\n\n  return (\n    <Container>\n      <Row>\n        <Column md={3} lg={2}>\n          <Label text={t('incidents.filterTitle')} title=\"type\" />\n          <Select\n            id=\"type\"\n            options={filterOptions}\n            defaultSelected={filterOptions.filter(({ value }) => value === searchFilter)}\n            onChange={(values) => setSearchFilter(values[0] as IncidentFilter)}\n            disabled={false}\n          />\n        </Column>\n      </Row>\n      <Row>\n        <ViewIncidentsTable searchRequest={{ status: searchFilter }} />\n      </Row>\n    </Container>\n  )\n}\n\nexport default ViewIncidents\n","import { Label, DateTimePicker } from '@hospitalrun/components'\nimport React from 'react'\n\ninterface Props {\n  name: string\n  label: string\n  value: Date | undefined\n  isEditable?: boolean\n  isRequired?: boolean\n  onChange?: (date: Date) => void\n  feedback?: string\n  isInvalid?: boolean\n}\n\nconst DateTimePickerWithLabelFormGroup = (props: Props) => {\n  const { onChange, label, name, isEditable, value, isRequired, feedback, isInvalid } = props\n  const id = `${name}DateTimePicker`\n  return (\n    <div className=\"form-group\" data-testid={id}>\n      <Label text={label} isRequired={isRequired} htmlFor={id} />\n      <DateTimePicker\n        dateFormat=\"MM/dd/yyyy h:mm aa\"\n        dateFormatCalendar=\"LLLL yyyy\"\n        dropdownMode=\"scroll\"\n        disabled={!isEditable}\n        selected={value}\n        isInvalid={isInvalid}\n        feedback={feedback}\n        onChange={(inputDate) => {\n          if (onChange) {\n            onChange(inputDate)\n          }\n        }}\n        showTimeSelect\n        timeCaption=\"time\"\n        timeFormat=\"h:mm aa\"\n        timeIntervals={15}\n        withPortal={false}\n      />\n    </div>\n  )\n}\n\nexport default DateTimePickerWithLabelFormGroup\n","import isAfter from 'date-fns/isAfter'\n\nimport Incident from '../../shared/model/Incident'\n\nexport class IncidentError extends Error {\n  date?: string\n\n  department?: string\n\n  category?: string\n\n  categoryItem?: string\n\n  description?: string\n\n  constructor(\n    message: string,\n    date: string,\n    department: string,\n    category: string,\n    categoryItem: string,\n    description: string,\n  ) {\n    super(message)\n    this.date = date\n    this.department = department\n    this.category = category\n    this.categoryItem = categoryItem\n    this.description = description\n    Object.setPrototypeOf(this, IncidentError.prototype)\n  }\n}\n\nexport default function validateIncident(incident: Incident): IncidentError {\n  const newError: any = {}\n\n  if (!incident.date) {\n    newError.date = 'incidents.reports.error.dateRequired'\n  } else if (isAfter(new Date(incident.date), new Date(Date.now()))) {\n    newError.date = 'incidents.reports.error.dateMustBeInThePast'\n  }\n\n  if (!incident.department) {\n    newError.department = 'incidents.reports.error.departmentRequired'\n  }\n\n  if (!incident.category) {\n    newError.category = 'incidents.reports.error.categoryRequired'\n  }\n\n  if (!incident.categoryItem) {\n    newError.categoryItem = 'incidents.reports.error.categoryItemRequired'\n  }\n\n  if (!incident.description) {\n    newError.description = 'incidents.reports.error.descriptionRequired'\n  }\n\n  return newError as IncidentError\n}\n","import isEmpty from 'lodash/isEmpty'\nimport { queryCache, useMutation } from 'react-query'\nimport shortid from 'shortid'\n\nimport IncidentRepository from '../../shared/db/IncidentRepository'\nimport Incident from '../../shared/model/Incident'\nimport validateIncident from '../util/validate-incident'\n\nconst getIncidentCode = (): string => `I-${shortid.generate()}`\n\nexport function reportIncident(incident: Incident): Promise<Incident> {\n  const error = validateIncident(incident)\n  if (isEmpty(error)) {\n    const updatedIncident: Incident = {\n      ...incident,\n      code: getIncidentCode(),\n      status: 'reported',\n      reportedBy: 'some user',\n      reportedOn: new Date(Date.now()).toISOString(),\n    }\n    return IncidentRepository.save(updatedIncident)\n  }\n\n  throw error\n}\n\nexport default function useReportIncident() {\n  return useMutation(reportIncident, {\n    onSuccess: async () => {\n      await queryCache.invalidateQueries('incidents')\n    },\n    throwOnError: true,\n  })\n}\n","import { Button, Row, Column, Typeahead, Label } from '@hospitalrun/components'\nimport React, { useState, useEffect } from 'react'\nimport { useHistory } from 'react-router-dom'\n\nimport useAddBreadcrumbs from '../../page-header/breadcrumbs/useAddBreadcrumbs'\nimport { useUpdateTitle } from '../../page-header/title/TitleContext'\nimport DateTimePickerWithLabelFormGroup from '../../shared/components/input/DateTimePickerWithLabelFormGroup'\nimport TextFieldWithLabelFormGroup from '../../shared/components/input/TextFieldWithLabelFormGroup'\nimport TextInputWithLabelFormGroup from '../../shared/components/input/TextInputWithLabelFormGroup'\nimport PatientRepository from '../../shared/db/PatientRepository'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport Incident from '../../shared/model/Incident'\nimport Patient from '../../shared/model/Patient'\nimport useReportIncident from '../hooks/useReportIncident'\nimport { IncidentError } from '../util/validate-incident'\n\nconst ReportIncident = () => {\n  const [mutate] = useReportIncident()\n  const history = useHistory()\n  const { t } = useTranslator()\n  const updateTitle = useUpdateTitle()\n  useEffect(() => {\n    updateTitle(t('incidents.reports.new'))\n  })\n  const breadcrumbs = [\n    {\n      i18nKey: 'incidents.reports.new',\n      location: `/incidents/new`,\n    },\n  ]\n  useAddBreadcrumbs(breadcrumbs)\n  const [incident, setIncident] = useState({\n    date: new Date().toISOString(),\n    department: '',\n    category: '',\n    categoryItem: '',\n    description: '',\n    patient: '',\n  })\n\n  const [error, setError] = useState<IncidentError | undefined>(undefined)\n\n  const onDateChange = (newDate: Date) => {\n    setIncident((prevState) => ({\n      ...prevState,\n      date: newDate.toISOString(),\n    }))\n  }\n\n  const onTextInputChange = (text: string, name: string) => {\n    setIncident((prevState) => ({\n      ...prevState,\n      [name]: text,\n    }))\n  }\n\n  const onSave = async () => {\n    try {\n      const data = await mutate(incident as Incident)\n      history.push(`/incidents/${data?.id}`)\n    } catch (e) {\n      setError(e)\n    }\n  }\n\n  const onCancel = () => {\n    history.push('/incidents')\n  }\n\n  const onPatientChange = (patient: Patient) => {\n    if (patient) {\n      setIncident((prevIncident) => ({\n        ...prevIncident,\n        patient: patient.id,\n      }))\n    } else {\n      setIncident((prevIncident) => ({\n        ...prevIncident,\n        patient: '',\n      }))\n    }\n  }\n\n  return (\n    <form aria-label=\"Report Incident form\">\n      <Row>\n        <Column md={6}>\n          <DateTimePickerWithLabelFormGroup\n            name=\"dateOfIncident\"\n            label={t('incidents.reports.dateOfIncident')}\n            isEditable\n            isRequired\n            onChange={onDateChange}\n            value={new Date(incident.date)}\n            isInvalid={!!error?.date}\n            feedback={t(error?.date as string)}\n          />\n        </Column>\n        <Column md={6}>\n          <TextInputWithLabelFormGroup\n            label={t('incidents.reports.department')}\n            name=\"department\"\n            isRequired\n            isEditable\n            value={incident.department}\n            onChange={(event) => onTextInputChange(event.currentTarget.value, 'department')}\n            isInvalid={!!error?.department}\n            feedback={t(error?.department as string)}\n          />\n        </Column>\n      </Row>\n      <Row>\n        <Column md={6}>\n          <TextInputWithLabelFormGroup\n            name=\"category\"\n            label={t('incidents.reports.category')}\n            isEditable\n            isRequired\n            value={incident.category}\n            onChange={(event) => onTextInputChange(event.currentTarget.value, 'category')}\n            isInvalid={!!error?.category}\n            feedback={t(error?.category as string)}\n          />\n        </Column>\n        <Column md={6}>\n          <TextInputWithLabelFormGroup\n            label={t('incidents.reports.categoryItem')}\n            name=\"categoryItem\"\n            isRequired\n            isEditable\n            value={incident.categoryItem}\n            onChange={(event) => onTextInputChange(event.currentTarget.value, 'categoryItem')}\n            isInvalid={!!error?.categoryItem}\n            feedback={t(error?.categoryItem as string)}\n          />\n        </Column>\n      </Row>\n      <Row>\n        <Column md={12}>\n          <TextFieldWithLabelFormGroup\n            label={t('incidents.reports.description')}\n            name=\"description\"\n            isRequired\n            isEditable\n            value={incident.description}\n            onChange={(event) => onTextInputChange(event.currentTarget.value, 'description')}\n            isInvalid={!!error?.description}\n            feedback={t(error?.description as string)}\n          />\n        </Column>\n      </Row>\n      <Row>\n        <Column md={6}>\n          <div className=\"form-group patient-typeahead\">\n            <Label htmlFor=\"patientTypeahead\" text={t('incidents.reports.patient')} />\n            <Typeahead\n              id=\"patientTypeahead\"\n              placeholder={t('incidents.reports.patient')}\n              onChange={(p: Patient[]) => onPatientChange(p[0])}\n              onSearch={async (query: string) => PatientRepository.search(query)}\n              searchAccessor=\"fullName\"\n              renderMenuItemChildren={(p: Patient) => <div>{`${p.fullName} (${p.code})`}</div>}\n            />\n          </div>\n        </Column>\n      </Row>\n\n      <div className=\"row float-right\">\n        <div className=\"btn-group btn-group-lg mt-3 mr-3\">\n          <Button className=\"mr-2\" color=\"success\" onClick={onSave}>\n            {t('incidents.reports.new')}\n          </Button>\n          <Button color=\"danger\" onClick={onCancel}>\n            {t('actions.cancel')}\n          </Button>\n        </div>\n      </div>\n    </form>\n  )\n}\n\nexport default ReportIncident\n","import { useQuery } from 'react-query'\n\nimport PatientRepository from '../../shared/db/PatientRepository'\nimport Patient from '../../shared/model/Patient'\n\nfunction fetchPatient(_: any, id?: string): Promise<Patient> {\n  return PatientRepository.find(id || '')\n}\n\nexport default function usePatient(id?: string) {\n  return useQuery(['patient', id], fetchPatient, { enabled: id })\n}\n","import { useQuery } from 'react-query'\n\nimport IncidentRepository from '../../shared/db/IncidentRepository'\nimport Incident from '../../shared/model/Incident'\n\nfunction fetchIncidentById(_: any, incidentId: string): Promise<Incident> {\n  return IncidentRepository.find(incidentId)\n}\n\nexport default function useIncident(incidentId: string) {\n  return useQuery(['incident', incidentId], fetchIncidentById)\n}\n","import { queryCache, useMutation } from 'react-query'\n\nimport IncidentRepository from '../../shared/db/IncidentRepository'\nimport Incident from '../../shared/model/Incident'\n\nfunction resolveIncident(incident: Incident): Promise<Incident> {\n  return IncidentRepository.saveOrUpdate({\n    ...incident,\n    resolvedOn: new Date(Date.now()).toISOString(),\n    status: 'resolved',\n  })\n}\n\nexport default function useResolveIncident() {\n  return useMutation(resolveIncident, {\n    onSuccess: async (data: Incident) => {\n      queryCache.setQueryData(['incident', data.id], data)\n    },\n  })\n}\n","import { Button, Column, Row, Spinner } from '@hospitalrun/components'\nimport format from 'date-fns/format'\nimport React from 'react'\nimport { useHistory } from 'react-router'\n\nimport usePatient from '../../patients/hooks/usePatient'\nimport TextFieldWithLabelFormGroup from '../../shared/components/input/TextFieldWithLabelFormGroup'\nimport TextInputWithLabelFormGroup from '../../shared/components/input/TextInputWithLabelFormGroup'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport Permissions from '../../shared/model/Permissions'\nimport { extractUsername } from '../../shared/util/extractUsername'\nimport useIncident from '../hooks/useIncident'\nimport useResolveIncident from '../hooks/useResolveIncident'\n\ninterface Props {\n  incidentId: string\n  permissions: (Permissions | null)[]\n}\n\nfunction ViewIncidentDetails(props: Props) {\n  const { incidentId, permissions } = props\n  const history = useHistory()\n  const { t } = useTranslator()\n  const { data, isLoading } = useIncident(incidentId)\n  const { data: patient } = usePatient(data?.patient)\n  const [mutate] = useResolveIncident()\n\n  if (data === undefined || isLoading) {\n    return <Spinner type=\"DotLoader\" loading />\n  }\n\n  const onResolve = async () => {\n    await mutate(data)\n    history.push('/incidents')\n  }\n\n  const getButtons = () => {\n    const buttons: React.ReactNode[] = []\n    if (data.status === 'resolved') {\n      return buttons\n    }\n\n    if (permissions.includes(Permissions.ResolveIncident)) {\n      buttons.push(\n        <Button onClick={onResolve} color=\"primary\" key=\"incidents.reports.resolve\">\n          {t('incidents.reports.resolve')}\n        </Button>,\n      )\n    }\n\n    return buttons\n  }\n\n  const getResolvedOnDate = () => {\n    if (data.status === 'resolved' && data.resolvedOn) {\n      return (\n        <Column>\n          <div className=\"form-group incident-resolved-on\">\n            <h4>{t('incidents.reports.resolvedOn')}</h4>\n            <h5>{format(new Date(data.resolvedOn), 'yyyy-MM-dd hh:mm a')}</h5>\n          </div>\n        </Column>\n      )\n    }\n    return <></>\n  }\n\n  return (\n    <>\n      <Row>\n        <Column>\n          <div className=\"form-group incident-date\">\n            <h4>{t('incidents.reports.dateOfIncident')}</h4>\n            <h5>{format(new Date(data.date || ''), 'yyyy-MM-dd hh:mm a')}</h5>\n          </div>\n        </Column>\n        <Column>\n          <div className=\"form-group incident-status\">\n            <h4>{t('incidents.reports.status')}</h4>\n            <h5>{data.status}</h5>\n          </div>\n        </Column>\n        <Column>\n          <div className=\"form-group incident-reported-by\">\n            <h4>{t('incidents.reports.reportedBy')}</h4>\n            <h5>{extractUsername(data.reportedBy)}</h5>\n          </div>\n        </Column>\n        <Column>\n          <div className=\"form-group incident-reported-on\">\n            <h4>{t('incidents.reports.reportedOn')}</h4>\n            <h5>{format(new Date(data.reportedOn || ''), 'yyyy-MM-dd hh:mm a')}</h5>\n          </div>\n        </Column>\n        {getResolvedOnDate()}\n      </Row>\n      <div className=\"border-bottom mb-2\" />\n      <Row>\n        <Column md={12}>\n          <TextInputWithLabelFormGroup\n            label={t('incidents.reports.department')}\n            name=\"department\"\n            value={data.department}\n          />\n        </Column>\n      </Row>\n      <Row>\n        <Column md={6}>\n          <TextInputWithLabelFormGroup\n            name=\"category\"\n            label={t('incidents.reports.category')}\n            value={data.category}\n          />\n        </Column>\n        <Column md={6}>\n          <TextInputWithLabelFormGroup\n            label={t('incidents.reports.categoryItem')}\n            name=\"categoryItem\"\n            value={data.categoryItem}\n          />\n        </Column>\n      </Row>\n      <Row>\n        <Column md={12}>\n          <TextFieldWithLabelFormGroup\n            label={t('incidents.reports.description')}\n            name=\"description\"\n            value={data.description}\n          />\n        </Column>\n      </Row>\n      {data.patient && (\n        <Row>\n          <Column md={6}>\n            <TextInputWithLabelFormGroup\n              label={t('incidents.reports.patient')}\n              name=\"patient\"\n              value={patient?.fullName}\n            />\n          </Column>\n        </Row>\n      )}\n      {data.resolvedOn === undefined && (\n        <div className=\"row float-right\">\n          <div className=\"btn-group btn-group-lg mt-3 mr-3\">{getButtons()}</div>\n        </div>\n      )}\n    </>\n  )\n}\n\nexport default ViewIncidentDetails\n","import React, { useEffect } from 'react'\nimport { useSelector } from 'react-redux'\nimport { useParams } from 'react-router-dom'\n\nimport useAddBreadcrumbs from '../../page-header/breadcrumbs/useAddBreadcrumbs'\nimport { useUpdateTitle } from '../../page-header/title/TitleContext'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport { RootState } from '../../shared/store'\nimport ViewIncidentDetails from './ViewIncidentDetails'\n\nconst ViewIncident = () => {\n  const { id } = useParams()\n  const { permissions } = useSelector((root: RootState) => root.user)\n  const { t } = useTranslator()\n  const updateTitle = useUpdateTitle()\n  useEffect(() => {\n    updateTitle(t('incidents.reports.view'))\n  })\n  useAddBreadcrumbs([\n    {\n      i18nKey: 'incidents.reports.view',\n      location: `/incidents/${id}`,\n    },\n  ])\n\n  if (id === undefined || permissions === undefined) {\n    return <></>\n  }\n\n  return <ViewIncidentDetails incidentId={id} permissions={permissions} />\n}\n\nexport default ViewIncident\n","import { LineGraph, Spinner } from '@hospitalrun/components'\nimport React, { useEffect, useState } from 'react'\n\nimport { useUpdateTitle } from '../../page-header/title/TitleContext'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport useIncidents from '../hooks/useIncidents'\nimport IncidentFilter from '../IncidentFilter'\nimport IncidentSearchRequest from '../model/IncidentSearchRequest'\n\nconst VisualizeIncidents = () => {\n  const { t } = useTranslator()\n  const updateTitle = useUpdateTitle()\n  useEffect(() => {\n    updateTitle(t('incidents.visualize.view'))\n  })\n  const searchFilter = IncidentFilter.reported\n  const searchRequest: IncidentSearchRequest = { status: searchFilter }\n  const { data, isLoading } = useIncidents(searchRequest)\n  const [incident, setIncident] = useState(0)\n  const [showGraph, setShowGraph] = useState(false)\n  const [monthlyIncidents, setMonthlyIncidents] = useState(Array(12).fill(0))\n\n  const getIncidentMonth = (reportedOn: string) =>\n    // reportedOn: \"2020-08-12T19:53:30.153Z\"\n    Number(reportedOn.slice(5, 7)) - 1\n\n  useEffect(() => {\n    if (data === undefined || isLoading) {\n      // incidents data not loaded yet, do nothing\n    } else {\n      const totalIncidents: number = data.length\n      if (totalIncidents > incident) {\n        const incidentMonth = getIncidentMonth(data[incident].reportedOn)\n        setMonthlyIncidents((prevIncidents) =>\n          prevIncidents.map((value, index) => (index === incidentMonth ? value + 1 : value)),\n        )\n        setIncident(incident + 1)\n      } else if (totalIncidents === incident) {\n        // incidents data finished processing\n        setShowGraph(true)\n      }\n    }\n  }, [data, monthlyIncidents, isLoading, incident])\n\n  return !showGraph ? (\n    <Spinner type=\"DotLoader\" loading />\n  ) : (\n    <>\n      <LineGraph\n        datasets={[\n          {\n            backgroundColor: 'blue',\n            borderColor: 'black',\n            data: [\n              {\n                x: 'January',\n                y: monthlyIncidents[0],\n              },\n              {\n                x: 'February',\n                y: monthlyIncidents[1],\n              },\n              {\n                x: 'March',\n                y: monthlyIncidents[2],\n              },\n              {\n                x: 'April',\n                y: monthlyIncidents[3],\n              },\n              {\n                x: 'May',\n                y: monthlyIncidents[4],\n              },\n              {\n                x: 'June',\n                y: monthlyIncidents[5],\n              },\n              {\n                x: 'July',\n                y: monthlyIncidents[6],\n              },\n              {\n                x: 'August',\n                y: monthlyIncidents[7],\n              },\n              {\n                x: 'September',\n                y: monthlyIncidents[8],\n              },\n              {\n                x: 'October',\n                y: monthlyIncidents[9],\n              },\n              {\n                x: 'November',\n                y: monthlyIncidents[10],\n              },\n              {\n                x: 'December',\n                y: monthlyIncidents[11],\n              },\n            ],\n            label: 'Incidents',\n          },\n        ]}\n        title=\"Reported Incidents Overtime\"\n        xAxes={[\n          {\n            label: 'Months',\n            type: 'category',\n          },\n        ]}\n        yAxes={[\n          {\n            label: 'Numbers',\n            type: 'linear',\n          },\n        ]}\n      />\n    </>\n  )\n}\n\nexport default VisualizeIncidents\n","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { Switch } from 'react-router-dom'\n\nimport useAddBreadcrumbs from '../page-header/breadcrumbs/useAddBreadcrumbs'\nimport PrivateRoute from '../shared/components/PrivateRoute'\nimport Permissions from '../shared/model/Permissions'\nimport { RootState } from '../shared/store'\nimport ViewIncidents from './list/ViewIncidents'\nimport ReportIncident from './report/ReportIncident'\nimport ViewIncident from './view/ViewIncident'\nimport VisualizeIncidents from './visualize/VisualizeIncidents'\n\nconst Incidents = () => {\n  const { permissions } = useSelector((state: RootState) => state.user)\n  const breadcrumbs = [\n    {\n      i18nKey: 'incidents.label',\n      location: `/incidents`,\n    },\n  ]\n  useAddBreadcrumbs(breadcrumbs, true)\n\n  return (\n    <Switch>\n      <PrivateRoute\n        isAuthenticated={permissions.includes(Permissions.ViewIncidents)}\n        exact\n        path=\"/incidents\"\n        component={ViewIncidents}\n      />\n      <PrivateRoute\n        isAuthenticated={permissions.includes(Permissions.ReportIncident)}\n        exact\n        path=\"/incidents/new\"\n        component={ReportIncident}\n      />\n      <PrivateRoute\n        isAuthenticated={permissions.includes(Permissions.ViewIncidentWidgets)}\n        exact\n        path=\"/incidents/visualize\"\n        component={VisualizeIncidents}\n      />\n      <PrivateRoute\n        isAuthenticated={permissions.includes(Permissions.ViewIncident)}\n        exact\n        path=\"/incidents/:id\"\n        component={ViewIncident}\n      />\n    </Switch>\n  )\n}\n\nexport default Incidents\n","import { v4 as uuidv4 } from 'uuid'\n\nexport const uuid = () => uuidv4()\n","import { relationalDb } from '../config/pouchdb'\nimport Lab from '../model/Lab'\nimport generateCode from '../util/generateCode'\nimport Repository from './Repository'\nimport SortRequest from './SortRequest'\n\ninterface SearchContainer {\n  text: string\n  status: 'requested' | 'completed' | 'canceled' | 'all'\n  defaultSortRequest: SortRequest\n}\nclass LabRepository extends Repository<Lab> {\n  constructor() {\n    super('lab', relationalDb)\n  }\n\n  async search(container: SearchContainer): Promise<Lab[]> {\n    const searchValue = { $regex: RegExp(container.text, 'i') }\n    const selector = {\n      $and: [\n        {\n          $or: [\n            {\n              'data.type': searchValue,\n            },\n            {\n              'data.code': searchValue,\n            },\n          ],\n        },\n        ...(container.status !== 'all' ? [{ 'data.status': container.status }] : [undefined]),\n      ].filter((x) => x !== undefined),\n      sorts: container.defaultSortRequest,\n    }\n\n    return super.search({\n      selector,\n    })\n  }\n\n  async save(entity: Lab): Promise<Lab> {\n    const labCode = generateCode('L')\n    entity.code = labCode\n    return super.save(entity)\n  }\n\n  async findAllByPatientId(patientId: string): Promise<Lab[]> {\n    return super.search({\n      selector: {\n        $and: [\n          {\n            patientId,\n          },\n        ],\n      },\n    })\n  }\n}\n\nexport default new LabRepository()\n","import isEmpty from 'lodash/isEmpty'\n\nimport Lab from '../../shared/model/Lab'\n\nexport class LabError extends Error {\n  message: string\n\n  result?: string\n\n  patient?: string\n\n  type?: string\n\n  constructor(message: string, result: string, patient: string, type: string) {\n    super(message)\n    this.message = message\n    this.result = result\n    this.patient = patient\n    this.type = type\n  }\n}\n\nexport function validateLabRequest(lab: Partial<Lab>): LabError {\n  const labError = {} as LabError\n\n  if (!lab.patient) {\n    labError.patient = 'labs.requests.error.patientRequired'\n  }\n\n  if (!lab.type) {\n    labError.type = 'labs.requests.error.typeRequired'\n  }\n\n  if (!isEmpty(labError)) {\n    labError.message = 'labs.requests.error.unableToRequest'\n  }\n  return labError\n}\n\nexport function validateLabComplete(lab: Partial<Lab>): LabError {\n  const labError = {} as LabError\n\n  if (!lab.result) {\n    labError.result = 'labs.requests.error.resultRequiredToComplete'\n    labError.message = 'labs.requests.error.unableToComplete'\n  }\n\n  return labError\n}\n","import isEmpty from 'lodash/isEmpty'\nimport { useMutation, queryCache } from 'react-query'\n\nimport LabRepository from '../../shared/db/LabRepository'\nimport Lab from '../../shared/model/Lab'\nimport { validateLabRequest } from '../utils/validate-lab'\n\nfunction requestLab(newLab: Lab): Promise<Lab> {\n  const requestLabErrors = validateLabRequest(newLab)\n\n  if (isEmpty(requestLabErrors)) {\n    newLab.requestedOn = new Date(Date.now().valueOf()).toISOString()\n    return LabRepository.save(newLab)\n  }\n\n  throw requestLabErrors\n}\n\nexport default function useRequestLab() {\n  return useMutation(requestLab, {\n    onSuccess: async () => {\n      await queryCache.invalidateQueries('labs')\n    },\n    throwOnError: true,\n  })\n}\n","import {\n  Select,\n  Typeahead,\n  Label,\n  Button,\n  Alert,\n  Toast,\n  Column,\n  Row,\n} from '@hospitalrun/components'\nimport format from 'date-fns/format'\nimport React, { useState, useEffect } from 'react'\nimport { useSelector } from 'react-redux'\nimport { useHistory } from 'react-router-dom'\n\nimport useAddBreadcrumbs from '../../page-header/breadcrumbs/useAddBreadcrumbs'\nimport { useUpdateTitle } from '../../page-header/title/TitleContext'\nimport { SelectOption } from '../../shared/components/input/SelectOption'\nimport TextFieldWithLabelFormGroup from '../../shared/components/input/TextFieldWithLabelFormGroup'\nimport TextInputWithLabelFormGroup from '../../shared/components/input/TextInputWithLabelFormGroup'\nimport PatientRepository from '../../shared/db/PatientRepository'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport Lab from '../../shared/model/Lab'\nimport Note from '../../shared/model/Note'\nimport Patient from '../../shared/model/Patient'\nimport { RootState } from '../../shared/store'\nimport { uuid } from '../../shared/util/uuid'\nimport useRequestLab from '../hooks/useRequestLab'\nimport { LabError } from '../utils/validate-lab'\n\nconst NewLabRequest = () => {\n  const { t } = useTranslator()\n  const history = useHistory()\n  const { user } = useSelector((state: RootState) => state.user)\n  const [mutate] = useRequestLab()\n  const [newNoteText, setNewNoteText] = useState('')\n  const [error, setError] = useState<LabError | undefined>(undefined)\n  const [visitOptions, setVisitOptions] = useState([] as SelectOption[])\n\n  const updateTitle = useUpdateTitle()\n  useEffect(() => {\n    updateTitle(t('labs.requests.new'))\n  })\n  const [newLabRequest, setNewLabRequest] = useState({\n    patient: '',\n    type: '',\n    status: 'requested',\n    requestedBy: user?.id || '',\n    requestedOn: '',\n    visitId: '',\n  })\n\n  const breadcrumbs = [\n    {\n      i18nKey: 'labs.requests.new',\n      location: `/labs/new`,\n    },\n  ]\n  useAddBreadcrumbs(breadcrumbs)\n\n  const onPatientChange = (patient: Patient) => {\n    if (patient) {\n      const visits = patient.visits?.map((v) => ({\n        label: `${v.type} at ${format(new Date(v.startDateTime), 'yyyy-MM-dd hh:mm a')}`,\n        value: v.id,\n      })) as SelectOption[]\n\n      setVisitOptions(visits)\n      setNewLabRequest((previousNewLabRequest) => ({\n        ...previousNewLabRequest,\n        patient: patient.id,\n        fullName: patient.fullName,\n      }))\n    } else {\n      setVisitOptions([])\n      setNewLabRequest((previousNewLabRequest) => ({\n        ...previousNewLabRequest,\n        patient: '',\n        visitId: '',\n      }))\n    }\n  }\n\n  const onLabTypeChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const type = event.currentTarget.value\n    setNewLabRequest((previousNewLabRequest) => ({\n      ...previousNewLabRequest,\n      type,\n    }))\n  }\n\n  const onNoteChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const noteText = event.currentTarget.value\n    setNewNoteText(noteText)\n\n    const newNote: Note = {\n      id: uuid(),\n      date: new Date().toISOString(),\n      text: noteText,\n      deleted: false,\n    }\n\n    setNewLabRequest((previousNewLabRequest) => ({\n      ...previousNewLabRequest,\n      notes: [newNote],\n    }))\n  }\n\n  const onSave = async () => {\n    try {\n      const newLab = await mutate(newLabRequest as Lab)\n      history.push(`/labs/${newLab?.id}`)\n      Toast(\n        'success',\n        t('states.success'),\n        `${t('labs.successfullyCreated')} ${newLab?.type} ${t('labs.lab.for')} ${\n          (await PatientRepository.find(newLab?.patient || '')).fullName\n        }`,\n      )\n      setError(undefined)\n    } catch (e) {\n      setError(e)\n    }\n  }\n\n  const onVisitChange = (visitId: string) => {\n    setNewLabRequest((previousNewLabRequest) => ({\n      ...previousNewLabRequest,\n      visitId,\n    }))\n  }\n\n  const onCancel = () => {\n    history.push('/labs')\n  }\n\n  const defaultSelectedVisitsOption = () => {\n    if (visitOptions !== undefined) {\n      return visitOptions.filter(({ value }) => value === newLabRequest.visitId)\n    }\n    return []\n  }\n\n  return (\n    <>\n      {error && <Alert color=\"danger\" title={t('states.error')} message={t(error.message || '')} />}\n      <form>\n        <Row>\n          <Column>\n            <div className=\"form-group patient-typeahead\">\n              <Label htmlFor=\"patientTypeahead\" isRequired text={t('labs.lab.patient')} />\n              <Typeahead\n                id=\"patientTypeahead\"\n                placeholder={t('labs.lab.patient')}\n                onChange={(p: Patient[]) => onPatientChange(p[0])}\n                onSearch={async (query: string) => PatientRepository.search(query)}\n                searchAccessor=\"fullName\"\n                renderMenuItemChildren={(p: Patient) => <div>{`${p.fullName} (${p.code})`}</div>}\n                isInvalid={!!error?.patient}\n                feedback={t(error?.patient as string)}\n              />\n            </div>\n          </Column>\n          <Column>\n            <div className=\"form-group\" data-testid=\"visitSelect\">\n              <Label text={t('patient.visit')} title=\"This is a required input\" isRequired />\n              <Select\n                id=\"visit\"\n                options={visitOptions || []}\n                defaultSelected={defaultSelectedVisitsOption()}\n                onChange={(values) => {\n                  onVisitChange(values[0])\n                }}\n                disabled={false}\n              />\n            </div>\n          </Column>\n        </Row>\n        <TextInputWithLabelFormGroup\n          name=\"labType\"\n          label={t('labs.lab.type')}\n          isRequired\n          isEditable\n          isInvalid={!!error?.type}\n          feedback={t(error?.type as string)}\n          value={newLabRequest.type}\n          onChange={onLabTypeChange}\n        />\n        <div className=\"form-group\">\n          <TextFieldWithLabelFormGroup\n            name=\"labNotes\"\n            label={t('labs.lab.notes')}\n            isEditable\n            value={newNoteText}\n            onChange={onNoteChange}\n          />\n        </div>\n        <div className=\"row float-right\">\n          <div className=\"btn-group btn-group-lg mt-3 mr-3\">\n            <Button className=\"mr-2\" color=\"success\" onClick={onSave}>\n              {t('labs.requests.new')}\n            </Button>\n\n            <Button color=\"danger\" onClick={onCancel}>\n              {t('actions.cancel')}\n            </Button>\n          </div>\n        </div>\n      </form>\n    </>\n  )\n}\n\nexport default NewLabRequest\n","import { useMutation, queryCache } from 'react-query'\n\nimport LabRepository from '../../shared/db/LabRepository'\nimport Lab from '../../shared/model/Lab'\n\nfunction cancelLab(lab: Lab): Promise<Lab> {\n  lab.canceledOn = new Date(Date.now().valueOf()).toISOString()\n  lab.status = 'canceled'\n  return LabRepository.saveOrUpdate(lab)\n}\n\nexport default function useCancelLab() {\n  return useMutation(cancelLab, {\n    onSuccess: async () => {\n      queryCache.invalidateQueries('labs')\n    },\n  })\n}\n","import isEmpty from 'lodash/isEmpty'\nimport { useMutation, queryCache } from 'react-query'\n\nimport LabRepository from '../../shared/db/LabRepository'\nimport Lab from '../../shared/model/Lab'\nimport { validateLabComplete } from '../utils/validate-lab'\n\nfunction completeLab(lab: Lab): Promise<Lab> {\n  const completeLabErrors = validateLabComplete(lab)\n\n  if (isEmpty(completeLabErrors)) {\n    const completedLab: Lab = {\n      ...lab,\n      completedOn: new Date(Date.now().valueOf()).toISOString(),\n      status: 'completed',\n    }\n\n    return LabRepository.saveOrUpdate(completedLab)\n  }\n\n  throw completeLabErrors\n}\n\nexport default function useCompleteLab() {\n  return useMutation(completeLab, {\n    onSuccess: async (data) => {\n      queryCache.setQueryData(['lab', data.id], data)\n      await queryCache.invalidateQueries('labs')\n    },\n    throwOnError: true,\n  })\n}\n","import { useQuery } from 'react-query'\n\nimport LabRepository from '../../shared/db/LabRepository'\nimport Lab from '../../shared/model/Lab'\n\nfunction fetchLab(_: any, labId: string): Promise<Lab> {\n  return LabRepository.find(labId)\n}\n\nexport default function useLab(labId: string) {\n  return useQuery(['lab', labId], fetchLab)\n}\n","import { useMutation, queryCache } from 'react-query'\n\nimport LabRepository from '../../shared/db/LabRepository'\nimport Lab from '../../shared/model/Lab'\n\nfunction updateLab(labToUpdate: Lab): Promise<Lab> {\n  return LabRepository.saveOrUpdate(labToUpdate)\n}\n\nexport default function useUpdateLab() {\n  return useMutation(updateLab, {\n    onSuccess: async (data) => {\n      queryCache.setQueryData(['lab', data.id], data)\n      await queryCache.invalidateQueries('labs')\n    },\n  })\n}\n","import { Row, Column, Badge, Button, Alert, Toast, Callout, Label } from '@hospitalrun/components'\nimport format from 'date-fns/format'\nimport React, { useEffect, useState } from 'react'\nimport { useSelector } from 'react-redux'\nimport { useParams, useHistory } from 'react-router-dom'\n\nimport useAddBreadcrumbs from '../page-header/breadcrumbs/useAddBreadcrumbs'\nimport { useUpdateTitle } from '../page-header/title/TitleContext'\nimport usePatient from '../patients/hooks/usePatient'\nimport TextFieldWithLabelFormGroup from '../shared/components/input/TextFieldWithLabelFormGroup'\nimport useTranslator from '../shared/hooks/useTranslator'\nimport Lab from '../shared/model/Lab'\nimport Patient from '../shared/model/Patient'\nimport Permissions from '../shared/model/Permissions'\nimport { RootState } from '../shared/store'\nimport { uuid } from '../shared/util/uuid'\nimport useCancelLab from './hooks/useCancelLab'\nimport useCompleteLab from './hooks/useCompleteLab'\nimport useLab from './hooks/useLab'\nimport useUpdateLab from './hooks/useUpdateLab'\nimport { LabError } from './utils/validate-lab'\n\nconst getTitle = (patient: Patient | undefined, lab: Lab | undefined) =>\n  patient && lab ? `${lab.type} for ${patient.fullName}(${lab.code})` : ''\n\nconst ViewLab = () => {\n  const { id } = useParams()\n  const { t } = useTranslator()\n  const history = useHistory()\n  const { permissions } = useSelector((state: RootState) => state.user)\n\n  const [labToView, setLabToView] = useState<Lab>()\n  const [newNoteText, setNewNoteText] = useState<string>()\n  const [isEditable, setIsEditable] = useState<boolean>(true)\n\n  const { data: lab } = useLab(id)\n  const { data: patient } = usePatient(lab?.patient)\n  const [updateLab] = useUpdateLab()\n  const [completeLab] = useCompleteLab()\n  const [cancelLab] = useCancelLab()\n  const [error, setError] = useState<LabError | undefined>(undefined)\n\n  const updateTitle = useUpdateTitle()\n  useEffect(() => {\n    updateTitle(getTitle(patient, labToView))\n  })\n\n  const breadcrumbs = [\n    {\n      i18nKey: 'labs.requests.view',\n      location: `/labs/${labToView?.id}`,\n    },\n  ]\n  useAddBreadcrumbs(breadcrumbs)\n\n  useEffect(() => {\n    if (lab) {\n      setLabToView({ ...lab })\n      setIsEditable(lab.status === 'requested')\n    }\n  }, [lab])\n\n  const onResultChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const result = event.currentTarget.value\n    const newLab = labToView as Lab\n    setLabToView({ ...newLab, result })\n  }\n\n  const onNotesChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const notes = event.currentTarget.value\n    setNewNoteText(notes)\n  }\n\n  const deleteNote = async (noteIdToDelete: string) => {\n    if (!labToView || !labToView.notes) {\n      return\n    }\n\n    const updatedNotes = labToView!.notes!.map((note) => {\n      if (note.id === noteIdToDelete) {\n        note.deleted = true\n      }\n\n      return note\n    })\n\n    const newLab = {\n      ...labToView,\n      notes: updatedNotes,\n    }\n\n    await updateLab(newLab as Lab)\n    Toast('success', t('states.success'), t('labs.successfullyDeletedNote'))\n  }\n\n  const onUpdate = async () => {\n    if (labToView) {\n      const newLab = labToView as Lab\n\n      if (newNoteText) {\n        const newNote = {\n          id: uuid(),\n          date: new Date().toISOString(),\n          text: newNoteText,\n          deleted: false,\n        }\n\n        newLab.notes = newLab.notes ? [...newLab.notes, newNote] : [newNote]\n        setNewNoteText('')\n      }\n\n      const updatedLab = await updateLab(newLab)\n      history.push(`/labs/${updatedLab?.id}`)\n      Toast(\n        'success',\n        t('states.success'),\n        `${t('labs.successfullyUpdated')} ${updatedLab?.type} for ${patient?.fullName}`,\n      )\n    }\n    setError(undefined)\n  }\n\n  const onComplete = async () => {\n    try {\n      if (labToView) {\n        const completedLab = await completeLab(labToView)\n        history.push(`/labs/${completedLab?.id}`)\n        Toast(\n          'success',\n          t('states.success'),\n          `${t('labs.successfullyCompleted')} ${completedLab?.type} for ${patient?.fullName} `,\n        )\n      }\n      setError(undefined)\n    } catch (e) {\n      setError(e)\n    }\n  }\n\n  const onCancel = async () => {\n    if (labToView) {\n      cancelLab(labToView)\n      history.push('/labs')\n    }\n  }\n\n  const getButtons = () => {\n    const buttons: React.ReactNode[] = []\n    if (labToView?.status === 'completed' || labToView?.status === 'canceled') {\n      return buttons\n    }\n\n    buttons.push(\n      <Button className=\"mr-2\" color=\"success\" onClick={onUpdate} key=\"actions.update\">\n        {t('labs.requests.update')}\n      </Button>,\n    )\n\n    if (permissions.includes(Permissions.CompleteLab)) {\n      buttons.push(\n        <Button className=\"mr-2\" onClick={onComplete} color=\"primary\" key=\"labs.requests.complete\">\n          {t('labs.requests.complete')}\n        </Button>,\n      )\n    }\n\n    if (permissions.includes(Permissions.CancelLab)) {\n      buttons.push(\n        <Button onClick={onCancel} color=\"danger\" key=\"labs.requests.cancel\">\n          {t('labs.requests.cancel')}\n        </Button>,\n      )\n    }\n\n    return buttons\n  }\n\n  if (labToView && patient) {\n    const getBadgeColor = () => {\n      if (labToView.status === 'completed') {\n        return 'primary'\n      }\n      if (labToView.status === 'canceled') {\n        return 'danger'\n      }\n      return 'warning'\n    }\n\n    const getCanceledOnOrCompletedOnDate = () => {\n      if (labToView.status === 'completed' && labToView.completedOn) {\n        return (\n          <Column>\n            <div className=\"form-group completed-on\">\n              <h4>{t('labs.lab.completedOn')}</h4>\n              <h5>{format(new Date(labToView.completedOn), 'yyyy-MM-dd hh:mm a')}</h5>\n            </div>\n          </Column>\n        )\n      }\n      if (labToView.status === 'canceled' && labToView.canceledOn) {\n        return (\n          <Column>\n            <div className=\"form-group canceled-on\">\n              <h4>{t('labs.lab.canceledOn')}</h4>\n              <h5>{format(new Date(labToView.canceledOn), 'yyyy-MM-dd hh:mm a')}</h5>\n            </div>\n          </Column>\n        )\n      }\n      return <></>\n    }\n\n    const getPastNotes = () => {\n      if (labToView?.notes?.length && labToView.notes.length > 0) {\n        return labToView.notes\n          .filter((note) => !note.deleted)\n          .map((note) => (\n            <Callout key={note.id} color=\"info\">\n              <div className=\"d-flex justify-content-between\">\n                <p data-testid=\"note\">{note.text}</p>\n                {labToView.status === 'requested' && (\n                  <Button icon=\"remove\" onClick={async () => deleteNote(note.id)} color=\"danger\">\n                    <span data-testid={`delete-note-${note.id}`}>Delete</span>\n                  </Button>\n                )}\n              </div>\n            </Callout>\n          ))\n      }\n\n      return <></>\n    }\n\n    return (\n      <>\n        {error && (\n          <Alert color=\"danger\" title={t('states.error')} message={t(error.message || '')} />\n        )}\n        <Row>\n          <Column>\n            <div className=\"form-group lab-status\">\n              <h4>{t('labs.lab.status')}</h4>\n              <Badge color={getBadgeColor()}>\n                <h5>{labToView.status}</h5>\n              </Badge>\n            </div>\n          </Column>\n          <Column>\n            <div className=\"form-group for-patient\">\n              <h4>{t('labs.lab.for')}</h4>\n              <h5>{patient.fullName}</h5>\n            </div>\n          </Column>\n          <Column>\n            <div className=\"form-group lab-type\">\n              <h4>{t('labs.lab.type')}</h4>\n              <h5>{labToView.type}</h5>\n            </div>\n          </Column>\n          <Column>\n            <div className=\"form-group requested-on\">\n              <h4>{t('labs.lab.requestedOn')}</h4>\n              <h5>{format(new Date(labToView.requestedOn), 'yyyy-MM-dd hh:mm a')}</h5>\n            </div>\n          </Column>\n          {getCanceledOnOrCompletedOnDate()}\n        </Row>\n        <div className=\"border-bottom\" />\n        <form>\n          <TextFieldWithLabelFormGroup\n            name=\"result\"\n            label={t('labs.lab.result')}\n            value={labToView.result}\n            isEditable={isEditable}\n            isInvalid={!!error?.result}\n            feedback={t(error?.result as string)}\n            onChange={onResultChange}\n          />\n          <Label text={t('labs.lab.notes')} htmlFor=\"notesTextField\" />\n          {getPastNotes()}\n          {isEditable && (\n            <TextFieldWithLabelFormGroup\n              name=\"notes\"\n              value={newNoteText}\n              isEditable={isEditable}\n              onChange={onNotesChange}\n            />\n          )}\n          {isEditable && (\n            <div className=\"row float-right\">\n              <div className=\"btn-group btn-group-lg mt-3 mr-3\">{getButtons()}</div>\n            </div>\n          )}\n        </form>\n      </>\n    )\n  }\n  return <h1>Loading...</h1>\n}\n\nexport default ViewLab\n","import { useState, useEffect } from 'react'\n\nexport default function <T>(value: T, delayInMilliseconds: number): T {\n  const [debouncedValue, setDebouncedValue] = useState(value)\n\n  useEffect(() => {\n    const debounceHandler = setTimeout(() => setDebouncedValue(value), delayInMilliseconds)\n\n    return () => clearTimeout(debounceHandler)\n  }, [value, delayInMilliseconds])\n\n  return debouncedValue\n}\n","import { useQuery } from 'react-query'\n\nimport LabRepository from '../../shared/db/LabRepository'\nimport SortRequest from '../../shared/db/SortRequest'\nimport Lab from '../../shared/model/Lab'\nimport LabSearchRequest from '../model/LabSearchRequest'\n\nconst defaultSortRequest: SortRequest = {\n  sorts: [\n    {\n      field: 'requestedOn',\n      direction: 'desc',\n    },\n  ],\n}\n\nfunction fetchLabs(_: any, request: LabSearchRequest): Promise<Lab[]> {\n  if (request.text?.trim() === '' && request.status === 'all') {\n    return LabRepository.findAll(defaultSortRequest)\n  }\n\n  return LabRepository.search({\n    ...request,\n    defaultSortRequest,\n  } as any)\n}\n\nexport default function useLabsSearch(request: LabSearchRequest) {\n  return useQuery(['labs', request], fetchLabs)\n}\n","import { Select, Label, Button, Table, Container, Row, Column } from '@hospitalrun/components'\nimport format from 'date-fns/format'\nimport React, { useState, useEffect, useCallback } from 'react'\nimport { useSelector } from 'react-redux'\nimport { useHistory } from 'react-router-dom'\n\nimport { useButtonToolbarSetter } from '../page-header/button-toolbar/ButtonBarProvider'\nimport { useUpdateTitle } from '../page-header/title/TitleContext'\nimport { SelectOption } from '../shared/components/input/SelectOption'\nimport TextInputWithLabelFormGroup from '../shared/components/input/TextInputWithLabelFormGroup'\nimport useDebounce from '../shared/hooks/useDebounce'\nimport useTranslator from '../shared/hooks/useTranslator'\nimport Lab from '../shared/model/Lab'\nimport Permissions from '../shared/model/Permissions'\nimport { RootState } from '../shared/store'\nimport useLabsSearch from './hooks/useLabsSearch'\nimport { LabFilter } from './model/LabSearchRequest'\n\nconst ViewLabs = () => {\n  const { t } = useTranslator()\n  const history = useHistory()\n  const setButtons = useButtonToolbarSetter()\n  const updateTitle = useUpdateTitle()\n  useEffect(() => {\n    updateTitle(t('labs.label'))\n  })\n  const { permissions } = useSelector((state: RootState) => state.user)\n  const [searchFilter, setSearchFilter] = useState<LabFilter>('all')\n  const [searchText, setSearchText] = useState<string>('')\n  const debouncedSearchText = useDebounce(searchText, 500)\n  const { data: labs } = useLabsSearch({\n    text: debouncedSearchText,\n    status: searchFilter,\n  })\n\n  const getButtons = useCallback(() => {\n    const buttons: React.ReactNode[] = []\n\n    if (permissions.includes(Permissions.RequestLab)) {\n      buttons.push(\n        <Button\n          icon=\"add\"\n          onClick={() => history.push('/labs/new')}\n          outlined\n          color=\"success\"\n          key=\"lab.requests.new\"\n        >\n          {t('labs.requests.new')}\n        </Button>,\n      )\n    }\n\n    return buttons\n  }, [permissions, history, t])\n\n  useEffect(() => {\n    setButtons(getButtons())\n    return () => {\n      setButtons([])\n    }\n  }, [getButtons, setButtons])\n\n  const onViewClick = (lab: Lab) => {\n    history.push(`/labs/${lab.id}`)\n  }\n\n  const onSearchBoxChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setSearchText(event.target.value)\n  }\n\n  const filterOptions: SelectOption[] = [\n    { label: t('labs.status.requested'), value: 'requested' },\n    { label: t('labs.status.completed'), value: 'completed' },\n    { label: t('labs.status.canceled'), value: 'canceled' },\n    { label: t('labs.filter.all'), value: 'all' },\n  ]\n\n  return (\n    <Container>\n      <Row>\n        <Column md={3} lg={2}>\n          <Label title=\"type\" text={t('labs.filterTitle')} />\n          <Select\n            id=\"type\"\n            options={filterOptions}\n            onChange={(values) => setSearchFilter(values[0] as LabFilter)}\n            defaultSelected={filterOptions.filter(({ value }) => value === searchFilter)}\n            disabled={false}\n          />\n        </Column>\n        <Column>\n          <TextInputWithLabelFormGroup\n            name=\"searchbox\"\n            label={t('labs.search')}\n            placeholder={t('labs.search')}\n            value={searchText}\n            isEditable\n            onChange={onSearchBoxChange}\n          />\n        </Column>\n      </Row>\n      <Row>\n        <Table\n          getID={(row) => row.id}\n          columns={[\n            { label: t('labs.lab.code'), key: 'code' },\n            { label: t('labs.lab.type'), key: 'type' },\n            {\n              label: t('labs.lab.requestedOn'),\n              key: 'requestedOn',\n              formatter: (row) =>\n                row.requestedOn ? format(new Date(row.requestedOn), 'yyyy-MM-dd hh:mm a') : '',\n            },\n            { label: t('labs.lab.status'), key: 'status' },\n          ]}\n          data={labs || []}\n          actionsHeaderText={t('actions.label')}\n          actions={[{ label: t('actions.view'), action: (row) => onViewClick(row as Lab) }]}\n        />\n      </Row>\n    </Container>\n  )\n}\n\nexport default ViewLabs\n","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { Switch } from 'react-router-dom'\n\nimport useAddBreadcrumbs from '../page-header/breadcrumbs/useAddBreadcrumbs'\nimport PrivateRoute from '../shared/components/PrivateRoute'\nimport Permissions from '../shared/model/Permissions'\nimport { RootState } from '../shared/store'\nimport NewLabRequest from './requests/NewLabRequest'\nimport ViewLab from './ViewLab'\nimport LabRequests from './ViewLabs'\n\nconst Labs = () => {\n  const { permissions } = useSelector((state: RootState) => state.user)\n  const breadcrumbs = [\n    {\n      i18nKey: 'labs.label',\n      location: `/labs`,\n    },\n  ]\n  useAddBreadcrumbs(breadcrumbs, true)\n\n  return (\n    <Switch>\n      <PrivateRoute\n        isAuthenticated={permissions.includes(Permissions.ViewLabs)}\n        exact\n        path=\"/labs\"\n        component={LabRequests}\n      />\n      <PrivateRoute\n        isAuthenticated={permissions.includes(Permissions.RequestLab)}\n        exact\n        path=\"/labs/new\"\n        component={NewLabRequest}\n      />\n      <PrivateRoute\n        isAuthenticated={permissions.includes(Permissions.ViewLab)}\n        exact\n        path=\"/labs/:id\"\n        component={ViewLab}\n      />\n    </Switch>\n  )\n}\n\nexport default Labs\n","import MedicationSearchRequest from '../../medications/models/MedicationSearchRequest'\nimport { relationalDb } from '../config/pouchdb'\nimport Medication from '../model/Medication'\nimport Repository from './Repository'\nimport SortRequest from './SortRequest'\n\ninterface SearchContainer extends MedicationSearchRequest {\n  defaultSortRequest: SortRequest\n}\nclass MedicationRepository extends Repository<Medication> {\n  constructor() {\n    super('medication', relationalDb)\n  }\n\n  async search(container: SearchContainer): Promise<Medication[]> {\n    const searchValue = { $regex: RegExp(container.text, 'i') }\n    const selector = {\n      $and: [\n        {\n          $or: [\n            {\n              'data.medication': searchValue,\n            },\n          ],\n        },\n        ...(container.status !== 'all' ? [{ 'data.status': container.status }] : [undefined]),\n      ].filter((x) => x !== undefined),\n      sorts: container.defaultSortRequest,\n    }\n\n    return super.search({\n      selector,\n    })\n  }\n\n  async save(entity: Medication): Promise<Medication> {\n    return super.save(entity)\n  }\n\n  async findAllByPatientId(patientId: string): Promise<Medication[]> {\n    return super.search({\n      selector: {\n        $and: [\n          {\n            patientId,\n          },\n        ],\n      },\n    })\n  }\n}\n\nexport default new MedicationRepository()\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit'\n\nimport MedicationRepository from '../shared/db/MedicationRepository'\nimport PatientRepository from '../shared/db/PatientRepository'\nimport Medication from '../shared/model/Medication'\nimport Patient from '../shared/model/Patient'\nimport { AppThunk } from '../shared/store'\n\ninterface Error {\n  medication?: string\n  patient?: string\n  quantity?: string\n  quantityValue?: string\n  quantityUnit?: string\n  message?: string\n}\n\ninterface MedicationState {\n  error: Error\n  medication?: Medication\n  patient?: Patient\n  status: 'loading' | 'error' | 'completed'\n}\n\nconst initialState: MedicationState = {\n  error: {},\n  medication: undefined,\n  patient: undefined,\n  status: 'loading',\n}\n\nfunction start(state: MedicationState) {\n  state.status = 'loading'\n}\n\nfunction finish(state: MedicationState, { payload }: PayloadAction<Medication>) {\n  state.status = 'completed'\n  state.medication = payload\n  state.error = {}\n}\n\nfunction error(state: MedicationState, { payload }: PayloadAction<Error>) {\n  state.status = 'error'\n  state.error = payload\n}\n\nconst medicationSlice = createSlice({\n  name: 'medication',\n  initialState,\n  reducers: {\n    fetchMedicationStart: start,\n    fetchMedicationSuccess: (\n      state: MedicationState,\n      { payload }: PayloadAction<{ medication: Medication; patient: Patient }>,\n    ) => {\n      state.status = 'completed'\n      state.medication = payload.medication\n      state.patient = payload.patient\n    },\n    updateMedicationStart: start,\n    updateMedicationSuccess: finish,\n    requestMedicationStart: start,\n    requestMedicationSuccess: finish,\n    requestMedicationError: error,\n    cancelMedicationStart: start,\n    cancelMedicationSuccess: finish,\n  },\n})\n\nexport const {\n  fetchMedicationStart,\n  fetchMedicationSuccess,\n  updateMedicationStart,\n  updateMedicationSuccess,\n  requestMedicationStart,\n  requestMedicationSuccess,\n  requestMedicationError,\n  cancelMedicationStart,\n  cancelMedicationSuccess,\n} = medicationSlice.actions\n\nexport const fetchMedication = (medicationId: string): AppThunk => async (dispatch) => {\n  dispatch(fetchMedicationStart())\n  const fetchedMedication = await MedicationRepository.find(medicationId)\n  const fetchedPatient = await PatientRepository.find(fetchedMedication.patient)\n  dispatch(fetchMedicationSuccess({ medication: fetchedMedication, patient: fetchedPatient }))\n}\n\nconst validateMedicationRequest = (newMedication: Medication): Error => {\n  const medicationRequestError: Error = {}\n  if (!newMedication.patient) {\n    medicationRequestError.patient = 'medications.requests.error.patientRequired'\n  }\n\n  if (!newMedication.quantity) {\n    medicationRequestError.quantity = 'medications.requests.error.quantityRequired'\n  }\n\n  return medicationRequestError\n}\n\nexport const requestMedication = (\n  newMedication: Medication,\n  onSuccess?: (medication: Medication) => void,\n): AppThunk => async (dispatch, getState) => {\n  dispatch(requestMedicationStart())\n\n  const medicationRequestError = validateMedicationRequest(newMedication)\n  if (Object.keys(medicationRequestError).length > 0) {\n    medicationRequestError.message = 'medications.requests.error.unableToRequest'\n    dispatch(requestMedicationError(medicationRequestError))\n  } else {\n    newMedication.status = 'draft'\n    newMedication.requestedOn = new Date(Date.now().valueOf()).toISOString()\n    newMedication.requestedBy = getState().user?.user?.id || ''\n    const requestedMedication = await MedicationRepository.save(newMedication)\n    dispatch(requestMedicationSuccess(requestedMedication))\n\n    if (onSuccess) {\n      onSuccess(requestedMedication)\n    }\n  }\n}\n\nexport const cancelMedication = (\n  medicationToCancel: Medication,\n  onSuccess?: (medication: Medication) => void,\n): AppThunk => async (dispatch) => {\n  dispatch(cancelMedicationStart())\n\n  medicationToCancel.canceledOn = new Date(Date.now().valueOf()).toISOString()\n  medicationToCancel.status = 'canceled'\n  const canceledMedication = await MedicationRepository.saveOrUpdate(medicationToCancel)\n  dispatch(cancelMedicationSuccess(canceledMedication))\n\n  if (onSuccess) {\n    onSuccess(canceledMedication)\n  }\n}\n\nexport const updateMedication = (\n  medicationToUpdate: Medication,\n  onSuccess?: (medication: Medication) => void,\n): AppThunk => async (dispatch) => {\n  dispatch(updateMedicationStart())\n  const updatedMedication = await MedicationRepository.saveOrUpdate(medicationToUpdate)\n  dispatch(updateMedicationSuccess(updatedMedication))\n\n  if (onSuccess) {\n    onSuccess(updatedMedication)\n  }\n}\n\nexport default medicationSlice.reducer\n","import { Select, Typeahead, Label, Button, Alert, Column, Row } from '@hospitalrun/components'\nimport { set } from 'lodash'\nimport React, { useState, useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { useHistory } from 'react-router-dom'\n\nimport useAddBreadcrumbs from '../../page-header/breadcrumbs/useAddBreadcrumbs'\nimport { useUpdateTitle } from '../../page-header/title/TitleContext'\nimport { SelectOption } from '../../shared/components/input/SelectOption'\nimport TextFieldWithLabelFormGroup from '../../shared/components/input/TextFieldWithLabelFormGroup'\nimport TextInputWithLabelFormGroup from '../../shared/components/input/TextInputWithLabelFormGroup'\nimport PatientRepository from '../../shared/db/PatientRepository'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport Medication from '../../shared/model/Medication'\nimport Patient from '../../shared/model/Patient'\nimport { RootState } from '../../shared/store'\nimport { requestMedication } from '../medication-slice'\n\nconst NewMedicationRequest = () => {\n  const { t } = useTranslator()\n  const dispatch = useDispatch()\n  const history = useHistory()\n  const updateTitle = useUpdateTitle()\n  useEffect(() => {\n    updateTitle(t('medications.requests.new'))\n  })\n  const { status, error } = useSelector((state: RootState) => state.medication)\n\n  const [newMedicationRequest, setNewMedicationRequest] = useState(({\n    patient: '',\n    medication: '',\n    notes: '',\n    status: '',\n    intent: 'order',\n    priority: '',\n    quantity: { value: ('' as unknown) as number, unit: '' },\n  } as unknown) as Medication)\n\n  const statusOptionsNew: SelectOption[] = [\n    { label: t('medications.status.draft'), value: 'draft' },\n    { label: t('medications.status.active'), value: 'active' },\n  ]\n\n  const intentOptions: SelectOption[] = [\n    { label: t('medications.intent.proposal'), value: 'proposal' },\n    { label: t('medications.intent.plan'), value: 'plan' },\n    { label: t('medications.intent.order'), value: 'order' },\n    { label: t('medications.intent.originalOrder'), value: 'original order' },\n    { label: t('medications.intent.reflexOrder'), value: 'reflex order' },\n    { label: t('medications.intent.fillerOrder'), value: 'filler order' },\n    { label: t('medications.intent.instanceOrder'), value: 'instance order' },\n    { label: t('medications.intent.option'), value: 'option' },\n  ]\n\n  const priorityOptions: SelectOption[] = [\n    { label: t('medications.priority.routine'), value: 'routine' },\n    { label: t('medications.priority.urgent'), value: 'urgent' },\n    { label: t('medications.priority.asap'), value: 'asap' },\n    { label: t('medications.priority.stat'), value: 'stat' },\n  ]\n\n  const breadcrumbs = [\n    {\n      i18nKey: 'medications.requests.new',\n      location: `/medications/new`,\n    },\n  ]\n  useAddBreadcrumbs(breadcrumbs)\n\n  const onPatientChange = (patient: Patient) => {\n    setNewMedicationRequest((previousNewMedicationRequest) => ({\n      ...previousNewMedicationRequest,\n      patient: patient.id,\n      fullName: patient.fullName as string,\n    }))\n  }\n\n  const onMedicationChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const medication = event.currentTarget.value\n    setNewMedicationRequest((previousNewMedicationRequest) => ({\n      ...previousNewMedicationRequest,\n      medication,\n    }))\n  }\n\n  const onNoteChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const notes = event.currentTarget.value\n    setNewMedicationRequest((previousNewMedicationRequest) => ({\n      ...previousNewMedicationRequest,\n      notes,\n    }))\n  }\n\n  const onFieldChange = (key: string, value: string | boolean) => {\n    setNewMedicationRequest((previousNewMedicationRequest) => ({\n      ...previousNewMedicationRequest,\n      [key]: value,\n    }))\n  }\n\n  const onTextInputChange = (text: string, path: string | Array<string>) => {\n    setNewMedicationRequest((previousNewMedicationRequest) => {\n      const medicationRequest = {\n        ...previousNewMedicationRequest,\n      }\n\n      const propertyPath = typeof path === 'string' ? [path] : path\n      set(medicationRequest, propertyPath, text)\n\n      return medicationRequest\n    })\n  }\n\n  const onSave = async () => {\n    const newMedication = newMedicationRequest as Medication\n    const onSuccess = (createdMedication: Medication) => {\n      history.push(`/medications/${createdMedication.id}`)\n    }\n\n    dispatch(requestMedication(newMedication, onSuccess))\n  }\n\n  const onCancel = () => {\n    history.push('/medications')\n  }\n\n  return (\n    <>\n      {status === 'error' && (\n        <Alert color=\"danger\" title={t('states.error')} message={t(error.message || '')} />\n      )}\n      <form aria-label=\"Medication Request form\">\n        <div className=\"form-group patient-typeahead\">\n          <Label htmlFor=\"patientTypeahead\" isRequired text={t('medications.medication.patient')} />\n          <Typeahead\n            id=\"patientTypeahead\"\n            placeholder={t('medications.medication.patient')}\n            onChange={(p: Patient[]) => onPatientChange(p[0])}\n            onSearch={async (query: string) => PatientRepository.search(query)}\n            searchAccessor=\"fullName\"\n            renderMenuItemChildren={(p: Patient) => <div>{`${p.fullName} (${p.code})`}</div>}\n            isInvalid={!!error.patient}\n          />\n        </div>\n        <TextInputWithLabelFormGroup\n          name=\"medication\"\n          label={t('medications.medication.medication')}\n          isRequired\n          isEditable\n          isInvalid={!!error.medication}\n          feedback={t(error.medication as string)}\n          value={newMedicationRequest.medication}\n          onChange={onMedicationChange}\n        />\n        <div className=\"form-group\" data-testid=\"statusSelect\">\n          <Label text={t('medications.medication.status')} title=\"status\" isRequired />\n          <Select\n            id=\"statusSelect\"\n            options={statusOptionsNew}\n            defaultSelected={statusOptionsNew.filter(\n              ({ value }) => value === newMedicationRequest.status,\n            )}\n            onChange={(values) => onFieldChange && onFieldChange('status', values[0])}\n            disabled={false}\n          />\n        </div>\n        <div className=\"form-group\" data-testid=\"intentSelect\">\n          <Label text={t('medications.medication.intent')} title=\"intent\" isRequired />\n          <Select\n            id=\"intentSelect\"\n            options={intentOptions}\n            defaultSelected={intentOptions.filter(\n              ({ value }) => value === newMedicationRequest.intent,\n            )}\n            onChange={(values) => onFieldChange && onFieldChange('intent', values[0])}\n            disabled={false}\n          />\n        </div>\n        <div className=\"form-group\" data-testid=\"prioritySelect\">\n          <Label text={t('medications.medication.priority')} title=\"priority\" isRequired />\n          <Select\n            id=\"prioritySelect\"\n            options={priorityOptions}\n            defaultSelected={priorityOptions.filter(\n              ({ value }) => value === newMedicationRequest.priority,\n            )}\n            onChange={(values) => onFieldChange && onFieldChange('priority', values[0])}\n            disabled={false}\n          />\n        </div>\n        <Row>\n          <Column md={6}>\n            <TextInputWithLabelFormGroup\n              name=\"quantityValue\"\n              label={`${t('medications.medication.quantity')} | ${t(\n                'medications.medication.quantityValue',\n              )}`}\n              isEditable\n              isRequired\n              value={(newMedicationRequest.quantity.value as unknown) as string}\n              onChange={(event) =>\n                onTextInputChange(event.currentTarget.value, ['quantity', 'value'])\n              }\n              isInvalid={!!error?.quantityValue}\n              feedback={t(error?.quantityValue as string)}\n            />\n          </Column>\n          <Column md={6}>\n            <TextInputWithLabelFormGroup\n              label={`${t('medications.medication.quantity')} | ${t(\n                'medications.medication.quantityUnit',\n              )}`}\n              name=\"quantityUnit\"\n              isRequired\n              isEditable\n              value={newMedicationRequest.quantity.unit}\n              onChange={(event) =>\n                onTextInputChange(event.currentTarget.value, ['quantity', 'unit'])\n              }\n              isInvalid={!!error?.quantityUnit}\n              feedback={t(error?.quantityUnit as string)}\n            />\n          </Column>\n        </Row>\n        <div className=\"form-group\">\n          <TextFieldWithLabelFormGroup\n            name=\"medicationNotes\"\n            label={t('medications.medication.notes')}\n            isEditable\n            value={newMedicationRequest.notes}\n            onChange={onNoteChange}\n          />\n        </div>\n        <div className=\"row float-right\">\n          <div className=\"btn-group btn-group-lg mt-3 mr-3\">\n            <Button className=\"mr-2\" color=\"success\" onClick={onSave}>\n              {t('medications.requests.new')}\n            </Button>\n            <Button color=\"danger\" onClick={onCancel}>\n              {t('actions.cancel')}\n            </Button>\n          </div>\n        </div>\n      </form>\n    </>\n  )\n}\n\nexport default NewMedicationRequest\n","import { Select, Label, Row, Column } from '@hospitalrun/components'\nimport React, { ChangeEvent } from 'react'\n\nimport { SelectOption } from '../../shared/components/input/SelectOption'\nimport TextInputWithLabelFormGroup from '../../shared/components/input/TextInputWithLabelFormGroup'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport MedicationSearchRequest from '../models/MedicationSearchRequest'\nimport { MedicationStatus } from '../models/MedicationStatus'\n\ninterface Props {\n  searchRequest: MedicationSearchRequest\n  onChange: (newSearchRequest: MedicationSearchRequest) => void\n}\n\nconst MedicationRequestSearch = (props: Props) => {\n  const { searchRequest, onChange } = props\n  const { t } = useTranslator()\n  const filterOptions: SelectOption[] = [\n    { label: t('medications.filter.all'), value: 'all' },\n    { label: t('medications.status.draft'), value: 'draft' },\n    { label: t('medications.status.active'), value: 'active' },\n    { label: t('medications.status.onHold'), value: 'on hold' },\n    { label: t('medications.status.completed'), value: 'completed' },\n    { label: t('medications.status.enteredInError'), value: 'entered in error' },\n    { label: t('medications.status.canceled'), value: 'canceled' },\n    { label: t('medications.status.unknown'), value: 'unknown' },\n  ]\n\n  const onSearchQueryChange = (event: ChangeEvent<HTMLInputElement>) => {\n    const query = event.target.value\n    onChange({\n      ...searchRequest,\n      text: query,\n    })\n  }\n\n  const onFilterChange = (filter: MedicationStatus) => {\n    onChange({\n      ...searchRequest,\n      status: filter,\n    })\n  }\n\n  return (\n    <Row>\n      <Column md={3} lg={2}>\n        <Label title=\"filterStatus\" text={t('medications.filterTitle')} />\n        <Select\n          id=\"filterStatus\"\n          options={filterOptions}\n          onChange={(values) => onFilterChange(values[0] as MedicationStatus)}\n          defaultSelected={filterOptions.filter(({ value }) => value === searchRequest.status)}\n          disabled={false}\n        />\n      </Column>\n      <Column>\n        <TextInputWithLabelFormGroup\n          name=\"searchbox\"\n          label={t('medications.search')}\n          placeholder={t('medications.search')}\n          value={searchRequest.text}\n          isEditable\n          onChange={onSearchQueryChange}\n        />\n      </Column>\n    </Row>\n  )\n}\n\nexport default MedicationRequestSearch\n","import { useQuery } from 'react-query'\n\nimport MedicationRepository from '../../shared/db/MedicationRepository'\nimport SortRequest from '../../shared/db/SortRequest'\nimport Medication from '../../shared/model/Medication'\nimport MedicationSearchRequest from '../models/MedicationSearchRequest'\n\nconst defaultSortRequest: SortRequest = {\n  sorts: [\n    {\n      field: 'requestedOn',\n      direction: 'desc',\n    },\n  ],\n}\n\nfunction searchMedicationRequests(\n  _: string,\n  searchRequest: MedicationSearchRequest,\n): Promise<Medication[]> {\n  return MedicationRepository.search({\n    ...searchRequest,\n    defaultSortRequest,\n  })\n}\n\nexport default function useMedicationSearch(searchRequest: MedicationSearchRequest) {\n  return useQuery(['medication-requests', searchRequest], searchMedicationRequests)\n}\n","import { Table } from '@hospitalrun/components'\nimport format from 'date-fns/format'\nimport React from 'react'\nimport { useHistory } from 'react-router'\n\nimport Loading from '../../shared/components/Loading'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport Medication from '../../shared/model/Medication'\nimport useMedicationRequestSearch from '../hooks/useMedicationSearch'\nimport MedicationSearchRequest from '../models/MedicationSearchRequest'\n\ninterface Props {\n  searchRequest: MedicationSearchRequest\n}\n\nconst MedicationRequestTable = (props: Props) => {\n  const { searchRequest } = props\n  const { t } = useTranslator()\n  const history = useHistory()\n  const { data, status } = useMedicationRequestSearch(searchRequest)\n\n  if (data === undefined || status === 'loading') {\n    return <Loading />\n  }\n\n  const onViewClick = (medication: Medication) => {\n    history.push(`/medications/${medication.id}`)\n  }\n\n  return (\n    <Table\n      getID={(row) => row.id}\n      columns={[\n        { label: t('medications.medication.medication'), key: 'medication' },\n        { label: t('medications.medication.priority'), key: 'priority' },\n        { label: t('medications.medication.intent'), key: 'intent' },\n        {\n          label: t('medications.medication.requestedOn'),\n          key: 'requestedOn',\n          formatter: (row) =>\n            row.requestedOn ? format(new Date(row.requestedOn), 'yyyy-MM-dd hh:mm a') : '',\n        },\n        { label: t('medications.medication.status'), key: 'status' },\n      ]}\n      data={data}\n      actionsHeaderText={t('actions.label')}\n      actions={[{ label: t('actions.view'), action: (row) => onViewClick(row as Medication) }]}\n    />\n  )\n}\n\nexport default MedicationRequestTable\n","enum ContactInfoTypes {\n  home = 'home',\n  mobile = 'mobile',\n  work = 'work',\n  temporary = 'temporary',\n  old = 'old',\n}\n\nexport default ContactInfoTypes\n","import { Button, Container, Row } from '@hospitalrun/components'\nimport React, { useEffect, useCallback, useState } from 'react'\nimport { useSelector } from 'react-redux'\nimport { useHistory } from 'react-router-dom'\n\nimport { useButtonToolbarSetter } from '../../page-header/button-toolbar/ButtonBarProvider'\nimport { useUpdateTitle } from '../../page-header/title/TitleContext'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport Permissions from '../../shared/model/Permissions'\nimport { RootState } from '../../shared/store'\nimport MedicationSearchRequest from '../models/MedicationSearchRequest'\nimport MedicationRequestSearch from './MedicationRequestSearch'\nimport MedicationRequestTable from './MedicationRequestTable'\n\nconst ViewMedications = () => {\n  const { t } = useTranslator()\n  const history = useHistory()\n  const setButtons = useButtonToolbarSetter()\n  const updateTitle = useUpdateTitle()\n  useEffect(() => {\n    updateTitle(t('medications.label'))\n  })\n  const { permissions } = useSelector((state: RootState) => state.user)\n\n  const getButtons = useCallback(() => {\n    const buttons: React.ReactNode[] = []\n\n    if (permissions.includes(Permissions.RequestMedication)) {\n      buttons.push(\n        <Button\n          icon=\"add\"\n          onClick={() => history.push('/medications/new')}\n          outlined\n          color=\"success\"\n          key=\"medication.requests.new\"\n        >\n          {t('medications.requests.new')}\n        </Button>,\n      )\n    }\n\n    return buttons\n  }, [permissions, history, t])\n\n  useEffect(() => {\n    setButtons(getButtons())\n    return () => {\n      setButtons([])\n    }\n  }, [getButtons, setButtons])\n\n  const [searchRequest, setSearchRequest] = useState<MedicationSearchRequest>({\n    text: '',\n    status: 'all',\n  })\n\n  const onSearchRequestChange = (newSearchRequest: MedicationSearchRequest) => {\n    setSearchRequest(newSearchRequest)\n  }\n\n  return (\n    <Container>\n      <MedicationRequestSearch searchRequest={searchRequest} onChange={onSearchRequestChange} />\n      <Row>\n        <MedicationRequestTable searchRequest={searchRequest} />\n      </Row>\n    </Container>\n  )\n}\n\nexport default ViewMedications\n","import { Select, Row, Column, Badge, Button, Alert, Label } from '@hospitalrun/components'\nimport format from 'date-fns/format'\nimport React, { useEffect, useState } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { useParams, useHistory } from 'react-router-dom'\n\nimport useAddBreadcrumbs from '../page-header/breadcrumbs/useAddBreadcrumbs'\nimport { useUpdateTitle } from '../page-header/title/TitleContext'\nimport { SelectOption } from '../shared/components/input/SelectOption'\nimport TextFieldWithLabelFormGroup from '../shared/components/input/TextFieldWithLabelFormGroup'\nimport TextInputWithLabelFormGroup from '../shared/components/input/TextInputWithLabelFormGroup'\nimport useTranslator from '../shared/hooks/useTranslator'\nimport Medication from '../shared/model/Medication'\nimport Patient from '../shared/model/Patient'\nimport Permissions from '../shared/model/Permissions'\nimport { RootState } from '../shared/store'\nimport { cancelMedication, updateMedication, fetchMedication } from './medication-slice'\n\nconst getTitle = (patient: Patient | undefined, medication: Medication | undefined) =>\n  patient && medication ? `${medication.medication} for ${patient.fullName}` : ''\n\nconst ViewMedication = () => {\n  const { id } = useParams()\n  const { t } = useTranslator()\n  const history = useHistory()\n  const dispatch = useDispatch()\n  const { permissions } = useSelector((state: RootState) => state.user)\n  const { medication, patient, status, error } = useSelector((state: RootState) => state.medication)\n\n  const [medicationToView, setMedicationToView] = useState<Medication>()\n  const [isEditable, setIsEditable] = useState<boolean>(true)\n\n  const updateTitle = useUpdateTitle()\n  useEffect(() => {\n    updateTitle(getTitle(patient, medicationToView))\n  })\n\n  const breadcrumbs = [\n    {\n      i18nKey: 'medications.requests.view',\n      location: `/medications/${medicationToView?.id}`,\n    },\n  ]\n  useAddBreadcrumbs(breadcrumbs)\n\n  useEffect(() => {\n    if (id) {\n      dispatch(fetchMedication(id))\n    }\n  }, [id, dispatch])\n\n  useEffect(() => {\n    if (medication) {\n      setMedicationToView({ ...medication })\n      setIsEditable(medication.status !== 'completed')\n    }\n  }, [medication])\n\n  const statusOptionsEdit: SelectOption[] = [\n    { label: t('medications.status.draft'), value: 'draft' },\n    { label: t('medications.status.active'), value: 'active' },\n    { label: t('medications.status.onHold'), value: 'on hold' },\n    { label: t('medications.status.completed'), value: 'completed' },\n    { label: t('medications.status.enteredInError'), value: 'entered in error' },\n    { label: t('medications.status.canceled'), value: 'canceled' },\n    { label: t('medications.status.unknown'), value: 'unknown' },\n  ]\n\n  const intentOptions: SelectOption[] = [\n    { label: t('medications.intent.proposal'), value: 'proposal' },\n    { label: t('medications.intent.plan'), value: 'plan' },\n    { label: t('medications.intent.order'), value: 'order' },\n    { label: t('medications.intent.originalOrder'), value: 'original order' },\n    { label: t('medications.intent.reflexOrder'), value: 'reflex order' },\n    { label: t('medications.intent.fillerOrder'), value: 'filler order' },\n    { label: t('medications.intent.instanceOrder'), value: 'instance order' },\n    { label: t('medications.intent.option'), value: 'option' },\n  ]\n\n  const priorityOptions: SelectOption[] = [\n    { label: t('medications.priority.routine'), value: 'routine' },\n    { label: t('medications.priority.urgent'), value: 'urgent' },\n    { label: t('medications.priority.asap'), value: 'asap' },\n    { label: t('medications.priority.stat'), value: 'stat' },\n  ]\n\n  const onQuantityChange = (text: string, name: string) => {\n    const newMedication = medicationToView as Medication\n    setMedicationToView({ ...newMedication, quantity: { ...newMedication.quantity, [name]: text } })\n  }\n\n  const onFieldChange = (key: string, value: string | boolean) => {\n    const newMedication = medicationToView as Medication\n    setMedicationToView({ ...newMedication, [key]: value })\n  }\n\n  const onNotesChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const notes = event.currentTarget.value\n    onFieldChange('notes', notes)\n  }\n\n  const onUpdate = async () => {\n    const onSuccess = () => {\n      history.push('/medications')\n    }\n    if (medicationToView) {\n      dispatch(updateMedication(medicationToView, onSuccess))\n    }\n  }\n\n  const onCancel = async () => {\n    const onSuccess = () => {\n      history.push('/medications')\n    }\n\n    if (medicationToView) {\n      dispatch(cancelMedication(medicationToView, onSuccess))\n    }\n  }\n\n  const getButtons = () => {\n    const buttons: React.ReactNode[] = []\n    if (medicationToView?.status === 'canceled') {\n      return buttons\n    }\n\n    buttons.push(\n      <Button className=\"mr-2\" color=\"success\" onClick={onUpdate} key=\"actions.update\">\n        {t('medications.requests.update')}\n      </Button>,\n    )\n\n    if (permissions.includes(Permissions.CancelMedication)) {\n      buttons.push(\n        <Button onClick={onCancel} color=\"danger\" key=\"medications.requests.cancel\">\n          {t('medications.requests.cancel')}\n        </Button>,\n      )\n    }\n\n    return buttons\n  }\n\n  if (medicationToView && patient) {\n    const getBadgeColor = () => {\n      if (medicationToView.status === 'canceled') {\n        return 'danger'\n      }\n      return 'warning'\n    }\n\n    const getCancelledOnDate = () => {\n      if (medicationToView.status === 'canceled' && medicationToView.canceledOn) {\n        return (\n          <Column>\n            <div className=\"form-group canceled-on\">\n              <h4>{t('medications.medication.canceledOn')}</h4>\n              <h5>{format(new Date(medicationToView.canceledOn), 'yyyy-MM-dd hh:mm a')}</h5>\n            </div>\n          </Column>\n        )\n      }\n      return <></>\n    }\n\n    return (\n      <>\n        {status === 'error' && (\n          <Alert color=\"danger\" title={t('states.error')} message={t(error.message || '')} />\n        )}\n        <Row>\n          <Column>\n            <div className=\"form-group medication-status\">\n              <h4>{t('medications.medication.status')}</h4>\n              <Badge color={getBadgeColor()}>\n                <h5>{medicationToView.status}</h5>\n              </Badge>\n            </div>\n          </Column>\n          <Column>\n            <div className=\"form-group medication-medication\">\n              <h4>{t('medications.medication.medication')}</h4>\n              <h5>{medicationToView.medication}</h5>\n            </div>\n          </Column>\n          <Column>\n            <div className=\"form-group medication-quantity\">\n              <h4>{t('medications.medication.quantity')}</h4>\n              <h5>{`${medicationToView.quantity.value} x ${medicationToView.quantity.unit}`}</h5>\n            </div>\n          </Column>\n          <Column>\n            <div className=\"form-group for-patient\">\n              <h4>{t('medications.medication.for')}</h4>\n              <h5>{patient.fullName}</h5>\n            </div>\n          </Column>\n          <Column>\n            <div className=\"form-group requested-on\">\n              <h4>{t('medications.medication.requestedOn')}</h4>\n              <h5>{format(new Date(medicationToView.requestedOn), 'yyyy-MM-dd hh:mm a')}</h5>\n            </div>\n          </Column>\n          {getCancelledOnDate()}\n        </Row>\n        <Row>\n          <Column>\n            <div className=\"form-group medication-intent\">\n              <h4>{t('medications.medication.intent')}</h4>\n              <Badge color={getBadgeColor()}>\n                <h5>{medicationToView.intent}</h5>\n              </Badge>\n            </div>\n          </Column>\n          <Column>\n            <div className=\"form-group medication-priority\">\n              <h4>{t('medications.medication.priority')}</h4>\n              <Badge color={getBadgeColor()}>\n                <h5>{medicationToView.priority}</h5>\n              </Badge>\n            </div>\n          </Column>\n        </Row>\n        <div className=\"border-bottom\" />\n        <Row>\n          <Column>\n            <Label title=\"status\" text={t('medications.medication.status')} isRequired />\n            <Select\n              id=\"status\"\n              options={statusOptionsEdit}\n              onChange={(values) => onFieldChange && onFieldChange('status', values[0])}\n              disabled={!isEditable}\n            />\n          </Column>\n          <Column>\n            <Label title=\"intent\" text={t('medications.medication.intent')} isRequired />\n            <Select\n              id=\"intent\"\n              options={intentOptions}\n              onChange={(values) => onFieldChange && onFieldChange('intent', values[0])}\n              disabled={!isEditable}\n            />\n          </Column>\n          <Column>\n            <Label title=\"priority\" text={t('medications.medication.priority')} isRequired />\n            <Select\n              id=\"priority\"\n              options={priorityOptions}\n              onChange={(values) => onFieldChange && onFieldChange('priority', values[0])}\n              disabled={!isEditable}\n            />\n          </Column>\n        </Row>\n        <Row>\n          <Column md={6}>\n            <TextInputWithLabelFormGroup\n              name=\"quantityValue\"\n              label={`${t('medications.medication.quantity')} | ${t(\n                'medications.medication.quantityValue',\n              )}`}\n              isEditable={isEditable}\n              isRequired\n              value={(medicationToView.quantity.value as unknown) as string}\n              onChange={(event) => onQuantityChange(event.currentTarget.value, 'value')}\n              isInvalid={!!error?.quantityValue}\n              feedback={t(error?.quantityValue as string)}\n            />\n          </Column>\n          <Column md={6}>\n            <TextInputWithLabelFormGroup\n              label={`${t('medications.medication.quantity')} | ${t(\n                'medications.medication.quantityUnit',\n              )}`}\n              name=\"quantityUnit\"\n              isRequired\n              isEditable={isEditable}\n              value={medicationToView.quantity.unit}\n              onChange={(event) => onQuantityChange(event.currentTarget.value, 'unit')}\n              isInvalid={!!error?.quantityUnit}\n              feedback={t(error?.quantityUnit as string)}\n            />\n          </Column>\n        </Row>\n        <form>\n          <Row>\n            <Column>\n              <TextFieldWithLabelFormGroup\n                data-testid=\"notes\"\n                name=\"notes\"\n                label={t('medications.medication.notes')}\n                value={medicationToView.notes}\n                isEditable={isEditable}\n                onChange={(event) => onNotesChange(event)}\n              />\n            </Column>\n          </Row>\n          {isEditable && (\n            <div className=\"row float-right\">\n              <div className=\"btn-group btn-group-lg mt-3 mr-3\">{getButtons()}</div>\n            </div>\n          )}\n        </form>\n      </>\n    )\n  }\n  return <h1>Loading...</h1>\n}\n\nexport default ViewMedication\n","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { Switch } from 'react-router-dom'\n\nimport useAddBreadcrumbs from '../page-header/breadcrumbs/useAddBreadcrumbs'\nimport PrivateRoute from '../shared/components/PrivateRoute'\nimport Permissions from '../shared/model/Permissions'\nimport { RootState } from '../shared/store'\nimport NewMedicationRequest from './requests/NewMedicationRequest'\nimport MedicationRequests from './search/ViewMedications'\nimport ViewMedication from './ViewMedication'\n\nconst Medications = () => {\n  const { permissions } = useSelector((state: RootState) => state.user)\n  const breadcrumbs = [\n    {\n      i18nKey: 'medications.label',\n      location: `/medications`,\n    },\n  ]\n  useAddBreadcrumbs(breadcrumbs, true)\n\n  return (\n    <Switch>\n      <PrivateRoute\n        isAuthenticated={permissions.includes(Permissions.ViewMedications)}\n        exact\n        path=\"/medications\"\n        component={MedicationRequests}\n      />\n      <PrivateRoute\n        isAuthenticated={permissions.includes(Permissions.RequestMedication)}\n        exact\n        path=\"/medications/new\"\n        component={NewMedicationRequest}\n      />\n      <PrivateRoute\n        isAuthenticated={permissions.includes(Permissions.ViewMedication)}\n        exact\n        path=\"/medications/:id\"\n        component={ViewMedication}\n      />\n    </Switch>\n  )\n}\n\nexport default Medications\n","import { Breadcrumb, BreadcrumbItem } from '@hospitalrun/components'\nimport React from 'react'\nimport { useSelector } from 'react-redux'\nimport { useHistory } from 'react-router-dom'\n\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport { RootState } from '../../shared/store'\n\nconst Breadcrumbs = () => {\n  const history = useHistory()\n  const { t } = useTranslator()\n  const { breadcrumbs } = useSelector((state: RootState) => state.breadcrumbs)\n\n  if (breadcrumbs.length === 0) {\n    return null\n  }\n\n  return (\n    <Breadcrumb>\n      {breadcrumbs.map(({ i18nKey, text, location }, index) => {\n        const isLast = index === breadcrumbs.length - 1\n        const onClick = !isLast ? () => history.push(location) : undefined\n\n        return (\n          <BreadcrumbItem key={location} active={isLast} onClick={onClick}>\n            {i18nKey ? t(i18nKey) : text}\n          </BreadcrumbItem>\n        )\n      })}\n    </Breadcrumb>\n  )\n}\n\nexport default Breadcrumbs\n","import React from 'react'\n\nimport { useButtons } from './ButtonBarProvider'\n\nconst ButtonToolBar = () => {\n  const buttons = useButtons()\n\n  if (buttons.length === 0) {\n    return null\n  }\n\n  return <div className=\"button-toolbar\">{buttons.map((button) => button)}</div>\n}\n\nexport default ButtonToolBar\n","import { Label, DateTimePicker } from '@hospitalrun/components'\nimport React from 'react'\n\ninterface Props {\n  name: string\n  label: string\n  value: Date | undefined\n  isEditable?: boolean\n  onChange?: (date: Date) => void\n  isRequired?: boolean\n  feedback?: string\n  isInvalid?: boolean\n  maxDate?: Date\n}\n\nconst DatePickerWithLabelFormGroup = (props: Props) => {\n  const {\n    onChange,\n    label,\n    name,\n    isEditable,\n    value,\n    isRequired,\n    feedback,\n    isInvalid,\n    maxDate,\n  } = props\n  const id = `${name}DatePicker`\n  return (\n    <div className=\"form-group\" data-testid={id}>\n      <Label text={label} htmlFor={id} isRequired={isRequired} />\n      <DateTimePicker\n        dateFormat=\"MM/dd/yyyy\"\n        dateFormatCalendar=\"LLLL yyyy\"\n        dropdownMode=\"scroll\"\n        maxDate={maxDate}\n        selected={value}\n        timeIntervals={30}\n        withPortal={false}\n        disabled={!isEditable}\n        feedback={feedback}\n        isInvalid={isInvalid}\n        showYearDropdown\n        onChange={(inputDate) => {\n          if (onChange) {\n            onChange(inputDate)\n          }\n        }}\n      />\n    </div>\n  )\n}\n\nexport default DatePickerWithLabelFormGroup\n","import { Select, Label, Spinner, Row, Column, Icon } from '@hospitalrun/components'\nimport React, { useEffect, ReactElement } from 'react'\n\nimport { SelectOption } from '../shared/components/input/SelectOption'\nimport TextFieldWithLabelFormGroup from '../shared/components/input/TextFieldWithLabelFormGroup'\nimport TextInputWithLabelFormGroup from '../shared/components/input/TextInputWithLabelFormGroup'\nimport useTranslator from '../shared/hooks/useTranslator'\nimport { ContactInfoPiece } from '../shared/model/ContactInformation'\nimport { uuid } from '../shared/util/uuid'\nimport ContactInfoTypes from './ContactInfoTypes'\n\ninterface Props {\n  component: 'TextInputWithLabelFormGroup' | 'TextFieldWithLabelFormGroup'\n  data: ContactInfoPiece[]\n  errors?: (string | undefined)[]\n  label: string\n  name: string\n  isEditable?: boolean\n  onChange?: (newData: ContactInfoPiece[]) => void\n}\n\nconst ContactInfo = (props: Props): ReactElement => {\n  const { component, data, errors, label, name, isEditable, onChange } = props\n\n  const { t } = useTranslator()\n\n  useEffect(() => {\n    if (onChange && data.length === 0) {\n      onChange([...data, { id: uuid(), value: '' }])\n    }\n  }, [data, onChange])\n\n  const typeOptions: SelectOption[] = Object.values(ContactInfoTypes).map((value) => ({\n    label: t(`patient.contactInfoType.options.${value}`),\n    value: `${value}`,\n  }))\n\n  const header = (\n    <Row className=\"header mb-2\">\n      <Column xs={12} sm={4}>\n        <span className=\"\">{t('patient.contactInfoType.label')}</span>\n        <span className=\"d-sm-none\"> &amp; {t(label)}</span>\n      </Column>\n      <Column className=\"d-none d-sm-block\" sm={8}>\n        {t(label)}\n      </Column>\n    </Row>\n  )\n\n  const componentList = {\n    TextInputWithLabelFormGroup,\n    TextFieldWithLabelFormGroup,\n  }\n  const Component = componentList[component]\n\n  const onTypeChange = (newType: string, index: number) => {\n    if (onChange) {\n      const currentContact = { ...data[index], type: newType }\n      const newContacts = [...data]\n      newContacts.splice(index, 1, currentContact)\n      onChange(newContacts)\n    }\n  }\n\n  const onValueChange = (\n    event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>,\n    index: number,\n  ) => {\n    if (onChange) {\n      const newValue = event.currentTarget.value\n      const currentContact = { ...data[index], value: newValue }\n      const newContacts = [...data]\n      newContacts.splice(index, 1, currentContact)\n      onChange(newContacts)\n    }\n  }\n\n  const entries = data.map((entry, i) => {\n    const error = errors ? errors[i] : undefined\n    return (\n      <Row key={entry.id}>\n        <Column sm={4}>\n          <div className=\"form-group\" data-testid={`${name}Type${i}Select`}>\n            <Label text={`${name}Type${i}`} />\n            <Select\n              id={`${name}Type${i}Select`}\n              options={typeOptions}\n              defaultSelected={typeOptions.filter(({ value }) => value === entry.type)}\n              onChange={(values) => onTypeChange(values[0], i)}\n              disabled={!isEditable}\n            />\n          </div>\n        </Column>\n        <Column sm={8}>\n          <Component\n            name={`${name}${i}`}\n            value={entry.value}\n            isEditable={isEditable}\n            onChange={(event: any) => onValueChange(event, i)}\n            feedback={error && t(error)}\n            isInvalid={!!error}\n          />\n        </Column>\n      </Row>\n    )\n  })\n\n  const onAddClick = () => {\n    if (!onChange) {\n      return\n    }\n\n    // 1. pick up only non-empty string\n    const newData = data.filter(({ value }) => value.trim() !== '')\n\n    // 2. add a new entry\n    newData.push({ id: uuid(), value: '' })\n\n    // 3. send updates\n    onChange(newData)\n  }\n\n  const addButton = (\n    <div className=\"text-right\">\n      <button type=\"button\" className=\"btn btn-link\" onClick={onAddClick}>\n        <Icon icon=\"add\" /> {t('actions.add')}\n      </button>\n    </div>\n  )\n\n  if (isEditable && data.length === 0) {\n    return (\n      <Spinner\n        aria-hidden=\"false\"\n        aria-label=\"Loading\"\n        color=\"blue\"\n        loading\n        size={20}\n        type=\"SyncLoader\"\n      />\n    )\n  }\n\n  return (\n    <div>\n      {data.length > 0 ? header : null}\n      {entries}\n      {isEditable ? addButton : null}\n    </div>\n  )\n}\n\nContactInfo.defaultProps = {\n  data: [],\n}\n\nexport default ContactInfo\n","import { Select, Label, Panel, Checkbox, Alert } from '@hospitalrun/components'\nimport differenceInYears from 'date-fns/differenceInYears'\nimport startOfDay from 'date-fns/startOfDay'\nimport subYears from 'date-fns/subYears'\nimport React, { ReactElement } from 'react'\n\nimport DatePickerWithLabelFormGroup from '../shared/components/input/DatePickerWithLabelFormGroup'\nimport { SelectOption } from '../shared/components/input/SelectOption'\nimport TextInputWithLabelFormGroup from '../shared/components/input/TextInputWithLabelFormGroup'\nimport useTranslator from '../shared/hooks/useTranslator'\nimport { ContactInfoPiece } from '../shared/model/ContactInformation'\nimport Patient from '../shared/model/Patient'\nimport ContactInfo from './ContactInfo'\n\ninterface Error {\n  message?: string\n  prefix?: string\n  givenName?: string\n  familyName?: string\n  suffix?: string\n  dateOfBirth?: string\n  preferredLanguage?: string\n  phoneNumbers?: (string | undefined)[]\n  emails?: (string | undefined)[]\n}\n\ninterface Props {\n  patient: Patient\n  isEditable?: boolean\n  onChange?: (newPatient: Partial<Patient>) => void\n  error?: Error\n}\n\nconst GeneralInformation = (props: Props): ReactElement => {\n  const { t } = useTranslator()\n  const { patient, isEditable, onChange, error } = props\n\n  const onFieldChange = (name: string, value: string | boolean | ContactInfoPiece[]) => {\n    if (onChange) {\n      const newPatient = {\n        ...patient,\n        [name]: value,\n      }\n      onChange(newPatient)\n    }\n  }\n\n  const guessDateOfBirthFromApproximateAge = (value: string) => {\n    const age = Number.isNaN(parseFloat(value)) ? 0 : parseFloat(value)\n    const dateOfBirth = subYears(new Date(Date.now()), age)\n    return startOfDay(dateOfBirth).toISOString()\n  }\n\n  const onApproximateAgeChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const { value } = event.currentTarget\n    onFieldChange('dateOfBirth', guessDateOfBirthFromApproximateAge(value))\n  }\n\n  const onUnknownDateOfBirthChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const { checked } = event.currentTarget\n    onFieldChange('isApproximateDateOfBirth', checked)\n  }\n\n  const sexOptions: SelectOption[] = [\n    { label: t('sex.male'), value: 'male' },\n    { label: t('sex.female'), value: 'female' },\n    { label: t('sex.other'), value: 'other' },\n    { label: t('sex.unknown'), value: 'unknown' },\n  ]\n\n  const typeOptions: SelectOption[] = [\n    { label: t('patient.types.charity'), value: 'charity' },\n    { label: t('patient.types.private'), value: 'private' },\n  ]\n\n  const bloodTypeOptions: SelectOption[] = [\n    { label: t('bloodType.apositive'), value: 'A+' },\n    { label: t('bloodType.anegative'), value: 'A-' },\n    { label: t('bloodType.abpositive'), value: 'AB+' },\n    { label: t('bloodType.abnegative'), value: 'AB-' },\n    { label: t('bloodType.bpositive'), value: 'B+' },\n    { label: t('bloodType.bnegative'), value: 'B-' },\n    { label: t('bloodType.opositive'), value: 'O+' },\n    { label: t('bloodType.onegative'), value: 'O-' },\n    { label: t('bloodType.unknown'), value: 'unknown' },\n  ]\n\n  return (\n    <div>\n      <Panel title={t('patient.basicInformation')} color=\"primary\" collapsible>\n        {error?.message && <Alert className=\"alert\" color=\"danger\" message={t(error?.message)} />}\n        <div className=\"row\">\n          <div className=\"col-md-2\">\n            <TextInputWithLabelFormGroup\n              label={t('patient.prefix')}\n              name=\"prefix\"\n              value={patient.prefix}\n              isEditable={isEditable}\n              onChange={(event) => onFieldChange('prefix', event.currentTarget.value)}\n              isInvalid={!!error?.prefix}\n              feedback={t(error?.prefix)}\n            />\n          </div>\n          <div className=\"col-md-4\">\n            <TextInputWithLabelFormGroup\n              label={t('patient.givenName')}\n              name=\"givenName\"\n              value={patient.givenName}\n              isEditable={isEditable}\n              onChange={(event) => onFieldChange('givenName', event.currentTarget.value)}\n              isRequired\n              isInvalid={!!error?.givenName}\n              feedback={t(error?.givenName)}\n            />\n          </div>\n          <div className=\"col-md-4\">\n            <TextInputWithLabelFormGroup\n              label={t('patient.familyName')}\n              name=\"familyName\"\n              value={patient.familyName}\n              isEditable={isEditable}\n              onChange={(event) => onFieldChange('familyName', event.currentTarget.value)}\n              isInvalid={!!error?.familyName}\n              feedback={t(error?.familyName)}\n            />\n          </div>\n          <div className=\"col-md-2\">\n            <TextInputWithLabelFormGroup\n              label={t('patient.suffix')}\n              name=\"suffix\"\n              value={patient.suffix}\n              isEditable={isEditable}\n              onChange={(event) => onFieldChange('suffix', event.currentTarget.value)}\n              isInvalid={!!error?.suffix}\n              feedback={t(error?.suffix)}\n            />\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col\">\n            <div className=\"form-group\" data-testid=\"sexSelect\">\n              <Label text={t('patient.sex')} title=\"sex\" />\n              <Select\n                id=\"sexSelect\"\n                options={sexOptions}\n                defaultSelected={sexOptions.filter(({ value }) => value === patient.sex)}\n                onChange={(values) => onFieldChange('sex', values[0])}\n                disabled={!isEditable}\n              />\n            </div>\n          </div>\n          <div className=\"col\">\n            <div className=\"form-group\" data-testid=\"typeSelect\">\n              <Label text={t('patient.type')} title=\"type\" />\n              <Select\n                id=\"typeSelect\"\n                options={typeOptions}\n                defaultSelected={typeOptions.filter(({ value }) => value === patient.type)}\n                onChange={(values) => onFieldChange('type', values[0])}\n                disabled={!isEditable}\n              />\n            </div>\n          </div>\n          <div className=\"col\">\n            <div className=\"form-group\" data-testid=\"bloodTypeSelect\">\n              <Label text={t('patient.bloodType')} title=\"bloodType\" />\n              <Select\n                id=\"bloodTypeSelect\"\n                options={bloodTypeOptions}\n                defaultSelected={bloodTypeOptions.filter(\n                  ({ value }) => value === patient.bloodType,\n                )}\n                onChange={(values) => onFieldChange('bloodType', values[0])}\n                disabled={!isEditable}\n              />\n            </div>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-md-3\">\n            {patient.isApproximateDateOfBirth ? (\n              <TextInputWithLabelFormGroup\n                label={t('patient.approximateAge')}\n                name=\"approximateAge\"\n                type=\"number\"\n                value={`${differenceInYears(new Date(Date.now()), new Date(patient.dateOfBirth))}`}\n                isEditable={isEditable}\n                onChange={onApproximateAgeChange}\n              />\n            ) : (\n              <DatePickerWithLabelFormGroup\n                name=\"dateOfBirth\"\n                label={t('patient.dateOfBirth')}\n                isEditable={isEditable && !patient.isApproximateDateOfBirth}\n                value={\n                  patient.dateOfBirth && patient.dateOfBirth.length > 0\n                    ? new Date(patient.dateOfBirth)\n                    : undefined\n                }\n                maxDate={new Date(Date.now().valueOf())}\n                onChange={(date: Date) => onFieldChange('dateOfBirth', date.toISOString())}\n                isInvalid={!!error?.dateOfBirth}\n                feedback={t(error?.dateOfBirth)}\n              />\n            )}\n            <div className=\"form-group\">\n              <Checkbox\n                label={t('patient.unknownDateOfBirth')}\n                name=\"unknown\"\n                disabled={!isEditable}\n                onChange={onUnknownDateOfBirthChange}\n              />\n            </div>\n          </div>\n          <div className=\"col\">\n            <TextInputWithLabelFormGroup\n              label={t('patient.occupation')}\n              name=\"occupation\"\n              value={patient.occupation}\n              isEditable={isEditable}\n              onChange={(event) => onFieldChange('occupation', event.currentTarget.value)}\n            />\n          </div>\n          <div className=\"col\">\n            <TextInputWithLabelFormGroup\n              label={t('patient.preferredLanguage')}\n              name=\"preferredLanguage\"\n              value={patient.preferredLanguage}\n              isEditable={isEditable}\n              onChange={(event) => onFieldChange('preferredLanguage', event.currentTarget.value)}\n              isInvalid={!!error?.preferredLanguage}\n              feedback={t(error?.preferredLanguage)}\n            />\n          </div>\n        </div>\n      </Panel>\n      <br />\n      <Panel title={t('patient.contactInformation')} color=\"primary\" collapsible>\n        <div className=\"mb-4\">\n          <Panel title={t('patient.phoneNumber')} color=\"primary\" collapsible>\n            <ContactInfo\n              component=\"TextInputWithLabelFormGroup\"\n              data={patient.phoneNumbers}\n              errors={error?.phoneNumbers}\n              label=\"patient.phoneNumber\"\n              name=\"phoneNumber\"\n              isEditable={isEditable}\n              onChange={(newPhoneNumbers) => onFieldChange('phoneNumbers', newPhoneNumbers)}\n            />\n          </Panel>\n        </div>\n        <div className=\"mb-4\">\n          <Panel title={t('patient.email')} color=\"primary\" collapsible>\n            <ContactInfo\n              component=\"TextInputWithLabelFormGroup\"\n              data={patient.emails}\n              errors={error?.emails}\n              label=\"patient.email\"\n              name=\"email\"\n              isEditable={isEditable}\n              onChange={(newEmails) => onFieldChange('emails', newEmails)}\n            />\n          </Panel>\n        </div>\n        <div>\n          <Panel title={t('patient.address')} color=\"primary\" collapsible>\n            <ContactInfo\n              component=\"TextFieldWithLabelFormGroup\"\n              data={patient.addresses}\n              label=\"patient.address\"\n              name=\"address\"\n              isEditable={isEditable}\n              onChange={(newAddresses) => onFieldChange('addresses', newAddresses)}\n            />\n          </Panel>\n        </div>\n      </Panel>\n    </div>\n  )\n}\n\nexport default GeneralInformation\n","import Patient from '../../shared/model/Patient'\n\nconst getNamePartString = (namePart: string | undefined) => {\n  if (!namePart) {\n    return ''\n  }\n\n  return namePart\n}\n\nconst appendNamePart = (name: string, namePart?: string): string =>\n  `${name} ${getNamePartString(namePart)}`.trim()\n\nexport function getPatientName(givenName?: string, familyName?: string, suffix?: string) {\n  let name = ''\n  name = appendNamePart(name, givenName)\n  name = appendNamePart(name, familyName)\n  name = appendNamePart(name, suffix)\n  return name.trim()\n}\n\nexport const getPatientCode = (p: Patient | undefined): string => {\n  if (p) {\n    return p.code\n  }\n\n  return ''\n}\n\nexport function getPatientFullName(patient: Patient | undefined): string {\n  if (!patient) {\n    return ''\n  }\n\n  return getPatientName(patient.givenName, patient.familyName, patient.suffix)\n}\n","import Patient from '../../shared/model/Patient'\nimport { getPatientName } from './patient-util'\n\n/**\n * Add full name. Get rid of empty phone numbers, emails, and addresses.\n * @param patient\n */\nconst cleanupPatient = (patient: Patient) => {\n  const newPatient = { ...patient }\n  newPatient.visits = newPatient.visits ?? []\n\n  const { givenName, familyName, suffix } = patient\n  newPatient.fullName = getPatientName(givenName, familyName, suffix)\n\n  type cik = 'phoneNumbers' | 'emails' | 'addresses'\n  const contactInformationKeys: cik[] = ['phoneNumbers', 'emails', 'addresses']\n  contactInformationKeys.forEach((key) => {\n    if (key in newPatient) {\n      const nonEmpty = newPatient[key]\n        .filter(({ value }) => value.trim() !== '')\n        .map((entry) => {\n          const newValue = entry.value.trim()\n          if ('type' in entry) {\n            return { id: entry.id, value: newValue, type: entry.type }\n          }\n          return { id: entry.id, value: newValue }\n        })\n\n      if (nonEmpty.length > 0) {\n        newPatient[key] = nonEmpty\n      } else {\n        delete newPatient[key]\n      }\n    }\n  })\n\n  return newPatient\n}\n\nexport { cleanupPatient }\n","import isAfter from 'date-fns/isAfter'\nimport parseISO from 'date-fns/parseISO'\nimport validator from 'validator'\n\nimport { ContactInfoPiece } from '../../shared/model/ContactInformation'\nimport Patient from '../../shared/model/Patient'\n\nconst validateEmails = (emails: ContactInfoPiece[] | undefined) =>\n  (emails ?? []).map((email) =>\n    !validator.isEmail(email.value) ? 'patient.errors.invalidEmail' : undefined,\n  )\n\nconst validatePhoneNumbers = (phoneNumbers: ContactInfoPiece[] | undefined) =>\n  (phoneNumbers ?? []).map((phone) =>\n    !validator.isMobilePhone(phone.value) ? 'patient.errors.invalidPhoneNumber' : undefined,\n  )\n\nconst existAndIsAfterToday = (value: string | undefined) => {\n  if (!value) {\n    return false\n  }\n\n  const today = new Date(Date.now())\n  const dateOfBirth = parseISO(value)\n\n  return isAfter(dateOfBirth, today)\n}\n\nconst existAndHasNumbers = (value: string | undefined) => value && /\\d/.test(value)\n\ninterface IPatientFieldErrors {\n  givenName?: 'patient.errors.patientGivenNameFeedback'\n  dateOfBirth?: 'patient.errors.patientDateOfBirthFeedback'\n  suffix?: 'patient.errors.patientNumInSuffixFeedback'\n  prefix?: 'patient.errors.patientNumInPrefixFeedback'\n  familyName?: 'patient.errors.patientNumInFamilyNameFeedback'\n  preferredLanguage?: 'patient.errors.patientNumInPreferredLanguageFeedback'\n  emails?: ('patient.errors.invalidEmail' | undefined)[]\n  phoneNumbers?: ('patient.errors.invalidPhoneNumber' | undefined)[]\n}\n\nexport class PatientValidationError extends Error {\n  public fieldErrors: IPatientFieldErrors\n\n  constructor() {\n    super('Patient data is invalid.')\n    this.name = 'PatientValidationError'\n    this.fieldErrors = {}\n  }\n\n  get count(): number {\n    return Object.keys(this.fieldErrors).length\n  }\n}\n\nexport default function validatePatient(patient: Patient) {\n  const error = new PatientValidationError()\n\n  if (!patient.givenName) {\n    error.fieldErrors.givenName = 'patient.errors.patientGivenNameFeedback'\n  }\n\n  if (existAndIsAfterToday(patient.dateOfBirth)) {\n    error.fieldErrors.dateOfBirth = 'patient.errors.patientDateOfBirthFeedback'\n  }\n\n  if (existAndHasNumbers(patient.suffix)) {\n    error.fieldErrors.suffix = 'patient.errors.patientNumInSuffixFeedback'\n  }\n\n  if (existAndHasNumbers(patient.prefix)) {\n    error.fieldErrors.prefix = 'patient.errors.patientNumInPrefixFeedback'\n  }\n\n  if (existAndHasNumbers(patient.familyName)) {\n    error.fieldErrors.familyName = 'patient.errors.patientNumInFamilyNameFeedback'\n  }\n\n  if (existAndHasNumbers(patient.preferredLanguage)) {\n    error.fieldErrors.preferredLanguage = 'patient.errors.patientNumInPreferredLanguageFeedback'\n  }\n\n  const emailsErrors = validateEmails(patient.emails)\n  const phoneNumbersErrors = validatePhoneNumbers(patient.phoneNumbers)\n\n  if (emailsErrors.some(Boolean)) {\n    error.fieldErrors.emails = emailsErrors\n  }\n\n  if (phoneNumbersErrors.some(Boolean)) {\n    error.fieldErrors.phoneNumbers = phoneNumbersErrors\n  }\n\n  if (error.count === 0) {\n    return null\n  }\n\n  return error\n}\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit'\nimport isEmpty from 'lodash/isEmpty'\n\nimport PatientRepository from '../shared/db/PatientRepository'\nimport Diagnosis from '../shared/model/Diagnosis'\nimport Patient from '../shared/model/Patient'\nimport { AppThunk } from '../shared/store'\nimport { uuid } from '../shared/util/uuid'\nimport { cleanupPatient } from './util/set-patient-helper'\nimport validatePatient from './util/validate-patient'\n\ninterface PatientState {\n  status: 'loading' | 'error' | 'completed'\n  isUpdatedSuccessfully: boolean\n  patient: Patient\n  relatedPersons: Patient[]\n  createError?: Error\n  updateError?: Error\n  allergyError?: AddAllergyError\n  diagnosisError?: AddDiagnosisError\n  relatedPersonError?: AddRelatedPersonError\n}\n\ninterface Error {\n  message?: string\n  givenName?: string\n  dateOfBirth?: string\n  suffix?: string\n  prefix?: string\n  familyName?: string\n  preferredLanguage?: string\n  emails?: (string | undefined)[]\n  phoneNumbers?: (string | undefined)[]\n}\n\ninterface AddRelatedPersonError {\n  message?: string\n  relatedPerson?: string\n  relationshipType?: string\n}\n\ninterface AddAllergyError {\n  message?: string\n  name?: string\n}\n\ninterface AddDiagnosisError {\n  message?: string\n  name?: string\n  date?: string\n  status?: string\n}\n\nconst initialState: PatientState = {\n  status: 'loading',\n  isUpdatedSuccessfully: false,\n  patient: {} as Patient,\n  relatedPersons: [],\n  createError: undefined,\n  updateError: undefined,\n  diagnosisError: undefined,\n  relatedPersonError: undefined,\n}\n\nfunction start(state: PatientState) {\n  state.status = 'loading'\n  state.createError = {}\n}\n\nconst patientSlice = createSlice({\n  name: 'patient',\n  initialState,\n  reducers: {\n    createPatientStart: start,\n    createPatientSuccess(state) {\n      state.status = 'completed'\n    },\n    createPatientError(state, { payload }: PayloadAction<Error>) {\n      state.status = 'error'\n      state.createError = payload\n    },\n    updatePatientStart: start,\n    updatePatientSuccess(state, { payload }: PayloadAction<Patient>) {\n      state.status = 'completed'\n      state.patient = payload\n    },\n    updatePatientError(state, { payload }: PayloadAction<Error>) {\n      state.status = 'error'\n      state.updateError = payload\n    },\n    addDiagnosisError(state, { payload }: PayloadAction<AddDiagnosisError>) {\n      state.status = 'error'\n      state.diagnosisError = payload\n    },\n  },\n})\n\nexport const {\n  createPatientStart,\n  createPatientSuccess,\n  createPatientError,\n  updatePatientStart,\n  updatePatientSuccess,\n  updatePatientError,\n  addDiagnosisError,\n} = patientSlice.actions\n\nexport const createPatient = (\n  patient: Patient,\n  onSuccess?: (patient: Patient) => void,\n): AppThunk => async (dispatch) => {\n  dispatch(createPatientStart())\n\n  const cleanPatient = cleanupPatient(patient)\n  const newPatientError = validatePatient(cleanPatient)\n\n  if (!newPatientError) {\n    const newPatient = await PatientRepository.save(cleanPatient)\n    dispatch(createPatientSuccess())\n\n    if (onSuccess) {\n      onSuccess(newPatient)\n    }\n  } else {\n    dispatch(\n      createPatientError({\n        ...newPatientError.fieldErrors,\n        message: 'patient.errors.createPatientError',\n      }),\n    )\n  }\n}\n\nexport const updatePatient = (\n  patient: Patient,\n  onSuccess?: (patient: Patient) => void,\n): AppThunk => async (dispatch) => {\n  dispatch(updatePatientStart())\n\n  const cleanPatient = cleanupPatient(patient)\n  const updateError = validatePatient(cleanPatient)\n\n  if (!updateError) {\n    const updatedPatient = await PatientRepository.saveOrUpdate(cleanPatient)\n    dispatch(updatePatientSuccess(updatedPatient))\n\n    if (onSuccess) {\n      onSuccess(updatedPatient)\n    }\n  } else {\n    dispatch(\n      updatePatientError({\n        ...updateError.fieldErrors,\n        message: 'patient.errors.updatePatientError',\n      }),\n    )\n  }\n}\n\nfunction validateDiagnosis(diagnosis: Diagnosis) {\n  const error: AddDiagnosisError = {}\n\n  if (!diagnosis.name) {\n    error.name = 'patient.diagnoses.error.nameRequired'\n  }\n\n  if (!diagnosis.diagnosisDate) {\n    error.date = 'patient.diagnoses.error.dateRequired'\n  }\n\n  if (!diagnosis.onsetDate) {\n    error.date = 'patient.diagnoses.error.dateRequired'\n  }\n\n  if (!diagnosis.status) {\n    error.status = 'patient.diagnoses.error.statusRequired'\n  }\n  return error\n}\n\nexport const addDiagnosis = (\n  patientId: string,\n  diagnosis: Diagnosis,\n  onSuccess?: (patient: Patient) => void,\n): AppThunk => async (dispatch) => {\n  const newDiagnosisError = validateDiagnosis(diagnosis)\n\n  if (isEmpty(newDiagnosisError)) {\n    const patient = await PatientRepository.find(patientId)\n    const diagnoses = patient.diagnoses || []\n    diagnoses.push({ id: uuid(), ...diagnosis })\n    patient.diagnoses = diagnoses\n\n    await dispatch(updatePatient(patient, onSuccess))\n  } else {\n    newDiagnosisError.message = 'patient.diagnoses.error.unableToAdd'\n    dispatch(addDiagnosisError(newDiagnosisError))\n  }\n}\n\nexport default patientSlice.reducer\n","import { Spinner, Button, Toast } from '@hospitalrun/components'\nimport React, { useEffect, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { useHistory, useParams } from 'react-router-dom'\n\nimport useAddBreadcrumbs from '../../page-header/breadcrumbs/useAddBreadcrumbs'\nimport { useUpdateTitle } from '../../page-header/title/TitleContext'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport Patient from '../../shared/model/Patient'\nimport { RootState } from '../../shared/store'\nimport GeneralInformation from '../GeneralInformation'\nimport usePatient from '../hooks/usePatient'\nimport { updatePatient } from '../patient-slice'\nimport { getPatientCode, getPatientFullName } from '../util/patient-util'\n\nconst EditPatient = () => {\n  const { t } = useTranslator()\n  const history = useHistory()\n  const dispatch = useDispatch()\n  const { id } = useParams()\n\n  const { data: givenPatient, status } = usePatient(id)\n  const [patient, setPatient] = useState({} as Patient)\n\n  const { updateError } = useSelector((state: RootState) => state.patient)\n\n  const updateTitle = useUpdateTitle()\n\n  useEffect(() => {\n    updateTitle(\n      `${t('patients.editPatient')}: ${getPatientFullName(givenPatient)} (${getPatientCode(\n        givenPatient,\n      )})`,\n    )\n  })\n\n  const breadcrumbs = [\n    { i18nKey: 'patients.label', location: '/patients' },\n    { text: getPatientFullName(givenPatient), location: `/patients/${id}` },\n    { i18nKey: 'patients.editPatient', location: `/patients/${id}/edit` },\n  ]\n  useAddBreadcrumbs(breadcrumbs, true)\n\n  useEffect(() => {\n    setPatient(givenPatient || ({} as Patient))\n  }, [givenPatient])\n\n  const onCancel = () => {\n    history.push(`/patients/${patient.id}`)\n  }\n\n  const onSuccessfulSave = (updatedPatient: Patient) => {\n    history.push(`/patients/${updatedPatient.id}`)\n    Toast(\n      'success',\n      t('states.success'),\n      `${t('patients.successfullyUpdated')} ${patient.fullName}`,\n    )\n  }\n\n  const onSave = async () => {\n    await dispatch(updatePatient(patient, onSuccessfulSave))\n  }\n\n  const onPatientChange = (newPatient: Partial<Patient>) => {\n    setPatient(newPatient as Patient)\n  }\n\n  if (status === 'loading') {\n    return <Spinner color=\"blue\" loading size={[10, 25]} type=\"ScaleLoader\" />\n  }\n\n  return (\n    <div>\n      <GeneralInformation\n        patient={patient}\n        isEditable\n        onChange={onPatientChange}\n        error={updateError}\n      />\n      <div className=\"row float-right\">\n        <div className=\"btn-group btn-group-lg mt-3 mr-3\">\n          <Button className=\"btn-save mr-2\" color=\"success\" onClick={onSave}>\n            {t('patients.updatePatient')}\n          </Button>\n          <Button className=\"btn-cancel\" color=\"danger\" onClick={onCancel}>\n            {t('actions.cancel')}\n          </Button>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default EditPatient\n","import Patient from '../../shared/model/Patient'\n\nexport function isPossibleDuplicatePatient(newPatient: Patient, existingPatient: Patient) {\n  return (\n    newPatient.givenName === existingPatient.givenName &&\n    newPatient.familyName === existingPatient.familyName &&\n    newPatient.sex === existingPatient.sex &&\n    newPatient.dateOfBirth === existingPatient.dateOfBirth\n  )\n}\n","import { Modal, Alert } from '@hospitalrun/components'\nimport React from 'react'\nimport { Link } from 'react-router-dom'\n\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport Patient from '../../shared/model/Patient'\n\ninterface Props {\n  duplicatePatient?: Patient\n  show: boolean\n  toggle: () => void\n  onCloseButtonClick: () => void\n  onContinueButtonClick: () => void\n}\n\nconst DuplicateNewPatientModal = (props: Props) => {\n  const { t } = useTranslator()\n  const { duplicatePatient, show, toggle, onCloseButtonClick, onContinueButtonClick } = props\n\n  const body = (\n    <>\n      <Alert\n        color=\"warning\"\n        title={t('patients.warning')}\n        message={t('patients.duplicatePatientWarning')}\n      />\n      <div className=\"row\">\n        <div className=\"col-md-12\">\n          {t('patients.possibleDuplicatePatient')}\n          {duplicatePatient !== undefined &&\n            Object.entries(duplicatePatient).map(([key, patient]) => (\n              <li key={key.toString()}>\n                <Link to={`/patients/${patient.id}`}>{patient.fullName}</Link>\n              </li>\n            ))}\n        </div>\n      </div>\n    </>\n  )\n\n  return (\n    <Modal\n      show={show}\n      toggle={toggle}\n      title={t('patients.newPatient')}\n      body={body}\n      closeButton={{\n        children: t('actions.cancel'),\n        color: 'danger',\n        onClick: onCloseButtonClick,\n      }}\n      successButton={{\n        children: t('actions.save'),\n        color: 'success',\n        onClick: onContinueButtonClick,\n      }}\n    />\n  )\n}\n\nexport default DuplicateNewPatientModal\n","import { Button, Toast } from '@hospitalrun/components'\nimport React, { useState, useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { useHistory } from 'react-router-dom'\n\nimport useAddBreadcrumbs from '../../page-header/breadcrumbs/useAddBreadcrumbs'\nimport { useUpdateTitle } from '../../page-header/title/TitleContext'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport Patient from '../../shared/model/Patient'\nimport { RootState } from '../../shared/store'\nimport GeneralInformation from '../GeneralInformation'\nimport { createPatient } from '../patient-slice'\nimport { isPossibleDuplicatePatient } from '../util/is-possible-duplicate-patient'\nimport DuplicateNewPatientModal from './DuplicateNewPatientModal'\n\nconst breadcrumbs = [\n  { i18nKey: 'patients.label', location: '/patients' },\n  { i18nKey: 'patients.newPatient', location: '/patients/new' },\n]\n\nconst NewPatient = () => {\n  const { t } = useTranslator()\n  const history = useHistory()\n  const dispatch = useDispatch()\n  const { createError } = useSelector((state: RootState) => state.patient)\n  const { patients } = Object(useSelector((state: RootState) => state.patients))\n\n  const [patient, setPatient] = useState({} as Patient)\n  const [duplicatePatient, setDuplicatePatient] = useState<Patient | undefined>(undefined)\n  const [showDuplicateNewPatientModal, setShowDuplicateNewPatientModal] = useState<boolean>(false)\n\n  const testPatient = {\n    givenName: 'Kelly',\n    familyName: 'Clark',\n    sex: 'female',\n    dateOfBirth: '1963-01-09T05:00:00.000Z',\n  } as Patient\n\n  const updateTitle = useUpdateTitle()\n  useEffect(() => {\n    updateTitle(t('patients.newPatient'))\n  })\n  useAddBreadcrumbs(breadcrumbs, true)\n\n  const onCancel = () => {\n    history.push('/patients')\n  }\n\n  const onSuccessfulSave = (newPatient: Patient) => {\n    history.push(`/patients/${newPatient.id}`)\n    Toast(\n      'success',\n      t('states.success'),\n      `${t('patients.successfullyCreated')} ${newPatient.fullName}`,\n    )\n  }\n\n  const onSave = () => {\n    let duplicatePatients = []\n    if (patients !== undefined) {\n      duplicatePatients = patients.filter((existingPatient: any) =>\n        isPossibleDuplicatePatient(patient, existingPatient),\n      )\n    }\n\n    if (duplicatePatients.length > 0) {\n      setShowDuplicateNewPatientModal(true)\n      setDuplicatePatient(duplicatePatients as Patient)\n    } else {\n      dispatch(createPatient(patient, onSuccessfulSave))\n    }\n\n    const testCase = [isPossibleDuplicatePatient(patient, testPatient)]\n    if (testCase.length > 0) {\n      return true\n    }\n    return false\n  }\n\n  const onPatientChange = (newPatient: Partial<Patient>) => {\n    setPatient(newPatient as Patient)\n  }\n\n  const createDuplicateNewPatient = () => {\n    dispatch(createPatient(patient, onSuccessfulSave))\n  }\n\n  const closeDuplicateNewPatientModal = () => {\n    setShowDuplicateNewPatientModal(false)\n  }\n\n  return (\n    <div>\n      <GeneralInformation\n        patient={patient}\n        isEditable\n        onChange={onPatientChange}\n        error={createError}\n      />\n      <div className=\"row float-right\">\n        <div className=\"btn-group btn-group-lg mt-3 mr-3\">\n          <Button className=\"btn-save mr-2\" color=\"success\" onClick={onSave}>\n            {t('patients.createPatient')}\n          </Button>\n          <Button className=\"btn-cancel\" color=\"danger\" onClick={onCancel}>\n            {t('actions.cancel')}\n          </Button>\n        </div>\n      </div>\n\n      <DuplicateNewPatientModal\n        duplicatePatient={duplicatePatient}\n        show={showDuplicateNewPatientModal}\n        toggle={closeDuplicateNewPatientModal}\n        onContinueButtonClick={createDuplicateNewPatient}\n        onCloseButtonClick={closeDuplicateNewPatientModal}\n      />\n    </div>\n  )\n}\n\nexport default NewPatient\n","import { TextInput } from '@hospitalrun/components'\nimport React, { useEffect, useState } from 'react'\n\nimport useDebounce from '../../shared/hooks/useDebounce'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport PatientSearchRequest from '../models/PatientSearchRequest'\n\ninterface Props {\n  onChange: (searchRequest: PatientSearchRequest) => void\n}\n\nconst PatientSearchInput = (props: Props) => {\n  const { onChange } = props\n  const { t } = useTranslator()\n\n  const [searchText, setSearchText] = useState<string>('')\n  const debouncedSearchText = useDebounce(searchText, 500)\n\n  useEffect(() => {\n    onChange({\n      queryString: debouncedSearchText,\n    })\n  }, [debouncedSearchText, onChange])\n\n  const onSearchBoxChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const queryString = event.currentTarget.value\n    setSearchText(queryString)\n  }\n\n  return (\n    <TextInput\n      size=\"lg\"\n      type=\"text\"\n      onChange={onSearchBoxChange}\n      value={searchText}\n      placeholder={t('actions.search')}\n    />\n  )\n}\n\nexport default PatientSearchInput\n","import format from 'date-fns/format'\n\nexport const formatDate = (date?: string | Date) => {\n  if (!date) {\n    return ''\n  }\n  const dateObject = typeof date === 'string' ? new Date(date) : date\n  if (Number.isNaN(dateObject.getTime())) {\n    return ''\n  }\n  return format(dateObject, 'MM/dd/yyyy')\n}\n","import { useQuery } from 'react-query'\n\nimport PatientRepository from '../../shared/db/PatientRepository'\nimport Patient from '../../shared/model/Patient'\nimport PatientSearchRequest from '../models/PatientSearchRequest'\n\ninterface PatientsResult {\n  totalCount: number\n  patients: Patient[]\n}\n\nasync function fetchPatients(_: any, searchRequest: PatientSearchRequest): Promise<PatientsResult> {\n  const patients = await PatientRepository.search(searchRequest.queryString)\n  const totalCount = await PatientRepository.count()\n  return { totalCount, patients }\n}\n\nexport default function usePatients(searchRequest: PatientSearchRequest) {\n  return useQuery(['patients', searchRequest], fetchPatients)\n}\n","import { Button, Icon, Typography } from '@hospitalrun/components'\nimport React from 'react'\nimport { useHistory } from 'react-router-dom'\n\nimport useTranslator from '../../shared/hooks/useTranslator'\n\nconst NoPatientsExist = () => {\n  const history = useHistory()\n  const { t } = useTranslator()\n\n  return (\n    <div style={{ display: 'flex', justifyContent: 'center' }}>\n      <div style={{ display: 'flex', flexDirection: 'column' }}>\n        <div style={{ display: 'flex', justifyContent: 'center' }}>\n          <Icon icon=\"patients\" outline={false} size=\"6x\" />\n        </div>\n        <div style={{ display: 'flex', justifyContent: 'center' }}>\n          <div style={{ textAlign: 'center', width: '60%', margin: 16 }}>\n            <Typography variant=\"h5\">{t('patients.noPatients')}</Typography>\n          </div>\n        </div>\n        <div style={{ display: 'flex', justifyContent: 'center' }}>\n          <Button\n            key=\"newPatientButton\"\n            outlined\n            color=\"primary\"\n            icon=\"patient-add\"\n            onClick={() => history.push('/patients/new')}\n          >\n            {t('patients.newPatient')}\n          </Button>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default NoPatientsExist\n","import { Table } from '@hospitalrun/components'\nimport React from 'react'\nimport { useHistory } from 'react-router'\n\nimport Loading from '../../shared/components/Loading'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport { formatDate } from '../../shared/util/formatDate'\nimport usePatients from '../hooks/usePatients'\nimport PatientSearchRequest from '../models/PatientSearchRequest'\nimport NoPatientsExist from './NoPatientsExist'\n\ninterface Props {\n  searchRequest: PatientSearchRequest\n}\n\nconst ViewPatientsTable = (props: Props) => {\n  const { searchRequest } = props\n  const { t } = useTranslator()\n  const history = useHistory()\n  const { data, status } = usePatients(searchRequest)\n\n  if (data === undefined || status === 'loading') {\n    return <Loading />\n  }\n\n  if (data.totalCount === 0) {\n    return <NoPatientsExist />\n  }\n\n  return (\n    <Table\n      data={data.patients}\n      getID={(row) => row.id}\n      columns={[\n        { label: t('patient.code'), key: 'code' },\n        { label: t('patient.givenName'), key: 'givenName' },\n        { label: t('patient.familyName'), key: 'familyName' },\n        { label: t('patient.sex'), key: 'sex' },\n        {\n          label: t('patient.dateOfBirth'),\n          key: 'dateOfBirth',\n          formatter: (row) => formatDate(row.dateOfBirth),\n        },\n      ]}\n      actionsHeaderText={t('actions.label')}\n      actions={[{ label: t('actions.view'), action: (row) => history.push(`/patients/${row.id}`) }]}\n    />\n  )\n}\n\nexport default ViewPatientsTable\n","import { Column, Container, Row } from '@hospitalrun/components'\nimport React, { useCallback, useState } from 'react'\n\nimport PatientSearchRequest from '../models/PatientSearchRequest'\nimport PatientSearchInput from './PatientSearchInput'\nimport ViewPatientsTable from './ViewPatientsTable'\n\nconst SearchPatients = () => {\n  const [searchRequest, setSearchRequest] = useState<PatientSearchRequest>({ queryString: '' })\n\n  const onSearchRequestChange = useCallback((newSearchRequest: PatientSearchRequest) => {\n    setSearchRequest(newSearchRequest)\n  }, [])\n\n  return (\n    <div>\n      <Container>\n        <Row>\n          <Column md={12}>\n            <PatientSearchInput onChange={onSearchRequestChange} />\n          </Column>\n        </Row>\n        <Row>\n          <ViewPatientsTable searchRequest={searchRequest} />\n        </Row>\n      </Container>\n    </div>\n  )\n}\n\nexport default SearchPatients\n","import { Button } from '@hospitalrun/components'\nimport React, { useEffect } from 'react'\nimport { useDispatch } from 'react-redux'\nimport { useHistory } from 'react-router'\n\nimport useAddBreadcrumbs from '../../page-header/breadcrumbs/useAddBreadcrumbs'\nimport { useButtonToolbarSetter } from '../../page-header/button-toolbar/ButtonBarProvider'\nimport { useUpdateTitle } from '../../page-header/title/TitleContext'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport SearchPatients from './SearchPatients'\n\nconst breadcrumbs = [{ i18nKey: 'patients.label', location: '/patients' }]\n\nconst ViewPatients = () => {\n  const { t } = useTranslator()\n  const history = useHistory()\n  const updateTitle = useUpdateTitle()\n  useEffect(() => {\n    updateTitle(t('patients.label'))\n  })\n  const dispatch = useDispatch()\n  const setButtonToolBar = useButtonToolbarSetter()\n\n  useAddBreadcrumbs(breadcrumbs, true)\n\n  useEffect(() => {\n    setButtonToolBar([\n      <Button\n        key=\"newPatientButton\"\n        outlined\n        color=\"success\"\n        icon=\"patient-add\"\n        onClick={() => history.push('/patients/new')}\n      >\n        {t('patients.newPatient')}\n      </Button>,\n    ])\n    return () => {\n      setButtonToolBar([])\n    }\n  }, [dispatch, setButtonToolBar, t, history])\n\n  return <SearchPatients />\n}\n\nexport default ViewPatients\n","import { useQuery } from 'react-query'\n\nimport PatientRepository from '../../shared/db/PatientRepository'\nimport Allergy from '../../shared/model/Allergy'\n\nasync function fetchPatientAllergies(_: string, patientId: string): Promise<Allergy[]> {\n  const patient = await PatientRepository.find(patientId)\n  return patient.allergies || []\n}\n\nexport default function usePatientAllergies(patientId: string) {\n  return useQuery(['allergies', patientId], fetchPatientAllergies)\n}\n","import { Alert, List, ListItem } from '@hospitalrun/components'\nimport React from 'react'\nimport { useHistory } from 'react-router-dom'\n\nimport Loading from '../../shared/components/Loading'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport Allergy from '../../shared/model/Allergy'\nimport usePatientAllergies from '../hooks/usePatientAllergies'\n\ninterface Props {\n  patientId: string\n}\n\nconst AllergiesList = (props: Props) => {\n  const { patientId } = props\n  const history = useHistory()\n  const { t } = useTranslator()\n  const { data, status } = usePatientAllergies(patientId)\n\n  if (data === undefined || status === 'loading') {\n    return <Loading />\n  }\n\n  if (data.length === 0) {\n    return (\n      <Alert\n        color=\"warning\"\n        title={t('patient.allergies.warning.noAllergies')}\n        message={t('patient.allergies.addAllergyAbove')}\n      />\n    )\n  }\n\n  return (\n    <List>\n      {data.map((a: Allergy) => (\n        <ListItem\n          action\n          key={a.id}\n          onClick={() => history.push(`/patients/${patientId}/allergies/${a.id}`)}\n        >\n          {a.name}\n        </ListItem>\n      ))}\n    </List>\n  )\n}\n\nexport default AllergiesList\n","import Allergy from '../../shared/model/Allergy'\n\nexport class AllergyError extends Error {\n  nameError?: string\n\n  constructor(message: string, name: string) {\n    super(message)\n    this.nameError = name\n    Object.setPrototypeOf(this, AllergyError.prototype)\n  }\n}\n\nexport default function validateAllergy(allergy: Partial<Allergy>) {\n  const error: any = {}\n  if (!allergy.name) {\n    error.nameError = 'patient.allergies.error.nameRequired'\n  }\n\n  return error\n}\n","import isEmpty from 'lodash/isEmpty'\nimport { queryCache, useMutation } from 'react-query'\n\nimport PatientRepository from '../../shared/db/PatientRepository'\nimport Allergy from '../../shared/model/Allergy'\nimport { uuid } from '../../shared/util/uuid'\nimport validateAllergy from '../util/validate-allergy'\n\ninterface AddAllergyRequest {\n  patientId: string\n  allergy: Omit<Allergy, 'id'>\n}\n\nasync function addAllergy(request: AddAllergyRequest): Promise<Allergy[]> {\n  const error = validateAllergy(request.allergy)\n\n  if (isEmpty(error)) {\n    const patient = await PatientRepository.find(request.patientId)\n    const allergies = patient.allergies ? [...patient.allergies] : []\n    const newAllergy: Allergy = {\n      id: uuid(),\n      ...request.allergy,\n    }\n    allergies.push(newAllergy)\n\n    await PatientRepository.saveOrUpdate({\n      ...patient,\n      allergies,\n    })\n\n    return allergies\n  }\n\n  throw error\n}\n\nexport default function useAddAllergy() {\n  return useMutation(addAllergy, {\n    onSuccess: async (data, variables) => {\n      await queryCache.setQueryData(['allergies', variables.patientId], data)\n    },\n    throwOnError: true,\n  })\n}\n","import { Modal, Alert } from '@hospitalrun/components'\nimport React, { useState, useEffect } from 'react'\n\nimport TextInputWithLabelFormGroup from '../../shared/components/input/TextInputWithLabelFormGroup'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport useAddAllergy from '../hooks/useAddAllergy'\nimport { AllergyError } from '../util/validate-allergy'\n\ninterface NewAllergyModalProps {\n  patientId: string\n  show: boolean\n  onCloseButtonClick: () => void\n}\n\nconst NewAllergyModal = (props: NewAllergyModalProps) => {\n  const { show, onCloseButtonClick, patientId } = props\n  const { t } = useTranslator()\n  const [mutate] = useAddAllergy()\n\n  const [allergy, setAllergy] = useState({ name: '' })\n  const [allergyError, setAllergyError] = useState<AllergyError | undefined>(undefined)\n\n  useEffect(() => {\n    setAllergy({ name: '' })\n  }, [show])\n\n  const onNameChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const name = event.target.value\n    setAllergy((prevAllergy) => ({ ...prevAllergy, name }))\n  }\n\n  const onSaveButtonClick = async () => {\n    try {\n      await mutate({ patientId, allergy })\n      onCloseButtonClick()\n    } catch (e) {\n      setAllergyError(e)\n    }\n  }\n\n  const onClose = () => {\n    onCloseButtonClick()\n  }\n\n  const body = (\n    <>\n      {allergyError && (\n        <Alert\n          color=\"danger\"\n          title={t('states.error')}\n          message={t('patient.allergies.error.unableToAdd')}\n        />\n      )}\n      <form>\n        <TextInputWithLabelFormGroup\n          name=\"name\"\n          isRequired\n          label={t('patient.allergies.allergyName')}\n          isEditable\n          placeholder={t('patient.allergies.allergyName')}\n          value={allergy.name}\n          onChange={onNameChange}\n          feedback={t(allergyError?.nameError || '')}\n          isInvalid={!!allergyError?.nameError}\n        />\n      </form>\n    </>\n  )\n\n  return (\n    <Modal\n      show={show}\n      toggle={onClose}\n      title={t('patient.allergies.new')}\n      body={body}\n      closeButton={{\n        children: t('actions.cancel'),\n        color: 'danger',\n        onClick: onClose,\n      }}\n      successButton={{\n        children: t('patient.allergies.new'),\n        color: 'success',\n        icon: 'add',\n        iconLocation: 'left',\n        onClick: onSaveButtonClick,\n      }}\n    />\n  )\n}\n\nexport default NewAllergyModal\n","import { useQuery } from 'react-query'\n\nimport PatientRepository from '../../shared/db/PatientRepository'\nimport Allergy from '../../shared/model/Allergy'\n\nasync function getAllergy(_: string, patientId: string, allergyId: string): Promise<Allergy> {\n  const patient = await PatientRepository.find(patientId)\n  const maybeAllergy = patient.allergies?.find((a) => a.id === allergyId)\n  if (!maybeAllergy) {\n    throw new Error('Allergy not found')\n  }\n\n  return maybeAllergy\n}\n\nexport default function useAllergy(patientId: string, allergyId: string) {\n  return useQuery(['allergies', patientId, allergyId], getAllergy)\n}\n","import React from 'react'\nimport { useParams } from 'react-router-dom'\n\nimport TextInputWithLabelFormGroup from '../../shared/components/input/TextInputWithLabelFormGroup'\nimport Loading from '../../shared/components/Loading'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport useAllergy from '../hooks/useAllergy'\n\nconst ViewAllergy = () => {\n  const { t } = useTranslator()\n  const { allergyId, id: patientId } = useParams()\n  const { data, status } = useAllergy(patientId, allergyId)\n\n  if (data === undefined || status === 'loading') {\n    return <Loading />\n  }\n\n  return (\n    <>\n      <TextInputWithLabelFormGroup\n        name=\"allergy\"\n        label={t('patient.allergies.allergyName')}\n        isEditable={false}\n        placeholder={t('patient.allergies.allergyName')}\n        value={data.name}\n      />\n    </>\n  )\n}\n\nexport default ViewAllergy\n","import { Button } from '@hospitalrun/components'\nimport React, { useState } from 'react'\nimport { useSelector } from 'react-redux'\nimport { Route, Switch } from 'react-router-dom'\n\nimport useAddBreadcrumbs from '../../page-header/breadcrumbs/useAddBreadcrumbs'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport Patient from '../../shared/model/Patient'\nimport Permissions from '../../shared/model/Permissions'\nimport { RootState } from '../../shared/store'\nimport AllergiesList from './AllergiesList'\nimport NewAllergyModal from './NewAllergyModal'\nimport ViewAllergy from './ViewAllergy'\n\ninterface AllergiesProps {\n  patient: Patient\n}\n\nconst Allergies = (props: AllergiesProps) => {\n  const { t } = useTranslator()\n  const { patient } = props\n  const { permissions } = useSelector((state: RootState) => state.user)\n  const [showNewAllergyModal, setShowNewAllergyModal] = useState(false)\n\n  const breadcrumbs = [\n    {\n      i18nKey: 'patient.allergies.label',\n      location: `/patients/${patient.id}/allergies`,\n    },\n  ]\n  useAddBreadcrumbs(breadcrumbs)\n\n  return (\n    <>\n      <div className=\"row\">\n        <div className=\"col-md-12 d-flex justify-content-end\">\n          {permissions.includes(Permissions.AddAllergy) && (\n            <Button\n              outlined\n              color=\"success\"\n              icon=\"add\"\n              iconLocation=\"left\"\n              onClick={() => setShowNewAllergyModal(true)}\n            >\n              {t('patient.allergies.new')}\n            </Button>\n          )}\n        </div>\n      </div>\n      <br />\n      <Switch>\n        <Route exact path=\"/patients/:id/allergies\">\n          <AllergiesList patientId={patient.id} />\n        </Route>\n        <Route exact path=\"/patients/:id/allergies/:allergyId\">\n          <ViewAllergy />\n        </Route>\n      </Switch>\n      <NewAllergyModal\n        patientId={patient.id}\n        show={showNewAllergyModal}\n        onCloseButtonClick={() => setShowNewAllergyModal(false)}\n      />\n    </>\n  )\n}\n\nexport default Allergies\n","import { useQuery } from 'react-query'\n\nimport PatientRepository from '../../shared/db/PatientRepository'\nimport Appointments from '../../shared/model/Appointment'\n\nasync function fetchPatientAppointments(_: string, patientId: string): Promise<Appointments[]> {\n  return PatientRepository.getAppointments(patientId)\n}\n\nexport default function usePatientsAppointments(patientId: string) {\n  return useQuery(['appointments', patientId], fetchPatientAppointments)\n}\n","import { Button, Table, Alert } from '@hospitalrun/components'\nimport format from 'date-fns/format'\nimport React from 'react'\nimport { useHistory } from 'react-router-dom'\n\nimport useAddBreadcrumbs from '../../page-header/breadcrumbs/useAddBreadcrumbs'\nimport Loading from '../../shared/components/Loading'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport Patient from '../../shared/model/Patient'\nimport usePatientsAppointments from '../hooks/usePatientAppointments'\n\ninterface Props {\n  patient: Patient\n}\n\nconst AppointmentsList = ({ patient }: Props) => {\n  const history = useHistory()\n  const { t } = useTranslator()\n  const patientId = patient.id\n\n  const { data, status } = usePatientsAppointments(patientId)\n\n  const breadcrumbs = [\n    {\n      i18nKey: 'scheduling.appointments.label',\n      location: `/patients/${patientId}/appointments`,\n    },\n  ]\n\n  useAddBreadcrumbs(breadcrumbs)\n\n  if (data === undefined || status === 'loading') {\n    return <Loading />\n  }\n\n  return (\n    <>\n      <div className=\"row\">\n        <div className=\"col-md-12 d-flex justify-content-end\">\n          <Button\n            key=\"newAppointmentButton\"\n            outlined\n            color=\"success\"\n            icon=\"appointment-add\"\n            onClick={() => history.push({ pathname: '/appointments/new', state: { patient } })}\n          >\n            {t('scheduling.appointments.new')}\n          </Button>\n        </div>\n      </div>\n      <br />\n      <div className=\"row\">\n        <div className=\"col-md-12\">\n          {data.length > 0 ? (\n            <Table\n              data={data}\n              getID={(row) => row.id}\n              onRowClick={(row) => history.push(`/appointments/${row.id}`)}\n              columns={[\n                {\n                  label: t('scheduling.appointment.startDate'),\n                  key: 'startDateTime',\n                  formatter: (row) =>\n                    row.startDateTime\n                      ? format(new Date(row.startDateTime), 'yyyy-MM-dd, hh:mm a')\n                      : '',\n                },\n                {\n                  label: t('scheduling.appointment.endDate'),\n                  key: 'endDateTime',\n                  formatter: (row) =>\n                    row.endDateTime ? format(new Date(row.endDateTime), 'yyyy-MM-dd, hh:mm a') : '',\n                },\n                { label: t('scheduling.appointment.location'), key: 'location' },\n                { label: t('scheduling.appointment.type'), key: 'type' },\n              ]}\n              actionsHeaderText={t('actions.label')}\n              actions={[\n                {\n                  label: t('actions.view'),\n                  action: (row) => history.push(`/appointments/${row.id}`),\n                },\n              ]}\n            />\n          ) : (\n            <Alert\n              color=\"warning\"\n              title={t('patient.appointments.warning.noAppointments')}\n              message={t('patient.appointments.addAppointmentAbove')}\n            />\n          )}\n        </div>\n      </div>\n    </>\n  )\n}\n\nexport default AppointmentsList\n","export enum CareGoalStatus {\n  Proposed = 'proposed',\n  Planned = 'planned',\n  Accepted = 'accepted',\n  Active = 'active',\n  OnHold = 'on hold',\n  Completed = 'completed',\n  Cancelled = 'cancelled',\n  Rejected = 'rejected',\n}\n\nexport enum CareGoalAchievementStatus {\n  InProgress = 'in progress',\n  Improving = 'improving',\n  Worsening = 'worsening',\n  NoChange = 'no change',\n  Achieved = 'achieved',\n  NotAchieved = 'not achieved',\n  NoProgress = 'no progress',\n  NotAttainable = 'not attainable',\n}\n\nexport default interface CareGoal {\n  id: string\n  status: CareGoalStatus\n  achievementStatus: CareGoalAchievementStatus\n  priority: 'high' | 'medium' | 'low'\n  description: string\n  startDate: string\n  dueDate: string\n  createdOn: string\n  note: string\n}\n","import isBefore from 'date-fns/isBefore'\n\nimport CareGoal from '../../shared/model/CareGoal'\n\nexport class CareGoalError extends Error {\n  message: string\n\n  description?: string\n\n  status?: string\n\n  achievementStatus?: string\n\n  priority?: string\n\n  startDate?: string\n\n  dueDate?: string\n\n  constructor(\n    message: string,\n    description: string,\n    status: string,\n    achievementStatus: string,\n    priority: string,\n    startDate: string,\n    dueDate: string,\n  ) {\n    super(message)\n    this.message = message\n    this.description = description\n    this.status = status\n    this.achievementStatus = achievementStatus\n    this.priority = priority\n    this.startDate = startDate\n    this.dueDate = dueDate\n  }\n}\n\nexport default function validateCareGoal(careGoal: Partial<CareGoal>): CareGoalError {\n  const error = {} as CareGoalError\n\n  if (!careGoal.description) {\n    error.description = 'patient.careGoal.error.descriptionRequired'\n  }\n\n  if (!careGoal.status) {\n    error.status = 'patient.careGoal.error.statusRequired'\n  }\n\n  if (!careGoal.achievementStatus) {\n    error.achievementStatus = 'patient.careGoal.error.achievementStatusRequired'\n  }\n\n  if (!careGoal.priority) {\n    error.priority = 'patient.careGoal.error.priorityRequired'\n  }\n\n  if (!careGoal.startDate) {\n    error.startDate = 'patient.careGoal.error.startDate'\n  }\n\n  if (!careGoal.dueDate) {\n    error.dueDate = 'patient.careGoal.error.dueDate'\n  }\n\n  if (careGoal.startDate && careGoal.dueDate) {\n    if (isBefore(new Date(careGoal.dueDate), new Date(careGoal.startDate))) {\n      error.dueDate = 'patient.careGoal.error.dueDateMustBeAfterStartDate'\n    }\n  }\n\n  return error\n}\n","import isEmpty from 'lodash/isEmpty'\nimport { queryCache, useMutation } from 'react-query'\n\nimport PatientRepository from '../../shared/db/PatientRepository'\nimport CareGoal from '../../shared/model/CareGoal'\nimport { uuid } from '../../shared/util/uuid'\nimport validateCareGoal from '../util/validate-caregoal'\n\ninterface AddCareGoalRequest {\n  patientId: string\n  careGoal: Omit<CareGoal, 'id' | 'createdOn'>\n}\n\nasync function addCareGoal(request: AddCareGoalRequest): Promise<CareGoal[]> {\n  const error = validateCareGoal(request.careGoal)\n\n  if (isEmpty(error)) {\n    const patient = await PatientRepository.find(request.patientId)\n    const careGoals = patient.careGoals ? [...patient.careGoals] : []\n\n    const newCareGoal: CareGoal = {\n      id: uuid(),\n      createdOn: new Date(Date.now()).toISOString(),\n      ...request.careGoal,\n    }\n    careGoals.push(newCareGoal)\n\n    await PatientRepository.saveOrUpdate({\n      ...patient,\n      careGoals,\n    })\n\n    return careGoals\n  }\n\n  error.message = 'patient.careGoal.error.unableToAdd'\n  throw error\n}\n\nexport default function useAddCareGoal() {\n  return useMutation(addCareGoal, {\n    onSuccess: async (data, variables) => {\n      await queryCache.setQueryData(['care-goals', variables.patientId], data)\n    },\n    throwOnError: true,\n  })\n}\n","import { Select, Label, Alert, Row, Column } from '@hospitalrun/components'\nimport React, { useState } from 'react'\n\nimport DatePickerWithLabelFormGroup from '../../shared/components/input/DatePickerWithLabelFormGroup'\nimport { SelectOption } from '../../shared/components/input/SelectOption'\nimport TextFieldWithLabelFormGroup from '../../shared/components/input/TextFieldWithLabelFormGroup'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport CareGoal, { CareGoalStatus, CareGoalAchievementStatus } from '../../shared/model/CareGoal'\n\ninterface Error {\n  message?: string\n  description?: string\n  status?: string\n  achievementStatus?: string\n  priority?: string\n  startDate?: string\n  dueDate?: string\n  note?: string\n}\n\ninterface Props {\n  careGoal: Partial<CareGoal>\n  careGoalError?: Error\n  onChange?: (newCareGoal: Partial<CareGoal>) => void\n  disabled: boolean\n}\n\nconst CareGoalForm = (props: Props) => {\n  const { careGoal, careGoalError, disabled, onChange } = props\n  const { t } = useTranslator()\n\n  const [priority, setPriority] = useState(careGoal.priority)\n  const [status, setStatus] = useState(careGoal.status)\n  const [achievementStatus, setAchievementStatus] = useState(careGoal.achievementStatus)\n\n  const priorityOptions: SelectOption[] = [\n    { label: t('patient.careGoal.priority.low'), value: 'low' },\n    { label: t('patient.careGoal.priority.medium'), value: 'medium' },\n    { label: t('patient.careGoal.priority.high'), value: 'high' },\n  ]\n\n  const statusOptions: SelectOption[] = Object.values(CareGoalStatus).map((v) => ({\n    label: v,\n    value: v,\n  }))\n\n  const achievementsStatusOptions: SelectOption[] = Object.values(CareGoalAchievementStatus).map(\n    (v) => ({\n      label: v,\n      value: v,\n    }),\n  )\n\n  const onFieldChange = (\n    name: string,\n    value: string | CareGoalStatus | CareGoalAchievementStatus,\n  ) => {\n    if (onChange) {\n      const newCareGoal = {\n        ...careGoal,\n        [name]: value,\n      }\n      onChange(newCareGoal)\n    }\n  }\n\n  const onPriorityChange = (values: string[]) => {\n    const value = values[0] as 'low' | 'medium' | 'high'\n\n    onFieldChange('priority', value)\n    setPriority(value)\n  }\n\n  return (\n    <form aria-label=\"care-goal-form\">\n      {careGoalError?.message && <Alert color=\"danger\" message={t(careGoalError.message)} />}\n      <Row>\n        <Column sm={12}>\n          <TextFieldWithLabelFormGroup\n            isRequired\n            value={careGoal.description}\n            label={t('patient.careGoal.description')}\n            name=\"description\"\n            feedback={t(careGoalError?.description || '')}\n            isInvalid={!!careGoalError?.description}\n            isEditable={!disabled}\n            onChange={(event) => onFieldChange('description', event.currentTarget.value)}\n          />\n        </Column>\n      </Row>\n      <Row>\n        <Column sm={12}>\n          <div className=\"form-group\" data-testid=\"prioritySelect\">\n            <Label\n              title=\"This is a required input\"\n              text={t('patient.careGoal.priority.label')}\n              htmlFor=\"prioritySelect\"\n              isRequired\n            />\n            <Select\n              id=\"prioritySelect\"\n              options={priorityOptions}\n              onChange={onPriorityChange}\n              defaultSelected={priorityOptions.filter(({ value }) => value === priority)}\n              isInvalid={!!careGoalError?.priority}\n              disabled={disabled}\n            />\n          </div>\n        </Column>\n      </Row>\n      <Row>\n        <Column sm={6}>\n          <div className=\"form-group\" data-testid=\"statusSelect\">\n            <Label\n              title=\"This is a required input\"\n              text={t('patient.careGoal.status')}\n              htmlFor=\"statusSelect\"\n              isRequired\n            />\n            <Select\n              id=\"statusSelect\"\n              options={statusOptions}\n              onChange={(values) => {\n                onFieldChange('status', values[0])\n                setStatus(values[0] as CareGoalStatus)\n              }}\n              defaultSelected={statusOptions.filter(({ value }) => value === status)}\n              isInvalid={!!careGoalError?.status}\n              disabled={disabled}\n            />\n          </div>\n        </Column>\n        <Column sm={6}>\n          <div className=\"form-group\" data-testid=\"achievementStatusSelect\">\n            <Label\n              title=\"This is a required input\"\n              text={t('patient.careGoal.achievementStatus')}\n              htmlFor=\"achievementStatusSelect\"\n              isRequired\n            />\n            <Select\n              id=\"achievementStatusSelect\"\n              options={achievementsStatusOptions}\n              onChange={(values) => {\n                onFieldChange('achievementStatus', values[0])\n                setAchievementStatus(values[0] as CareGoalAchievementStatus)\n              }}\n              defaultSelected={achievementsStatusOptions.filter(\n                ({ value }) => value === achievementStatus,\n              )}\n              isInvalid={!!careGoalError?.achievementStatus}\n              disabled={disabled}\n            />\n          </div>\n        </Column>\n      </Row>\n      <Row>\n        <Column sm={6}>\n          <DatePickerWithLabelFormGroup\n            name=\"startDate\"\n            label={t('patient.careGoal.startDate')}\n            isRequired\n            value={careGoal.startDate ? new Date(careGoal.startDate) : new Date()}\n            isEditable={!disabled}\n            isInvalid={!!careGoalError?.startDate}\n            feedback={t(careGoalError?.startDate) || ''}\n            onChange={(date) => (date ? onFieldChange('startDate', date.toISOString()) : null)}\n          />\n        </Column>\n        <Column sm={6}>\n          <DatePickerWithLabelFormGroup\n            name=\"dueDate\"\n            label={t('patient.careGoal.dueDate')}\n            isRequired\n            isEditable={!disabled}\n            isInvalid={!!careGoalError?.dueDate}\n            feedback={t(careGoalError?.dueDate) || ''}\n            value={careGoal.dueDate ? new Date(careGoal.dueDate) : new Date()}\n            onChange={(date) => (date ? onFieldChange('dueDate', date.toISOString()) : null)}\n          />\n        </Column>\n      </Row>\n      <Row>\n        <Column sm={12}>\n          <TextFieldWithLabelFormGroup\n            name=\"note\"\n            label={t('patient.careGoal.note')}\n            value={careGoal.note}\n            isEditable={!disabled}\n            isInvalid={!!careGoalError?.note}\n            feedback={t(careGoalError?.note) || ''}\n            onChange={(event) => onFieldChange('note', event.currentTarget.value)}\n          />\n        </Column>\n      </Row>\n    </form>\n  )\n}\n\nCareGoalForm.defaultProps = {\n  disabled: false,\n}\n\nexport default CareGoalForm\n","import { Modal } from '@hospitalrun/components'\nimport addMonths from 'date-fns/addMonths'\nimport React, { useState, useEffect } from 'react'\n\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport CareGoal, { CareGoalStatus, CareGoalAchievementStatus } from '../../shared/model/CareGoal'\nimport Patient from '../../shared/model/Patient'\nimport useAddCareGoal from '../hooks/useAddCareGoal'\nimport { CareGoalError } from '../util/validate-caregoal'\nimport CareGoalForm from './CareGoalForm'\n\ninterface Props {\n  patient: Patient\n  show: boolean\n  onCloseButtonClick: () => void\n}\n\nconst initialCareGoalState = {\n  description: '',\n  startDate: new Date().toISOString(),\n  dueDate: addMonths(new Date(), 1).toISOString(),\n  note: '',\n  priority: 'medium',\n  status: CareGoalStatus.Accepted,\n  achievementStatus: CareGoalAchievementStatus.InProgress,\n} as CareGoal\n\nconst AddCareGoalModal = (props: Props) => {\n  const { t } = useTranslator()\n  const { patient, show, onCloseButtonClick } = props\n  const [mutate] = useAddCareGoal()\n  const [careGoal, setCareGoal] = useState(initialCareGoalState)\n  const [careGoalError, setCareGoalError] = useState<CareGoalError | undefined>(undefined)\n\n  useEffect(() => {\n    setCareGoal(initialCareGoalState)\n  }, [show])\n\n  const onClose = () => {\n    onCloseButtonClick()\n  }\n\n  const onCareGoalChange = (newCareGoal: Partial<CareGoal>) => {\n    setCareGoal(newCareGoal as CareGoal)\n  }\n\n  const onSaveButtonClick = async () => {\n    try {\n      await mutate({ patientId: patient.id, careGoal })\n      onClose()\n    } catch (e) {\n      setCareGoalError(e)\n    }\n  }\n\n  const body = (\n    <CareGoalForm careGoal={careGoal} careGoalError={careGoalError} onChange={onCareGoalChange} />\n  )\n\n  return (\n    <Modal\n      show={show}\n      toggle={onClose}\n      title={t('patient.careGoal.new')}\n      body={body}\n      closeButton={{\n        children: t('actions.cancel'),\n        color: 'danger',\n        onClick: onClose,\n      }}\n      successButton={{\n        children: t('patient.careGoal.new'),\n        color: 'success',\n        icon: 'add',\n        iconLocation: 'left',\n        onClick: onSaveButtonClick,\n      }}\n    />\n  )\n}\n\nexport default AddCareGoalModal\n","import { useQuery } from 'react-query'\n\nimport PatientRepository from '../../shared/db/PatientRepository'\nimport CareGoal from '../../shared/model/CareGoal'\n\nasync function getCareGoal(_: string, patientId: string, careGoalId: string): Promise<CareGoal> {\n  const patient = await PatientRepository.find(patientId)\n  const maybeCareGoal = patient.careGoals?.find((c) => c.id === careGoalId)\n\n  if (!maybeCareGoal) {\n    throw new Error('Care Goal not found')\n  }\n\n  return maybeCareGoal\n}\n\nexport default function useCareGoal(patientId: string, careGoalId: string) {\n  return useQuery(['care-goals', patientId, careGoalId], getCareGoal)\n}\n","import React from 'react'\nimport { useParams } from 'react-router'\n\nimport Loading from '../../shared/components/Loading'\nimport useCareGoal from '../hooks/useCareGoal'\nimport CareGoalForm from './CareGoalForm'\n\nconst ViewCareGoal = () => {\n  const { careGoalId, id: patientId } = useParams()\n  const { data: careGoal, status } = useCareGoal(patientId, careGoalId)\n\n  if (careGoal === undefined || status === 'loading') {\n    return <Loading />\n  }\n\n  return <CareGoalForm careGoal={careGoal} disabled />\n}\n\nexport default ViewCareGoal\n","import { useQuery } from 'react-query'\n\nimport PatientRepository from '../../shared/db/PatientRepository'\nimport CareGoal from '../../shared/model/CareGoal'\n\nasync function fetchPatientCareGoals(_: string, patientId: string): Promise<CareGoal[]> {\n  const patient = await PatientRepository.find(patientId)\n  return patient.careGoals || []\n}\n\nexport default function usePatientCareGoals(patientId: string) {\n  return useQuery(['care-goals', patientId], fetchPatientCareGoals)\n}\n","import { Alert, Table } from '@hospitalrun/components'\nimport format from 'date-fns/format'\nimport React from 'react'\nimport { useHistory } from 'react-router'\n\nimport Loading from '../../shared/components/Loading'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport usePatientCareGoals from '../hooks/usePatientCareGoals'\n\ninterface Props {\n  patientId: string\n}\n\nconst CareGoalTable = (props: Props) => {\n  const { patientId } = props\n  const history = useHistory()\n  const { t } = useTranslator()\n  const { data, status } = usePatientCareGoals(patientId)\n\n  if (data === undefined || status === 'loading') {\n    return <Loading />\n  }\n\n  if (data.length === 0) {\n    return (\n      <Alert\n        color=\"warning\"\n        title={t('patient.careGoals.warning.noCareGoals')}\n        message={t('patient.careGoals.warning.addCareGoalAbove')}\n      />\n    )\n  }\n\n  return (\n    <Table\n      getID={(row) => row.id}\n      data={data}\n      columns={[\n        { label: t('patient.careGoal.description'), key: 'description' },\n        {\n          label: t('patient.careGoal.startDate'),\n          key: 'startDate',\n          formatter: (row) => format(new Date(row.startDate), 'yyyy-MM-dd'),\n        },\n        {\n          label: t('patient.careGoal.dueDate'),\n          key: 'dueDate',\n          formatter: (row) => format(new Date(row.dueDate), 'yyyy-MM-dd'),\n        },\n        {\n          label: t('patient.careGoal.status'),\n          key: 'status',\n        },\n      ]}\n      actionsHeaderText={t('actions.label')}\n      actions={[\n        {\n          label: t('actions.view'),\n          action: (row) => history.push(`/patients/${patientId}/care-goals/${row.id}`),\n        },\n      ]}\n    />\n  )\n}\n\nexport default CareGoalTable\n","export enum CarePlanStatus {\n  Draft = 'draft',\n  Active = 'active',\n  OnHold = 'on hold',\n  Revoked = 'revoked',\n  Completed = 'completed',\n  Unknown = 'unknown',\n}\n\nexport enum CarePlanIntent {\n  Proposal = 'proposal',\n  Plan = 'plan',\n  Order = 'order',\n  Option = 'option',\n}\n\nexport default interface CarePlan {\n  id: string\n  status: CarePlanStatus\n  intent: CarePlanIntent\n  title: string\n  description: string\n  startDate: string\n  endDate: string\n  createdOn: string\n  diagnosisId: string\n  note: string\n}\n","import React from 'react'\nimport { useParams } from 'react-router-dom'\n\nimport CareGoalTable from './CareGoalTable'\n\nconst ViewCareGoals = () => {\n  const { id } = useParams()\n\n  return <CareGoalTable patientId={id} />\n}\n\nexport default ViewCareGoals\n","import { Button } from '@hospitalrun/components'\nimport React, { useState } from 'react'\nimport { useSelector } from 'react-redux'\nimport { useParams, Route, Switch } from 'react-router-dom'\n\nimport Loading from '../../shared/components/Loading'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport Permissions from '../../shared/model/Permissions'\nimport { RootState } from '../../shared/store'\nimport usePatient from '../hooks/usePatient'\nimport AddCareGoalModal from './AddCareGoalModal'\nimport ViewCareGoal from './ViewCareGoal'\nimport ViewCareGoals from './ViewCareGoals'\n\nconst CareGoalTab = () => {\n  const { id: patientId } = useParams()\n  const { t } = useTranslator()\n  const { permissions } = useSelector((state: RootState) => state.user)\n  const { data, status } = usePatient(patientId)\n  const [showAddCareGoalModal, setShowAddCareGoalModal] = useState(false)\n\n  if (data === undefined || status === 'loading') {\n    return <Loading />\n  }\n\n  return (\n    <>\n      <div className=\"row\">\n        <div className=\"col-md-12 d-flex justify-content-end\">\n          {permissions.includes(Permissions.AddCareGoal) && (\n            <Button\n              outlined\n              color=\"success\"\n              icon=\"add\"\n              iconLocation=\"left\"\n              onClick={() => setShowAddCareGoalModal(true)}\n            >\n              {t('patient.careGoal.new')}\n            </Button>\n          )}\n        </div>\n      </div>\n      <br />\n      <Switch>\n        <Route exact path=\"/patients/:id/care-goals\">\n          <ViewCareGoals />\n        </Route>\n        <Route exact path=\"/patients/:id/care-goals/:careGoalId\">\n          <ViewCareGoal />\n        </Route>\n      </Switch>\n      <AddCareGoalModal\n        patient={data}\n        show={showAddCareGoalModal}\n        onCloseButtonClick={() => setShowAddCareGoalModal(false)}\n      />\n    </>\n  )\n}\n\nexport default CareGoalTab\n","import isBefore from 'date-fns/isBefore'\n\nimport CarePlan from '../../shared/model/CarePlan'\n\nexport class CarePlanError extends Error {\n  message: string\n\n  title?: string\n\n  description?: string\n\n  status?: string\n\n  intent?: string\n\n  startDate?: string\n\n  endDate?: string\n\n  note?: string\n\n  condition?: string\n\n  constructor(\n    message: string,\n    title: string,\n    description: string,\n    status: string,\n    intent: string,\n    startDate: string,\n    endDate: string,\n    note: string,\n    condition: string,\n  ) {\n    super(message)\n    this.message = message\n    this.title = title\n    this.description = description\n    this.status = status\n    this.intent = intent\n    this.startDate = startDate\n    this.endDate = endDate\n    this.note = note\n    this.condition = condition\n  }\n}\n\nexport default function validateCarePlan(carePlan: Partial<CarePlan>): CarePlanError {\n  const error = {} as CarePlanError\n\n  if (!carePlan.title) {\n    error.title = 'patient.carePlan.error.titleRequired'\n  }\n\n  if (!carePlan.description) {\n    error.description = 'patient.carePlan.error.descriptionRequired'\n  }\n\n  if (!carePlan.status) {\n    error.status = 'patient.carePlan.error.statusRequired'\n  }\n\n  if (!carePlan.intent) {\n    error.intent = 'patient.carePlan.error.intentRequired'\n  }\n\n  if (!carePlan.startDate) {\n    error.startDate = 'patient.carePlan.error.startDateRequired'\n  }\n\n  if (!carePlan.endDate) {\n    error.endDate = 'patient.carePlan.error.endDateRequired'\n  }\n\n  if (carePlan.startDate && carePlan.endDate) {\n    if (isBefore(new Date(carePlan.endDate), new Date(carePlan.startDate))) {\n      error.endDate = 'patient.carePlan.error.endDateMustBeAfterStartDate'\n    }\n  }\n\n  if (!carePlan.diagnosisId) {\n    error.condition = 'patient.carePlan.error.conditionRequired'\n  }\n\n  return error\n}\n","import isEmpty from 'lodash/isEmpty'\nimport { queryCache, useMutation } from 'react-query'\n\nimport PatientRepository from '../../shared/db/PatientRepository'\nimport CarePlan from '../../shared/model/CarePlan'\nimport { uuid } from '../../shared/util/uuid'\nimport validateCarePlan from '../util/validate-careplan'\n\ninterface AddCarePlanRequest {\n  patientId: string\n  carePlan: Omit<CarePlan, 'id' | 'createdOn'>\n}\n\nasync function addCarePlan(request: AddCarePlanRequest): Promise<CarePlan[]> {\n  const error = validateCarePlan(request.carePlan)\n\n  if (isEmpty(error)) {\n    const patient = await PatientRepository.find(request.patientId)\n    const carePlans = patient.carePlans ? [...patient.carePlans] : []\n\n    const newCarePlan: CarePlan = {\n      id: uuid(),\n      createdOn: new Date(Date.now()).toISOString(),\n      ...request.carePlan,\n    }\n    carePlans.push(newCarePlan)\n\n    await PatientRepository.saveOrUpdate({\n      ...patient,\n      carePlans,\n    })\n\n    return carePlans\n  }\n\n  error.message = 'patient.carePlan.error.unableToAdd'\n  throw error\n}\n\nexport default function useAddCarePlan() {\n  return useMutation(addCarePlan, {\n    onSuccess: async (data, variables) => {\n      await queryCache.setQueryData(['care-plans', variables.patientId], data)\n    },\n    throwOnError: true,\n  })\n}\n","import { Select, Label, Alert, Column, Row } from '@hospitalrun/components'\nimport React, { useState } from 'react'\n\nimport DatePickerWithLabelFormGroup from '../../shared/components/input/DatePickerWithLabelFormGroup'\nimport { SelectOption } from '../../shared/components/input/SelectOption'\nimport TextFieldWithLabelFormGroup from '../../shared/components/input/TextFieldWithLabelFormGroup'\nimport TextInputWithLabelFormGroup from '../../shared/components/input/TextInputWithLabelFormGroup'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport CarePlan, { CarePlanIntent, CarePlanStatus } from '../../shared/model/CarePlan'\nimport Patient from '../../shared/model/Patient'\n\ninterface Error {\n  message?: string\n  title?: string\n  description?: string\n  status?: string\n  intent?: string\n  startDate?: string\n  endDate?: string\n  note?: string\n  condition?: string\n}\ninterface Props {\n  patient: Patient\n  carePlan: Partial<CarePlan>\n  carePlanError?: Error\n  onChange?: (newCarePlan: Partial<CarePlan>) => void\n  disabled: boolean\n}\n\nconst CarePlanForm = (props: Props) => {\n  const { t } = useTranslator()\n  const { patient, carePlan, carePlanError, disabled, onChange } = props\n\n  const [condition, setCondition] = useState(carePlan.diagnosisId)\n  const [status, setStatus] = useState(carePlan.status)\n  const [intent, setIntent] = useState(carePlan.intent)\n\n  const onFieldChange = (name: string, value: string | CarePlanStatus | CarePlanIntent) => {\n    if (onChange) {\n      const newCarePlan = {\n        ...carePlan,\n        [name]: value,\n      }\n      onChange(newCarePlan)\n    }\n  }\n\n  const conditionOptions: SelectOption[] =\n    patient.diagnoses?.map((d) => ({ label: d.name, value: d.id })) || []\n\n  const statusOptions: SelectOption[] = Object.values(CarePlanStatus).map((v) => ({\n    label: v,\n    value: v,\n  }))\n\n  const intentOptions: SelectOption[] = Object.values(CarePlanIntent).map((v) => ({\n    label: v,\n    value: v,\n  }))\n\n  return (\n    <form aria-label=\"form\">\n      {carePlanError?.message && <Alert color=\"danger\" message={t(carePlanError.message)} />}\n      <Row>\n        <Column sm={12}>\n          <TextInputWithLabelFormGroup\n            isRequired\n            value={carePlan.title}\n            label={t('patient.carePlan.title')}\n            name=\"title\"\n            feedback={t(carePlanError?.title || '')}\n            isInvalid={!!carePlanError?.title}\n            isEditable={!disabled}\n            onChange={(event) => onFieldChange('title', event.currentTarget.value)}\n          />\n        </Column>\n      </Row>\n      <Row>\n        <Column sm={12}>\n          <TextFieldWithLabelFormGroup\n            isRequired\n            value={carePlan.description}\n            label={t('patient.carePlan.description')}\n            name=\"description\"\n            feedback={t(carePlanError?.description || '')}\n            isInvalid={!!carePlanError?.description}\n            isEditable={!disabled}\n            onChange={(event) => onFieldChange('description', event.currentTarget.value)}\n          />\n        </Column>\n      </Row>\n      <Row>\n        <Column sm={12}>\n          {/* add feedback in next round */}\n          <div className=\"form-group\" data-testid=\"conditionSelect\">\n            <Label\n              text={t('patient.carePlan.condition')}\n              htmlFor=\"conditionSelect\"\n              title=\"This is a required input\"\n              isRequired\n            />\n            <Select\n              id=\"conditionSelect\"\n              options={conditionOptions}\n              defaultSelected={conditionOptions.filter(({ value }) => value === condition)}\n              onChange={(values) => {\n                onFieldChange('diagnosisId', values[0])\n                setCondition(values[0])\n              }}\n              disabled={disabled}\n              isInvalid={!!carePlanError?.condition}\n            />\n          </div>\n        </Column>\n      </Row>\n      <Row>\n        <Column sm={6}>\n          <div className=\"form-group\" data-testid=\"statusSelect\">\n            <Label\n              text={t('patient.carePlan.status')}\n              htmlFor=\"statusSelect\"\n              title=\"This is a required input\"\n              isRequired\n            />\n            <Select\n              id=\"statusSelect\"\n              options={statusOptions}\n              defaultSelected={statusOptions.filter(({ value }) => value === status)}\n              onChange={(values) => {\n                onFieldChange('status', values[0])\n                setStatus(values[0] as CarePlanStatus)\n              }}\n              disabled={disabled}\n              isInvalid={!!carePlanError?.status}\n            />\n          </div>\n        </Column>\n        <Column sm={6}>\n          <div className=\"form-group\" data-testid=\"intentSelect\">\n            <Label\n              text={t('patient.carePlan.intent')}\n              htmlFor=\"intentSelect\"\n              title=\"This is a required input\"\n              isRequired\n            />\n            <Select\n              id=\"intentSelect\"\n              options={intentOptions}\n              defaultSelected={intentOptions.filter(({ value }) => value === intent)}\n              onChange={(values) => {\n                onFieldChange('intent', values[0])\n                setIntent(values[0] as CarePlanIntent)\n              }}\n              disabled={disabled}\n              isInvalid={!!carePlanError?.intent}\n            />\n          </div>\n        </Column>\n      </Row>\n      <Row>\n        <Column sm={6}>\n          <DatePickerWithLabelFormGroup\n            isRequired\n            value={carePlan.startDate ? new Date(carePlan.startDate) : new Date()}\n            label={t('patient.carePlan.startDate')}\n            name=\"startDate\"\n            feedback={t(carePlanError?.startDate || '')}\n            isInvalid={!!carePlanError?.startDate}\n            isEditable={!disabled}\n            onChange={(date) => onFieldChange('startDate', date.toISOString())}\n          />\n        </Column>\n        <Column sm={6}>\n          <DatePickerWithLabelFormGroup\n            isRequired\n            value={carePlan.endDate ? new Date(carePlan.endDate) : new Date()}\n            label={t('patient.carePlan.endDate')}\n            name=\"endDate\"\n            feedback={t(carePlanError?.endDate || '')}\n            isInvalid={!!carePlanError?.endDate}\n            isEditable={!disabled}\n            onChange={(date) => onFieldChange('endDate', date.toISOString())}\n          />\n        </Column>\n      </Row>\n      <Row>\n        <Column sm={12}>\n          <TextFieldWithLabelFormGroup\n            value={carePlan.note}\n            label={t('patient.carePlan.note')}\n            name=\"note\"\n            feedback={carePlanError?.note}\n            isInvalid={!!carePlanError?.note}\n            isEditable={!disabled}\n            onChange={(event) => onFieldChange('note', event.currentTarget.value)}\n          />\n        </Column>\n      </Row>\n    </form>\n  )\n}\n\nCarePlanForm.defaultProps = {\n  disabled: false,\n}\n\nexport default CarePlanForm\n","import { Modal } from '@hospitalrun/components'\nimport addMonths from 'date-fns/addMonths'\nimport React, { useState, useEffect } from 'react'\n\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport CarePlan, { CarePlanIntent, CarePlanStatus } from '../../shared/model/CarePlan'\nimport Patient from '../../shared/model/Patient'\nimport useAddCarePlan from '../hooks/useAddCarePlan'\nimport { CarePlanError } from '../util/validate-careplan'\nimport CarePlanForm from './CarePlanForm'\n\ninterface Props {\n  patient: Patient\n  show: boolean\n  onCloseButtonClick: () => void\n}\n\nconst initialCarePlanState = {\n  title: '',\n  description: '',\n  startDate: new Date().toISOString(),\n  endDate: addMonths(new Date(), 1).toISOString(),\n  note: '',\n  diagnosisId: '',\n  status: CarePlanStatus.Active,\n  intent: CarePlanIntent.Plan,\n}\n\nconst AddCarePlanModal = (props: Props) => {\n  const { show, onCloseButtonClick, patient } = props\n  const { t } = useTranslator()\n  const [mutate] = useAddCarePlan()\n  const [carePlan, setCarePlan] = useState(initialCarePlanState)\n  const [carePlanError, setCarePlanError] = useState<CarePlanError | undefined>(undefined)\n\n  useEffect(() => {\n    setCarePlan(initialCarePlanState)\n  }, [show])\n\n  const onCarePlanChange = (newCarePlan: Partial<CarePlan>) => {\n    setCarePlan(newCarePlan as CarePlan)\n  }\n\n  const onClose = () => {\n    onCloseButtonClick()\n  }\n\n  const onSaveButtonClick = async () => {\n    try {\n      await mutate({ patientId: patient.id, carePlan })\n      onClose()\n    } catch (e) {\n      setCarePlanError(e)\n    }\n  }\n\n  const body = (\n    <CarePlanForm\n      patient={patient}\n      carePlan={carePlan}\n      carePlanError={carePlanError}\n      onChange={onCarePlanChange}\n    />\n  )\n  return (\n    <Modal\n      show={show}\n      toggle={onClose}\n      title={t('patient.carePlan.new')}\n      body={body}\n      closeButton={{\n        children: t('actions.cancel'),\n        color: 'danger',\n        onClick: onClose,\n      }}\n      successButton={{\n        children: t('patient.carePlan.new'),\n        color: 'success',\n        icon: 'add',\n        iconLocation: 'left',\n        onClick: onSaveButtonClick,\n      }}\n    />\n  )\n}\n\nexport default AddCarePlanModal\n","import { useQuery } from 'react-query'\n\nimport PatientRepository from '../../shared/db/PatientRepository'\nimport CarePlan from '../../shared/model/CarePlan'\n\nasync function getCarePlan(_: string, patientId: string, allergyId: string): Promise<CarePlan> {\n  const patient = await PatientRepository.find(patientId)\n  const maybeCarePlan = patient.carePlans?.find((a) => a.id === allergyId)\n  if (!maybeCarePlan) {\n    throw new Error('Care Plan not found')\n  }\n\n  return maybeCarePlan\n}\n\nexport default function useCarePlan(patientId: string, carePlanId: string) {\n  return useQuery(['care-plans', patientId, carePlanId], getCarePlan)\n}\n","import React from 'react'\nimport { useParams } from 'react-router-dom'\n\nimport Loading from '../../shared/components/Loading'\nimport useCarePlan from '../hooks/useCarePlan'\nimport usePatient from '../hooks/usePatient'\nimport CarePlanForm from './CarePlanForm'\n\nconst ViewCarePlan = () => {\n  const { carePlanId, id: patientId } = useParams()\n  const { data: patient, status: patientStatus } = usePatient(patientId)\n  const { data: carePlan, status: carePlanStatus } = useCarePlan(patientId, carePlanId)\n\n  if (\n    patient === undefined ||\n    carePlan === undefined ||\n    patientStatus === 'loading' ||\n    carePlanStatus === 'loading'\n  ) {\n    return <Loading />\n  }\n\n  if (carePlan) {\n    return (\n      <>\n        <h2>{carePlan.title}</h2>\n        <CarePlanForm patient={patient} carePlan={carePlan} disabled />\n      </>\n    )\n  }\n  return <></>\n}\n\nexport default ViewCarePlan\n","import { useQuery } from 'react-query'\n\nimport PatientRepository from '../../shared/db/PatientRepository'\nimport CarePlan from '../../shared/model/CarePlan'\n\nasync function fetchPatientCarePlans(_: string, patientId: string): Promise<CarePlan[]> {\n  const patient = await PatientRepository.find(patientId)\n  return patient.carePlans || []\n}\n\nexport default function usePatientCarePlans(patientId: string) {\n  return useQuery(['care-plans', patientId], fetchPatientCarePlans)\n}\n","import { Alert, Table } from '@hospitalrun/components'\nimport format from 'date-fns/format'\nimport React from 'react'\nimport { useHistory } from 'react-router-dom'\n\nimport Loading from '../../shared/components/Loading'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport usePatientCarePlans from '../hooks/usePatientCarePlans'\n\ninterface Props {\n  patientId: string\n}\n\nconst CarePlanTable = (props: Props) => {\n  const { patientId } = props\n  const history = useHistory()\n  const { t } = useTranslator()\n  const { data, status } = usePatientCarePlans(patientId)\n\n  if (data === undefined || status === 'loading') {\n    return <Loading />\n  }\n\n  if (data.length === 0) {\n    return (\n      <Alert\n        color=\"warning\"\n        title={t('patient.carePlans.warning.noCarePlans')}\n        message={t('patient.carePlans.warning.addCarePlanAbove')}\n      />\n    )\n  }\n\n  return (\n    <Table\n      getID={(row) => row.id}\n      data={data}\n      columns={[\n        { label: t('patient.carePlan.title'), key: 'title' },\n        {\n          label: t('patient.carePlan.startDate'),\n          key: 'startDate',\n          formatter: (row) => format(new Date(row.startDate), 'yyyy-MM-dd'),\n        },\n        {\n          label: t('patient.carePlan.endDate'),\n          key: 'endDate',\n          formatter: (row) => format(new Date(row.endDate), 'yyyy-MM-dd'),\n        },\n        { label: t('patient.carePlan.status'), key: 'status' },\n      ]}\n      actionsHeaderText={t('actions.label')}\n      actions={[\n        {\n          label: t('actions.view'),\n          action: (row) => history.push(`/patients/${patientId}/care-plans/${row.id}`),\n        },\n      ]}\n    />\n  )\n}\n\nexport default CarePlanTable\n","export enum DiagnosisStatus {\n  Active = 'active',\n  Recurrence = 'recurrence',\n  Relapse = 'relapse',\n  Inactive = 'inactive',\n  Remission = 'remission',\n  Resolved = 'resolved',\n}\n\nexport default interface Diagnosis {\n  id: string\n  name: string\n  diagnosisDate: string\n  onsetDate: string\n  abatementDate: string\n  status: DiagnosisStatus\n  note: string\n  visit: string\n}\n","import React from 'react'\nimport { useParams } from 'react-router-dom'\n\nimport CarePlanTable from './CarePlanTable'\n\nconst ViewCarePlans = () => {\n  const { id } = useParams()\n\n  return <CarePlanTable patientId={id} />\n}\n\nexport default ViewCarePlans\n","import { Button } from '@hospitalrun/components'\nimport React, { useState } from 'react'\nimport { useSelector } from 'react-redux'\nimport { Route, Switch, useParams } from 'react-router-dom'\n\nimport Loading from '../../shared/components/Loading'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport Permissions from '../../shared/model/Permissions'\nimport { RootState } from '../../shared/store'\nimport usePatient from '../hooks/usePatient'\nimport AddCarePlanModal from './AddCarePlanModal'\nimport ViewCarePlan from './ViewCarePlan'\nimport ViewCarePlans from './ViewCarePlans'\n\nconst CarePlanTab = () => {\n  const { id: patientId } = useParams()\n  const { t } = useTranslator()\n  const { permissions } = useSelector((state: RootState) => state.user)\n  const { data, status } = usePatient(patientId)\n  const [showAddCarePlanModal, setShowAddCarePlanModal] = useState(false)\n\n  if (data === undefined || status === 'loading') {\n    return <Loading />\n  }\n\n  return (\n    <>\n      <div className=\"row\">\n        <div className=\"col-md-12 d-flex justify-content-end\">\n          {permissions.includes(Permissions.AddCarePlan) && (\n            <Button\n              outlined\n              color=\"success\"\n              icon=\"add\"\n              iconLocation=\"left\"\n              onClick={() => setShowAddCarePlanModal(true)}\n            >\n              {t('patient.carePlan.new')}\n            </Button>\n          )}\n        </div>\n      </div>\n      <br />\n      <Switch>\n        <Route exact path=\"/patients/:id/care-plans\">\n          <ViewCarePlans />\n        </Route>\n        <Route exact path=\"/patients/:id/care-plans/:carePlanId\">\n          <ViewCarePlan />\n        </Route>\n      </Switch>\n      <AddCarePlanModal\n        patient={data}\n        show={showAddCarePlanModal}\n        onCloseButtonClick={() => setShowAddCarePlanModal(false)}\n      />\n    </>\n  )\n}\n\nexport default CarePlanTab\n","import Diagnosis from '../../shared/model/Diagnosis'\n\ninterface AddDiagnosisError {\n  message?: string\n  name?: string\n  diagnosisDate?: string\n  onsetDate?: string\n  abatementDate?: string\n  status?: string\n  note?: string\n}\n\nexport class DiagnosisError extends Error {\n  nameError?: string\n\n  constructor(message: string, name: string) {\n    super(message)\n    this.nameError = name\n    Object.setPrototypeOf(this, DiagnosisError.prototype)\n  }\n}\n\nexport default function validateDiagnosis(diagnosis: Partial<Diagnosis>) {\n  const error: AddDiagnosisError = {}\n\n  if (!diagnosis.name) {\n    error.name = 'patient.diagnoses.error.nameRequired'\n  }\n\n  if (!diagnosis.diagnosisDate) {\n    error.diagnosisDate = 'patient.diagnoses.error.dateRequired'\n  }\n\n  if (!diagnosis.onsetDate) {\n    error.onsetDate = 'patient.diagnoses.error.dateRequired'\n  }\n\n  if (!diagnosis.abatementDate) {\n    error.abatementDate = 'patient.diagnoses.error.dateRequired'\n  }\n\n  if (!diagnosis.status) {\n    error.status = 'patient.diagnoses.error.statusRequired'\n  }\n  return error\n}\n","import isEmpty from 'lodash/isEmpty'\nimport { queryCache, useMutation } from 'react-query'\n\nimport PatientRepository from '../../shared/db/PatientRepository'\nimport Diagnosis from '../../shared/model/Diagnosis'\nimport { uuid } from '../../shared/util/uuid'\nimport validateDiagnosis from '../util/validate-diagnosis'\n\ninterface AddDiagnosisRequest {\n  patientId: string\n  diagnosis: Omit<Diagnosis, 'id'>\n}\n\nasync function addDiagnosis(request: AddDiagnosisRequest): Promise<Diagnosis[]> {\n  const error = validateDiagnosis(request.diagnosis)\n  if (isEmpty(error)) {\n    const patient = await PatientRepository.find(request.patientId)\n    const diagnoses = patient.diagnoses ? [...patient.diagnoses] : []\n    const newDiagnosis: Diagnosis = {\n      id: uuid(),\n      ...request.diagnosis,\n    }\n    diagnoses.push(newDiagnosis)\n    await PatientRepository.saveOrUpdate({ ...patient, diagnoses })\n    return diagnoses\n  }\n  throw error\n}\n\nexport default function useAddPatientDiagnosis() {\n  return useMutation(addDiagnosis, {\n    onSuccess: async (data, variables) => {\n      await queryCache.setQueryData(['diagnoses', variables.patientId], data)\n    },\n    throwOnError: true,\n  })\n}\n","import actions from './actions'\nimport dashboard from './dashboard'\nimport medications from './medications'\nimport patient from './patient'\nimport patients from './patients'\nimport settings from './settings'\n\nexport default {\n  ...actions,\n  ...dashboard,\n  ...patient,\n  ...patients,\n  ...settings,\n  ...medications,\n}\n","export default {\n  actions: {\n    edit: '',\n    save: '',\n    cancel: '',\n    new: '',\n    list: '',\n  },\n}\n","export default {\n  dashboard: {\n    label: ' ',\n  },\n}\n","export default {\n  patient: {\n    firstName: ' ',\n    lastName: '',\n    medications: {\n      label: '',\n      new: '  ',\n      warning: {\n        noMedications: ' ',\n      },\n      noMedicationsMessage: '     .',\n    },\n  },\n}\n","export default {\n  patients: {\n    label: '',\n    viewPatients: ' ',\n    noPatients: '   ,      !',\n    viewPatient: ' ',\n    editPatient: ' ',\n    newPatient: ' ',\n  },\n}\n","export default {\n  settings: {},\n}\n","export default {\n  medications: {\n    label: '',\n    filterTitle: '  ',\n    search: '  ',\n    status: {\n      draft: '',\n      active: '',\n      onHold: ' ',\n      cancelled: '',\n      completed: '',\n      enteredInError: ' ',\n      stopped: '',\n      unknown: '',\n    },\n    intent: {\n      proposal: '',\n      plan: '',\n      order: '',\n      originalOrder: ' ',\n      reflexOrder: ' ',\n      fillerOrder: ' ',\n      instanceOrder: ' ',\n      option: '',\n    },\n    priority: {\n      routine: '',\n      urgent: '',\n      asap: '   ',\n      stat: '',\n    },\n    filter: {\n      all: ' ',\n    },\n    requests: {\n      label: ' ',\n      new: ' ',\n      view: '  Medication',\n      cancel: ' ',\n      complete: ' ',\n      error: {\n        unableToRequest: '   .',\n        unableToComplete: '   .',\n        quantityRequired: ' .',\n        unitRequired: ' .',\n      },\n    },\n    medication: {\n      medication: '',\n      for: '  ',\n      status: '',\n      intent: '',\n      priority: '',\n      notes: '',\n      quantity: '',\n      quantityValue: '',\n      quantityUnit: '',\n      requestedOn: ' ',\n      requestedBy: ' ',\n      completedOn: ' ',\n      canceledOn: '  ',\n      patient: '',\n    },\n  },\n}\n","import actions from './actions'\nimport dashboard from './dashboard'\nimport incidents from './incidents'\nimport labs from './labs'\nimport medications from './medications'\nimport patient from './patient'\nimport patients from './patients'\nimport scheduling from './scheduling'\nimport settings from './settings'\nimport sex from './sex'\nimport states from './states'\n\nexport default {\n  ...actions,\n  ...dashboard,\n  ...patient,\n  ...patients,\n  ...settings,\n  ...scheduling,\n  ...states,\n  ...sex,\n  ...labs,\n  ...incidents,\n  ...medications,\n}\n","export default {\n  actions: {\n    label: 'Aktionen',\n    edit: 'Bearbeiten',\n    save: 'Speichern',\n    update: 'Aktualisieren',\n    complete: 'Komplett',\n    delete: 'Lschen',\n    cancel: 'Stornieren',\n    new: 'Neu',\n    list: 'Liste',\n    search: 'Suche',\n    confirmDelete: 'Besttigung der Lschung',\n  },\n}\n","export default {\n  dashboard: {\n    label: 'Dashboard',\n  },\n}\n","export default {\n  patient: {\n    code: 'Patient Code',\n    firstName: 'Vorname',\n    lastName: 'Nachname',\n    suffix: 'Suffix',\n    prefix: 'Prfix',\n    givenName: 'Rufname',\n    familyName: 'Familienname',\n    dateOfBirth: 'Geburtsdatum',\n    approximateDateOfBirth: 'Ungefhres Geburtsdatum',\n    age: 'Alter',\n    approximateAge: 'Ungefhres Alter',\n    placeOfBirth: 'Geburtsort',\n    sex: 'Geschlecht',\n    phoneNumber: 'Telefonnummer',\n    email: 'E-mail',\n    address: 'Addresse',\n    occupation: 'Beruf',\n    type: 'Patiententyp',\n    preferredLanguage: 'Bevorzugte Sprache',\n    basicInformation: 'Grundinformation',\n    generalInformation: 'Allgemeine Information',\n    contactInformation: 'Kontakt Information',\n    unknownDateOfBirth: 'Unbekannt',\n    relatedPerson: 'Verwandte Person',\n    relatedPersons: {\n      error: {\n        unableToAddRelatedPerson: 'Neue verwandte Person kann nicht hinzugefgt werden.',\n        relatedPersonRequired: 'Verwandte Person ist erforderlich.',\n        relationshipTypeRequired: 'Beziehungstyp ist erforderlich.',\n      },\n      label: 'Verwandte Personen',\n      new: 'Neue Verwandte Person',\n      add: 'Verwandte Person hinzufgen',\n      relationshipType: 'Beziehungstyp',\n      warning: {\n        noRelatedPersons: 'Keine verwandten Personen',\n      },\n      addRelatedPersonAbove: 'Fgen Sie ber den Button oben eine verwandte Person hinzu.',\n    },\n    appointments: {\n      new: 'Termin hinzufgen',\n    },\n    allergies: {\n      label: 'Allergien',\n      allergyName: 'Name der Allergie',\n      new: 'Allergie hinzufgen',\n      error: {\n        nameRequired: 'Name ist erforderlich.',\n        unableToAdd: 'Allergie konnte nicht hinzugefgt werden.',\n      },\n      warning: {\n        noAllergies: 'Keine Allergien',\n      },\n      addAllergyAbove: 'Fgen Sie ber den Button oben eine Allergie hinzu.',\n      successfullyAdded: 'Erfolgreich eine neue Allergie hinzugefgt!',\n    },\n    diagnoses: {\n      label: 'Diagnosen',\n      new: 'Diagnose hinzufgen',\n      diagnosisName: 'Name',\n      diagnosisDate: 'Datum',\n      warning: {\n        noDiagnoses: 'Keine Diagnosen',\n      },\n      error: {\n        nameRequired: 'Name der Diagnose ist erforderlich.',\n        dateRequired: 'Diagnosedatum ist erforderlich.',\n        unableToAdd: 'Diagnose konnte nicht hinzugefgt werden.',\n      },\n      addDiagnosisAbove: 'Fgen Sie ber den Button oben eine Diagnose hinzu.',\n      successfullyAdded: 'Erfolgreich eine neue Diagnose hinzugefgt!',\n    },\n    note: 'Notizen',\n    notes: {\n      label: 'Notizen',\n      new: 'Neue Notiz hinzufgen',\n      warning: {\n        noNotes: 'Keine Notizen',\n      },\n      error: {\n        noteRequired: 'Notiz ist erforderlich.',\n        unableToAdd: 'Unable to add new note.',\n      },\n      addNoteAbove: 'Fgen Sie ber den Button oben eine Notiz hinzu.',\n    },\n    labs: {\n      label: 'Labore',\n      new: 'Neues Labor hinzufgen',\n      warning: {\n        noLabs: 'Keine Labore',\n      },\n      noLabsMessage: 'Keine Laboranfragen fr diese Person.',\n    },\n    medications: {\n      label: 'Medications',\n      new: 'Neue Medikamente hinzufgen',\n      warning: {\n        noMedications: 'Keine Medikamente',\n      },\n      noMedicationsMessage: 'Keine Medikamentenanfragen fr diese Person.',\n    },\n    types: {\n      charity: 'Charity',\n      private: 'Privat',\n    },\n    errors: {\n      createPatientError: 'Neuer Patient konnte nicht erstellt werden.',\n      updatePatientError: 'Patient konnte nicht aktualisiert werden.',\n      patientGivenNameFeedback: 'Rufname ist erforderlich.',\n      patientDateOfBirthFeedback: 'Das Geburtsdatum kann nicht in der Zukunft liegen',\n      patientNumInSuffixFeedback: 'Kann keine Zahlen enthalten.',\n      patientNumInPrefixFeedback: 'Kann keine Zahlen enthalten.',\n      patientNumInFamilyNameFeedback: 'Kann keine Zahlen enthalten.',\n      patientNumInPreferredLanguageFeedback: 'Kann keine Zahlen enthalten.',\n      invalidEmail: 'Muss eine gltige E-Mail sein.',\n      invalidPhoneNumber: 'Muss eine gltige Telefonnummer sein.',\n    },\n  },\n}\n","export default {\n  patients: {\n    label: 'Patienten',\n    viewPatients: 'Patienten anzeigen',\n    noPatients: 'Es sind noch keine Patienten vorhanden, fgen Sie den Ersten hinzu',\n    viewPatient: 'Patient anzeigen',\n    editPatient: 'Patient bearbeiten',\n    newPatient: 'Neuer Patient',\n  },\n}\n","export default {\n  settings: {},\n}\n","export default {\n  scheduling: {\n    label: 'Planung',\n    appointments: {\n      label: 'Termine',\n      new: 'Neuer Termin',\n      schedule: 'Terminplan',\n      editAppointment: 'Termin bearbeiten',\n      deleteAppointment: 'Termin lschen',\n      viewAppointment: 'Termin ansehen',\n    },\n    appointment: {\n      startDate: 'Anfangsdatum',\n      endDate: 'Enddatum',\n      location: 'Standort',\n      type: 'Typ',\n      types: {\n        checkup: 'Untersuchung',\n        emergency: 'Notfall',\n        followUp: 'Nachverfolgen',\n        routine: 'Routine',\n        walkIn: 'Walk In',\n      },\n      errors: {\n        createAppointmentError: 'Neuer Termin konnte nicht erstellt werden.',\n        updateAppointmentError: 'Termin konnte nicht aktualisiert werden.',\n        patientRequired: 'Patient ist erforderlich.',\n        startDateMustBeBeforeEndDate: 'Die Startzeit muss vor der Endzeit liegen.',\n      },\n      reason: 'Grund',\n      patient: 'Patient',\n      deleteConfirmationMessage: 'Sind Sie sicher, dass Sie diesen Termin lschen mchten?',\n      successfullyCreated: 'Termin erfolgreich erstellt.',\n      successfullyDeleted: 'Termin erfolgreich gelscht.',\n    },\n  },\n}\n","export default {\n  states: {\n    success: 'Erfolg!',\n    error: 'Fehler!',\n  },\n}\n","export default {\n  sex: {\n    male: 'Mnnlich',\n    female: 'Weiblich',\n    other: 'Andere',\n    unknown: 'Unbekannt',\n  },\n}\n","export default {\n  labs: {\n    label: 'Labor',\n    filterTitle: 'Nach Status filtern',\n    search: 'Laborsuche',\n    status: {\n      requested: 'Angefordert',\n      completed: 'Abgeschlossen',\n      canceled: 'Abgebrochen',\n    },\n    filter: {\n      all: 'Alle Status',\n    },\n    requests: {\n      label: 'Laboranfragen',\n      new: 'Neue Laboranfrage',\n      view: 'Labor anzeigen',\n      cancel: 'Labor stornieren',\n      complete: 'Labor erledigt',\n      error: {\n        unableToRequest: 'Unable to create new lab request.',\n        unableToComplete: 'Unable to complete lab request.',\n        typeRequired: 'Type is required.',\n        resultRequiredToComplete: 'Result is required to complete.',\n      },\n    },\n    lab: {\n      code: 'Laborcode',\n      status: 'Status',\n      for: 'Fr',\n      type: 'Typ',\n      result: 'Resultat',\n      notes: 'Notizen',\n      requestedOn: 'Angefordert am',\n      completedOn: 'Erledigt am',\n      canceledOn: 'Storniert am',\n      patient: 'Patient',\n    },\n  },\n}\n","export default {\n  incidents: {\n    filterTitle: 'Nach Status filtern',\n    label: 'Vorflle',\n    actions: {\n      report: 'Bericht',\n    },\n    status: {\n      reported: 'gemeldet',\n      all: 'alle',\n    },\n    reports: {\n      label: 'Gemeldete Vorflle',\n      new: 'Vorfall melden',\n      view: 'Vorfall ansehen',\n      dateOfIncident: 'Datum des Vorfalles',\n      department: 'Abteilung',\n      category: 'Kategorie',\n      categoryItem: 'Kategorie Artikel',\n      description: 'Beschreibung des Vorfalles',\n      patient: 'Patient',\n      code: 'Code',\n      reportedBy: 'Gemeldet von',\n      reportedOn: 'Gemeldet am',\n      status: 'Status',\n      error: {\n        dateRequired: 'Datum is erforderlich.',\n        dateMustBeInThePast: 'Datum muss in der vergangenheit sein.',\n        departmentRequired: 'Abteilung ist erforderlich.',\n        categoryRequired: 'Kategorie ist erforderlich',\n        categoryItemRequired: 'Kategorie Artikel ist erforderlich',\n        descriptionRequired: 'Beschreibung ist erforderlich',\n      },\n    },\n  },\n}\n","export default {\n  medications: {\n    label: 'Medikamente',\n    filterTitle: 'Nach Status filtern',\n    search: 'Medikamente suchen',\n    status: {\n      draft: 'Entwurf',\n      active: 'Aktiv',\n      onHold: 'In Wartestellung',\n      cancelled: 'Abgesagt',\n      completed: 'Abgeschlossen',\n      enteredInError: 'Fehlerhaft eingegeben',\n      stopped: 'Gestoppt',\n      unknown: 'Unbekannt',\n    },\n    intent: {\n      proposal: 'Vorschlag',\n      plan: 'Planen',\n      order: 'Bestellung',\n      originalOrder: 'Ursprngliche Bestellung',\n      reflexOrder: 'Reflexreihenfolge',\n      fillerOrder: 'Fllauftrag',\n      instanceOrder: 'Instanzbestellung',\n      option: 'Mglichkeit',\n    },\n    priority: {\n      routine: 'Routine',\n      urgent: 'Dringend',\n      asap: 'So schnell wie mglich',\n      stat: 'Stat',\n    },\n    filter: {\n      all: 'Alle Status',\n    },\n    requests: {\n      label: 'Medikamentenanfragen',\n      new: 'Medikamente anfordern',\n      view: 'Medikamente anzeigen',\n      cancel: 'Medikamente abbrechen',\n      complete: 'Komplette Medikation',\n      error: {\n        unableToRequest: 'Medikationsanforderung kann nicht erstellt werden.',\n        unableToComplete: 'Medikamentenanforderung kann nicht abgeschlossen werden.',\n        quantityRequired: 'Menge ist erforderlich.',\n        unitRequired: 'Einheit ist erforderlich.',\n      },\n    },\n    medication: {\n      medication: 'Medikament',\n      for: 'Zum',\n      status: 'Status',\n      intent: 'Absicht',\n      priority: 'Prioritt',\n      notes: 'Anmerkungen',\n      quantity: 'Menge',\n      quantityValue: 'Wert',\n      quantityUnit: 'Einheit',\n      requestedOn: 'Angefordert am',\n      requestedBy: 'Angefordert von',\n      completedOn: 'Vervollstndigt am',\n      canceledOn: 'Abgebrochen am',\n      patient: 'Geduldig',\n    },\n  },\n}\n","import actions from './actions'\nimport bloodType from './blood-type'\nimport dashboard from './dashboard'\nimport imagings from './imagings'\nimport incidents from './incidents'\nimport labs from './labs'\nimport medications from './medications'\nimport networkStatus from './network-status'\nimport patient from './patient'\nimport patients from './patients'\nimport scheduling from './scheduling'\nimport settings from './settings'\nimport sex from './sex'\nimport states from './states'\nimport user from './user'\n\nexport default {\n  ...actions,\n  ...dashboard,\n  ...networkStatus,\n  ...patient,\n  ...patients,\n  ...scheduling,\n  ...states,\n  ...sex,\n  ...labs,\n  ...medications,\n  ...incidents,\n  ...settings,\n  ...user,\n  ...bloodType,\n  ...imagings,\n}\n","export default {\n  actions: {\n    label: 'Actions',\n    edit: 'Edit',\n    save: 'Save',\n    update: 'Update',\n    complete: 'Complete',\n    delete: 'Delete',\n    cancel: 'Cancel',\n    new: 'New',\n    list: 'List',\n    search: 'Search',\n    confirmDelete: 'Delete Confirmation',\n    next: 'Next',\n    previous: 'Previous',\n    page: 'Page',\n    add: 'Add',\n    view: 'View',\n    logout: 'logout',\n  },\n}\n","export default {\n  dashboard: {\n    label: 'Dashboard',\n  },\n}\n","export default {\n  networkStatus: {\n    offline: 'you are working in offline mode',\n    online: 'you are back online',\n  },\n}\n","export default {\n  patient: {\n    label: 'Patient',\n    code: 'Patient Code',\n    firstName: 'First Name',\n    lastName: 'Last Name',\n    suffix: 'Suffix',\n    prefix: 'Prefix',\n    givenName: 'Given Name',\n    familyName: 'Family Name',\n    dateOfBirth: 'Date of Birth',\n    approximateDateOfBirth: 'Approximate Date of Birth',\n    age: 'Age',\n    approximateAge: 'Approximate Age',\n    placeOfBirth: 'Place of Birth',\n    sex: 'Sex',\n    bloodType: 'Blood Type',\n    contactInfoType: {\n      label: 'Type',\n      options: {\n        home: 'Home',\n        mobile: 'Mobile',\n        work: 'Work',\n        temporary: 'Temporary',\n        old: 'Old',\n      },\n    },\n    phoneNumber: 'Phone Number',\n    email: 'Email',\n    address: 'Address',\n    occupation: 'Occupation',\n    type: 'Patient Type',\n    preferredLanguage: 'Preferred Language',\n    basicInformation: 'Basic Information',\n    generalInformation: 'General Information',\n    contactInformation: 'Contact Information',\n    unknownDateOfBirth: 'Unknown',\n    relatedPerson: 'Related Person',\n    relatedPersons: {\n      error: {\n        unableToAddRelatedPerson: 'Unable to add new related person.',\n        relatedPersonRequired: 'Related Person is required.',\n        relationshipTypeRequired: 'Relationship Type is required.',\n      },\n      label: 'Related Persons',\n      new: 'New Related Person',\n      add: 'Add Related Person',\n      relationshipType: 'Relationship Type',\n      warning: {\n        noRelatedPersons: 'No related persons',\n      },\n      addRelatedPersonAbove: 'Add a related person using the button above.',\n    },\n    appointments: {\n      new: 'Add Appointment',\n      warning: {\n        noAppointments: 'No Appointments',\n      },\n      addAppointmentAbove: 'Add an appointment using the button above.',\n    },\n    allergies: {\n      label: 'Allergies',\n      allergyName: 'Allergy Name',\n      new: 'Add Allergy',\n      error: {\n        nameRequired: 'Name is required.',\n        unableToAdd: 'Unable to add allergy.',\n      },\n      warning: {\n        noAllergies: 'No Allergies',\n      },\n      addAllergyAbove: 'Add an allergy using the button above.',\n      successfullyAdded: 'Successfully added a new allergy!',\n    },\n    diagnoses: {\n      label: 'Diagnoses',\n      new: 'Add Diagnosis',\n      diagnosisName: 'Name',\n      diagnosisDate: 'Date',\n      onsetDate: 'Onset Date',\n      abatementDate: 'Abatement Date',\n      visit: 'Visit',\n      status: 'Status',\n      active: 'Active',\n      recurrence: 'Recurrence',\n      relapse: 'Relapse',\n      inactive: 'Inactive',\n      remission: 'Remission',\n      resolved: 'Resolved',\n      note: 'Note',\n      warning: {\n        noDiagnoses: 'No Diagnoses',\n      },\n      error: {\n        nameRequired: 'Diagnosis Name is required.',\n        dateRequired: 'Diagnosis Date is required.',\n        unableToAdd: 'Unable to add new diagnosis',\n      },\n      addDiagnosisAbove: 'Add a diagnosis using the button above.',\n      successfullyAdded: 'Successfully added a new diagnosis!',\n    },\n    note: 'Note',\n    notes: {\n      label: 'Notes',\n      new: 'Add New Note',\n      warning: {\n        noNotes: 'No Notes',\n      },\n      error: {\n        noteRequired: 'Note is required.',\n        unableToAdd: 'Unable to add new note.',\n      },\n      addNoteAbove: 'Add a note using the button above.',\n    },\n    labs: {\n      label: 'Labs',\n      new: 'Add New Lab',\n      warning: {\n        noLabs: 'No Labs',\n      },\n      noLabsMessage: 'No labs requests for this person.',\n    },\n    medications: {\n      label: 'Medications',\n      new: 'Add New Medication',\n      warning: {\n        noMedications: 'No Medications',\n      },\n      noMedicationsMessage: 'No medications requests for this person.',\n    },\n    careGoal: {\n      new: 'Add Care Goal',\n      label: 'Care Goals',\n      title: 'Title',\n      description: 'Description',\n      status: 'Status',\n      achievementStatus: 'Achievement Status',\n      priority: {\n        label: 'Priority',\n        low: 'low',\n        medium: 'medium',\n        high: 'high',\n      },\n      startDate: 'Start Date',\n      dueDate: 'Due Date',\n      note: 'Note',\n      error: {\n        unableToAdd: 'Unable to add a new care goal.',\n        descriptionRequired: 'Description is required.',\n        priorityRequired: 'Priority is required.',\n        statusRequired: 'Status is required.',\n        achievementStatusRequired: 'Achievement Status is required.',\n        startDate: 'Start date is required.',\n        dueDate: 'Due date is required.',\n        dueDateMustBeAfterStartDate: 'Due date must be after start date',\n      },\n    },\n    careGoals: {\n      warning: {\n        noCareGoals: 'No Care Goals',\n        addCareGoalAbove: 'Add a care goal using the button above.',\n      },\n    },\n    carePlan: {\n      new: 'Add Care Plan',\n      label: 'Care Plans',\n      title: 'Title',\n      description: 'Description',\n      status: 'Status',\n      condition: 'Condition',\n      intent: 'Intent',\n      startDate: 'Start Date',\n      endDate: 'End Date',\n      note: 'Note',\n      error: {\n        unableToAdd: 'Unable to add a new care plan.',\n        titleRequired: 'Title is required.',\n        descriptionRequired: 'Description is required.',\n        conditionRequired: 'Condition is required.',\n        statusRequired: 'Status is required.',\n        intentRequired: 'Intent is required.',\n        startDate: 'Start date is required.',\n        endDate: 'End date is required',\n      },\n    },\n    carePlans: {\n      warning: {\n        noCarePlans: 'No Care Plans',\n        addCarePlanAbove: 'Add a care plan using the button above.',\n      },\n    },\n    visit: 'Visit',\n    history: {\n      label: 'History',\n      eventDate: 'Event Date',\n      recordType: 'Record Type',\n      information: 'Information',\n      noHistoryTitle: 'No History',\n      noHistoryMessage: 'There is no histories for this patient',\n    },\n    visits: {\n      new: 'Add Visit',\n      label: 'Visits',\n      startDateTime: 'Start Date',\n      endDateTime: 'End Date',\n      type: 'Type',\n      status: 'Status',\n      reason: 'Reason',\n      location: 'Location',\n      error: {\n        unableToAdd: 'Unable to add a new visit.',\n        startDateRequired: 'Start date is required.',\n        endDateRequired: 'End date is required',\n        endDateMustBeAfterStartDate: 'End date must be after start date',\n        typeRequired: 'Type is required.',\n        statusRequired: 'Status is required.',\n        reasonRequired: 'Reason is required.',\n        locationRequired: 'Location is required.',\n      },\n      warning: {\n        noVisits: 'No Visits',\n        addVisitAbove: 'Add a visit using the button above.',\n      },\n    },\n    types: {\n      charity: 'Charity',\n      private: 'Private',\n    },\n    errors: {\n      createPatientError: 'Could not create new patient.',\n      updatePatientError: 'Could not update patient.',\n      patientGivenNameFeedback: 'Given Name is required.',\n      patientDateOfBirthFeedback: 'Date of Birth can not be greater than today',\n      patientNumInSuffixFeedback: 'Cannot contain numbers.',\n      patientNumInPrefixFeedback: 'Cannot contain numbers.',\n      patientNumInFamilyNameFeedback: 'Cannot contain numbers.',\n      patientNumInPreferredLanguageFeedback: 'Cannot contain numbers.',\n      invalidEmail: 'Must be a valid email.',\n      invalidPhoneNumber: 'Must be a valid phone number.',\n    },\n  },\n}\n","export default {\n  patients: {\n    label: 'Patients',\n    warning: 'Warning!',\n    patientsList: 'Patients List',\n    viewPatients: 'View Patients',\n    noPatients: \"There are no patients yet, let's add the first one!\",\n    viewPatient: 'View Patient',\n    createPatient: 'Create Patient',\n    newPatient: 'New Patient',\n    editPatient: 'Edit Patient',\n    updatePatient: 'Update Patient',\n    successfullyCreated: 'Successfully created patient',\n    successfullyAddedNote: 'Successfully added the new note',\n    successfullyAddedRelatedPerson: 'Successfully added a new related person',\n    successfullyUpdated: 'Successfully updated information for ',\n    possibleDuplicatePatient: 'Possible duplicate patient:',\n    duplicatePatientWarning:\n      'Patient with matching information found in database. Are you sure you want to create this patient?',\n  },\n}\n","export default {\n  scheduling: {\n    label: 'Scheduling',\n    appointments: {\n      label: 'Appointments',\n      new: 'New Appointment',\n      schedule: 'Appointment Schedule',\n      editAppointment: 'Edit Appointment',\n      createAppointment: 'Schedule Appointment',\n      deleteAppointment: 'Delete Appointment',\n      viewAppointment: 'View Appointment',\n      updateAppointment: 'Update Appointment',\n    },\n    appointment: {\n      startDate: 'Start Date',\n      endDate: 'End Date',\n      location: 'Location',\n      type: 'Type',\n      types: {\n        checkup: 'Checkup',\n        emergency: 'Emergency',\n        followUp: 'Follow Up',\n        routine: 'Routine',\n        walkIn: 'Walk In',\n      },\n      errors: {\n        createAppointmentError: 'Could not create new appointment.',\n        updateAppointmentError: 'Could not update appointment.',\n        patientRequired: 'Patient is required.',\n        startDateMustBeBeforeEndDate: 'Start Time must be before End Time.',\n      },\n      reason: 'Reason',\n      patient: 'Patient',\n      deleteConfirmationMessage: 'Are you sure that you want to delete this appointment?',\n      successfullyCreated: 'Successfully created appointment.',\n      successfullyDeleted: 'Successfully deleted appointment.',\n      successfullyUpdated: 'Successfully updated appointment.',\n    },\n  },\n}\n","export default {\n  states: {\n    success: 'Success!',\n    error: 'Error!',\n  },\n}\n","export default {\n  sex: {\n    male: 'Male',\n    female: 'Female',\n    other: 'Other',\n    unknown: 'Unknown',\n  },\n}\n","export default {\n  labs: {\n    label: 'Labs',\n    filterTitle: 'Filter by status',\n    search: 'Search labs',\n    successfullyUpdated: 'Successfully updated',\n    successfullyCompleted: 'Successfully completed',\n    successfullyCreated: 'Successfully created',\n    successfullyDeletedNote: 'Note was deleted',\n    status: {\n      requested: 'Requested',\n      completed: 'Completed',\n      canceled: 'Canceled',\n    },\n    filter: {\n      all: 'All statuses',\n    },\n    requests: {\n      label: 'Lab Requests',\n      new: 'Request Lab',\n      save: 'Request',\n      view: 'View Lab',\n      cancel: 'Cancel Lab',\n      complete: 'Complete Lab',\n      update: 'Update Lab',\n      error: {\n        unableToRequest: 'Unable to create new lab request.',\n        unableToComplete: 'Unable to complete lab request.',\n        typeRequired: 'Type is required.',\n        patientRequired: 'Patient is required.',\n        resultRequiredToComplete: 'Result is required to complete.',\n      },\n    },\n    lab: {\n      code: 'Lab Code',\n      status: 'Status',\n      for: 'For',\n      type: 'Type',\n      result: 'Result',\n      notes: 'Notes',\n      requestedOn: 'Requested On',\n      completedOn: 'Completed On',\n      canceledOn: 'Canceled On',\n      patient: 'Patient',\n    },\n  },\n}\n","export default {\n  medications: {\n    label: 'Medications',\n    filterTitle: 'Filter by status',\n    search: 'Search Medications',\n    status: {\n      draft: 'Draft',\n      active: 'Active',\n      onHold: 'On Hold',\n      canceled: 'Canceled',\n      completed: 'Completed',\n      enteredInError: 'Entered In Error',\n      stopped: 'Stopped',\n      unknown: 'Unknown',\n    },\n    intent: {\n      proposal: 'Proposal',\n      plan: 'Plan',\n      order: 'Order',\n      originalOrder: 'Original Order',\n      reflexOrder: 'Reflex Order',\n      fillerOrder: 'Filler Order',\n      instanceOrder: 'Instance Order',\n      option: 'Option',\n    },\n    priority: {\n      routine: 'Routine',\n      urgent: 'Urgent',\n      asap: 'Asap',\n      stat: 'Stat',\n    },\n    filter: {\n      all: 'All statuses',\n    },\n    requests: {\n      label: 'Medication Requests',\n      new: 'Request Medication',\n      view: 'View Medication',\n      cancel: 'Cancel Medication',\n      complete: 'Complete Medication',\n      update: 'Update Medication',\n      error: {\n        unableToRequest: 'Unable to create Medication request.',\n        unableToComplete: 'Unable to complete Medication request.',\n        quantityRequired: 'Quantity is required.',\n        unitRequired: 'Unit is required.',\n      },\n    },\n    medication: {\n      medication: 'Medication',\n      for: 'For',\n      status: 'Status',\n      intent: 'Intent',\n      priority: 'Priority',\n      notes: 'Notes',\n      quantity: 'Quantity',\n      quantityValue: 'Value',\n      quantityUnit: 'Unit',\n      requestedOn: 'Requested On',\n      requestedBy: 'Requested By',\n      completedOn: 'Completed On',\n      canceledOn: 'Canceled On',\n      patient: 'Patient',\n    },\n  },\n}\n","export default {\n  incidents: {\n    filterTitle: ' Filter by status',\n    label: 'Incidents',\n    actions: {\n      report: 'Report',\n    },\n    status: {\n      reported: 'Reported',\n      resolved: 'Resolved',\n      all: 'All',\n    },\n    reports: {\n      label: 'Reported Incidents',\n      new: 'Report Incident',\n      view: 'View Incident',\n      resolve: 'Resolve Incident',\n      dateOfIncident: 'Date of Incident',\n      department: 'Department',\n      download: 'Download',\n      category: 'Category',\n      categoryItem: 'Category Item',\n      description: 'Description of Incident',\n      patient: 'Patient',\n      code: 'Code',\n      reportedBy: 'Reported By',\n      reportedOn: 'Reported On',\n      resolvedOn: 'Resolved On',\n      status: 'Status',\n      error: {\n        dateRequired: 'Date is required.',\n        dateMustBeInThePast: 'Date must be in the past.',\n        departmentRequired: 'Department is required.',\n        categoryRequired: 'Category is required',\n        categoryItemRequired: 'Category Item is required',\n        descriptionRequired: 'Description is required',\n      },\n    },\n    visualize: {\n      label: 'Visualize',\n      view: 'Visualize Incidents',\n    },\n  },\n}\n","export default {\n  settings: {\n    label: 'Settings',\n    language: {\n      label: 'Language',\n    },\n  },\n}\n","export default {\n  user: {\n    login: {\n      error: {\n        message: {\n          required: 'Missing required fields.',\n          incorrect: 'Incorrect username or password.',\n        },\n        username: {\n          required: 'Username is required.',\n        },\n        password: {\n          required: 'Password is required.',\n        },\n      },\n      currentlySignedInAs: 'Currently signed in as',\n    },\n  },\n}\n","export default {\n  bloodType: {\n    apositive: 'A+',\n    anegative: 'A-',\n    abpositive: 'AB+',\n    abnegative: 'AB-',\n    bpositive: 'B+',\n    bnegative: 'B-',\n    opositive: 'O+',\n    onegative: 'O-',\n    unknown: 'Unknown',\n  },\n}\n","export default {\n  imagings: {\n    label: 'Imagings',\n    status: {\n      requested: 'Requested',\n      completed: 'Completed',\n      canceled: 'Canceled',\n    },\n    requests: {\n      label: 'Imaging Requests',\n      new: 'New Imaging Request',\n      view: 'View Imaging',\n      create: 'Request Imaging',\n      cancel: 'Cancel Imaging',\n      complete: 'Complete Imaging',\n      error: {\n        unableToRequest: 'Unable to create new imaging request.',\n        incorrectStatus: 'Incorrect Status',\n        typeRequired: 'Type is required.',\n        statusRequired: 'Status is required.',\n        patientRequired: 'Patient name is required.',\n      },\n    },\n    imaging: {\n      label: 'imaging',\n      code: 'Imaging Code',\n      status: 'Status',\n      type: 'Type',\n      notes: 'Notes',\n      requestedOn: 'Requested On',\n      completedOn: 'Completed On',\n      canceledOn: 'Canceled On',\n      requestedBy: 'Requested By',\n      patient: 'Patient',\n    },\n  },\n}\n","import actions from './actions'\nimport dashboard from './dashboard'\nimport labs from './labs'\nimport medications from './medications'\nimport patient from './patient'\nimport patients from './patients'\nimport settings from './settings'\n\nexport default {\n  ...actions,\n  ...dashboard,\n  ...labs,\n  ...patient,\n  ...patients,\n  ...settings,\n  ...medications,\n}\n","export default {\n  actions: {\n    edit: 'Editar',\n    save: 'Guardar',\n    cancel: 'Cancelar',\n    new: 'Nuevo',\n    list: 'Lista',\n  },\n}\n","export default {\n  dashboard: {\n    label: 'Panel',\n  },\n}\n","export default {\n  labs: {\n    lab: {\n      code: 'Cdigo',\n    },\n  },\n}\n","export default {\n  patient: {\n    firstName: 'Nombre de pila',\n    lastName: 'Apellido',\n    medications: {\n      label: 'Medicamentos',\n      new: 'Agregar nuevo medicamento',\n      warning: {\n        noMedications: 'Sin medicamentos',\n      },\n      noMedicationsMessage: 'No hay solicitudes de medicamentos para esta persona.',\n    },\n  },\n}\n","export default {\n  patients: {\n    label: 'Pacientes',\n    viewPatients: 'Ver pacientes',\n    viewPatient: 'Ver pacientes',\n    editPatient: 'Editar paciente',\n    newPatient: 'Nuevo paciente',\n  },\n}\n","export default {\n  settings: {},\n}\n","export default {\n  medications: {\n    label: 'Medicamentos',\n    filterTitle: 'Filtrar por estado',\n    search: 'Buscar medicamentos',\n    status: {\n      draft: 'Sequa',\n      active: 'Activa',\n      onHold: 'En espera',\n      cancelled: 'Cancelada',\n      completed: 'Terminada',\n      enteredInError: 'Ingresado por error',\n      stopped: 'Detenida',\n      unknown: 'Desconocida',\n    },\n    intent: {\n      proposal: 'Propuesta',\n      plan: 'Plan',\n      order: 'Orden',\n      originalOrder: 'Orden original',\n      reflexOrder: 'Orden refleja',\n      fillerOrder: 'Orden de relleno',\n      instanceOrder: 'Orden de instancia',\n      option: 'Opcin',\n    },\n    priority: {\n      routine: 'Rutina',\n      urgent: 'Urgente',\n      asap: 'Lo antes posible',\n      stat: 'Estadsticas',\n    },\n    filter: {\n      all: 'Todos los estados',\n    },\n    requests: {\n      label: 'Solicitudes de medicacin',\n      new: 'Solicitar medicacin',\n      view: 'Ver medicacin',\n      cancel: 'Cancelar medicacin',\n      complete: 'Medicacin completa',\n      error: {\n        unableToRequest: 'No se pudo crear la solicitud de medicacin.',\n        unableToComplete: 'No se pudo completar la solicitud de medicacin.',\n        quantityRequired: 'Se requiere cantidad.',\n        unitRequired: 'Se requiere unidad.',\n      },\n    },\n    medication: {\n      medication: 'Medicamento',\n      for: 'por',\n      status: 'Estado',\n      intent: 'Intencin',\n      priority: 'Prioridad',\n      notes: 'Notas',\n      quantity: 'Cantidad',\n      quantityValue: 'Valor',\n      quantityUnit: 'Unidad',\n      requestedOn: 'Solicitado el',\n      requestedBy: 'Requested By',\n      completedOn: 'Completado en',\n      canceledOn: 'Cancelado el',\n      patient: 'Paciente',\n    },\n  },\n}\n","import actions from './actions'\nimport dashboard from './dashboard'\nimport labs from './labs'\nimport medications from './medications'\nimport patient from './patient'\nimport patients from './patients'\nimport scheduling from './scheduling'\nimport settings from './settings'\nimport sex from './sex'\nimport states from './states'\n\nexport default {\n  ...actions,\n  ...dashboard,\n  ...patient,\n  ...patients,\n  ...scheduling,\n  ...states,\n  ...sex,\n  ...labs,\n  ...settings,\n  ...medications,\n}\n","export default {\n  actions: {\n    label: 'Actions',\n    edit: 'diter',\n    save: 'Enregistrer',\n    update: 'Mettre  jour',\n    complete: 'Complter',\n    delete: 'Supprimer',\n    cancel: 'Annuler',\n    new: 'Nouveau',\n    list: 'Liste',\n    search: 'Rechercher',\n    confirmDelete: 'Confirmer la suppression',\n  },\n}\n","export default {\n  dashboard: {\n    label: 'Tableau de bord',\n  },\n}\n","export default {\n  patient: {\n    code: 'Code patient',\n    firstName: 'Prnom',\n    lastName: 'Nom',\n    suffix: 'Suffixe',\n    prefix: 'Prfixe',\n    givenName: 'Prnom',\n    familyName: 'Nom de famille',\n    dateOfBirth: 'Date de naissance',\n    approximateDateOfBirth: 'Date de naissance approximative',\n    age: 'ge',\n    approximateAge: 'ge approximatif',\n    placeOfBirth: 'Lieu de naissance',\n    sex: 'Sexe',\n    phoneNumber: 'Numro de tlphone',\n    email: 'Email',\n    address: 'Adresse',\n    occupation: 'Profession',\n    type: 'Type de patient',\n    preferredLanguage: 'Langue',\n    basicInformation: 'Informations de base',\n    generalInformation: 'Informations gnrales',\n    contactInformation: 'Informations du contact',\n    unknownDateOfBirth: 'Inconnue',\n    relatedPerson: 'Personne lie',\n    relatedPersons: {\n      error: {\n        unableToAddRelatedPerson: \"Impossible d'ajouter une nouvelle personne lie.\",\n        relatedPersonRequired: 'La personne lie est requise.',\n        relationshipTypeRequired: 'Le type de relation est requis.',\n      },\n      label: 'Personnes lies',\n      new: 'Nouvelle personne lie',\n      add: 'Ajouter une personne lie',\n      relationshipType: 'Type de relation',\n      warning: {\n        noRelatedPersons: 'Aucune personnes lies',\n      },\n      addRelatedPersonAbove: \"Ajouter une personne lie  l'aide du bouton ci-dessus.\",\n    },\n    appointments: {\n      new: 'Ajouter un rendez-vous',\n    },\n    allergies: {\n      label: 'Allergies',\n      allergyName: \"Nom de l'allergie\",\n      new: 'Ajouter une allergie',\n      error: {\n        nameRequired: \"Le nom de l'allergie est requis.\",\n        unableToAdd: \"Impossible d'ajouter l'allergie.\",\n      },\n      warning: {\n        noAllergies: \"Pas d'allergies\",\n      },\n      addAllergyAbove: \"Ajouter une allergie  l'aide du bouton ci-dessus.\",\n      successfullyAdded: 'Nouvelle allergie ajoute avec succs !',\n    },\n    diagnoses: {\n      label: 'Diagnostics',\n      new: 'Ajouter un diagnostic',\n      diagnosisName: 'Nom',\n      diagnosisDate: 'Date',\n      warning: {\n        noDiagnoses: 'Aucun diagnostic',\n      },\n      error: {\n        nameRequired: 'Le nom du diagnostic est requis.',\n        dateRequired: 'La date du diagnostic est requise.',\n      },\n      addDiagnosisAbove: \"Ajouter un diagnostic  l'aide du bouton ci-dessus.\",\n      successfullyAdded: 'Nouveau diagnostic ajout avec succs !',\n    },\n    note: 'Note',\n    notes: {\n      label: 'Notes',\n      new: 'Ajouter une nouvelle note',\n      warning: {\n        noNotes: 'Pas de notes',\n      },\n      error: {\n        noteRequired: 'Une note est requise.',\n        unableToAdd: \"Impossible d'ajouter une nouvelle note.\",\n      },\n      addNoteAbove: \"Ajouter une nouvelle note  l'aide du bouton ci-dessus..\",\n    },\n    medications: {\n      label: 'Mdicaments',\n      new: 'Ajouter un nouveau mdicament',\n      warning: {\n        noMedications: 'Pas de mdicaments',\n      },\n      noMedicationsMessage: 'Aucune demande de mdicaments pour cette personne.',\n    },\n    types: {\n      charity: 'Charit',\n      private: 'Priv',\n    },\n    errors: {\n      createPatientError: 'Impossible de crer un nouveau patient.',\n      updatePatientError: 'Impossible de mettre  jour le patient.',\n      patientGivenNameFeedback: 'Le prnom est obligatoire.',\n      patientDateOfBirthFeedback:\n        \"La date de naissance ne peut pas tre suprieure  celle d'ajourd'hui.\",\n    },\n  },\n}\n","export default {\n  patients: {\n    label: 'Patients',\n    patientsList: 'Liste des patients',\n    viewPatients: 'Voir les patients',\n    noPatients: \"Il n'y a aucun patient ici, voil donc le premier\",\n    viewPatient: 'Voir le patient',\n    editPatient: 'Modifier le patient',\n    newPatient: 'Nouveau patient',\n    successfullyCreated: 'Patient cr avec succs',\n    successfullyAddedNote: 'Note ajoute avec succs',\n    successfullyAddedRelatedPerson: \"Ajout d'une nouvelle personne lie avec succs\",\n  },\n}\n","export default {\n  scheduling: {\n    label: 'Planning',\n    appointments: {\n      label: 'Rendez-vous',\n      new: 'Nouveau rendez-vous',\n      schedule: 'Planning des rendez-vous',\n      editAppointment: 'diter un rendez-vous',\n      deleteAppointment: 'Supprimer un rendez-vous',\n    },\n    appointment: {\n      startDate: 'Date de dbut',\n      endDate: 'Date de fin',\n      location: 'Lieu',\n      type: 'Type',\n      types: {\n        checkup: 'Bilan de sant',\n        emergency: 'Urgence',\n        followUp: 'Suivi',\n        routine: 'Habituel',\n        walkIn: 'Sans rendez-vous',\n      },\n      errors: {\n        patientRequired: 'Le patient est requis.',\n        startDateMustBeBeforeEndDate: \"La date de dbut doit tre infrieur  l'heure de fin.\",\n      },\n      reason: 'Raison',\n      patient: 'Patient',\n    },\n  },\n}\n","export default {\n  states: {\n    success: 'Succs !',\n    error: 'Erreur !',\n  },\n}\n","export default {\n  sex: {\n    male: 'Homme',\n    female: 'Femme',\n    other: 'Autre',\n    unknown: 'Inconnu',\n  },\n}\n","export default {\n  labs: {\n    label: 'Analyses',\n    requests: {\n      label: \"Demandes d'analyse\",\n      new: \"Nouvelle demande d'analyse\",\n      view: \"Voir l'analyse\",\n      cancel: \"Annuler l'analyse\",\n      complete: 'Analyse complte',\n      error: {\n        unableToRequest: \"Impossible de crer une nouvelle demande d'analyse.\",\n        unableToComplete: \"Impossible de complter la demande d'analyse.\",\n        typeRequired: \"Le type d'analyse est requis.\",\n        resultRequiredToComplete: \"Le rsultat est requis pour complter l'analyse.\",\n      },\n    },\n    lab: {\n      code: 'Code',\n      status: 'Statut',\n      for: 'Pour',\n      type: 'Type',\n      result: 'Rsultat',\n      notes: 'Notes',\n      requestedOn: 'Demand le',\n      completedOn: 'Complt le',\n      canceledOn: 'Annul le',\n    },\n  },\n}\n","export default {\n  settings: {},\n}\n","export default {\n  medications: {\n    label: 'Medications',\n    filterTitle: 'Filtrer par statut',\n    search: 'Rechercher des mdicaments',\n    status: {\n      draft: 'Brouillon',\n      active: 'Active',\n      onHold: 'En attente',\n      cancelled: 'Annul',\n      completed: 'Termin',\n      enteredInError: 'Entr par erreur',\n      stopped: 'Arrt',\n      unknown: 'Inconnue',\n    },\n    intent: {\n      proposal: 'Proposition',\n      plan: 'Plan',\n      order: 'Commande',\n      originalOrder: 'Commande originale',\n      reflexOrder: 'Ordre rflexe',\n      fillerOrder: 'Ordre de remplissage',\n      instanceOrder: 'Ordre des instances',\n      option: 'Option',\n    },\n    priority: {\n      routine: 'Routine',\n      urgent: 'Urgente',\n      asap: 'Au plus vite',\n      stat: 'Stat',\n    },\n    filter: {\n      all: 'Tous les statuts',\n    },\n    requests: {\n      label: 'Demandes de mdicaments',\n      new: 'Demander des mdicaments',\n      view: 'Voir les mdicaments',\n      cancel: 'Annuler le mdicament',\n      complete: 'Mdicament complet',\n      error: {\n        unableToRequest: 'Impossible de crer une demande de mdicament.',\n        unableToComplete: 'Impossible de terminer la demande de mdicaments.',\n        quantityRequired: 'La quantit est requise.',\n        unitRequired: `L'unit est requise.`,\n      },\n    },\n    medication: {\n      medication: 'Mdicament',\n      for: 'Pour',\n      status: 'Statut',\n      intent: 'Intention',\n      priority: 'Priorit',\n      notes: 'Remarques',\n      quantity: 'Quantit',\n      quantityValue: 'Valeur',\n      quantityUnit: 'Unit',\n      requestedOn: 'Demand le',\n      requestedBy: 'Demand par',\n      completedOn: 'Termin le',\n      canceledOn: 'Annul le',\n      patient: 'Patiente',\n    },\n  },\n}\n","import actions from './actions'\nimport dashboard from './dashboard'\nimport labs from './labs'\nimport medications from './medications'\nimport patient from './patient'\nimport patients from './patients'\nimport settings from './settings'\n\nexport default {\n  ...actions,\n  ...dashboard,\n  ...labs,\n  ...patient,\n  ...patients,\n  ...settings,\n  ...medications,\n}\n","export default {\n  actions: {\n    edit: 'Edit',\n    save: 'Menyimpan',\n    cancel: 'Membatalkan',\n    new: 'Baru',\n    list: 'Daftar',\n  },\n}\n","export default {\n  dashboard: {\n    label: 'Dasbor',\n  },\n}\n","export default {\n  labs: {\n    lab: {\n      code: 'Kode',\n    },\n  },\n}\n","export default {\n  patient: {\n    firstName: 'Nama depan',\n    lastName: 'Nama keluarga',\n    medications: {\n      label: 'Pengobatan',\n      new: 'Tambahkan Obat Baru',\n      warning: {\n        noMedications: 'Tidak Ada Pengobatan',\n      },\n      noMedicationsMessage: 'Tidak ada permintaan obat untuk orang ini.',\n    },\n  },\n}\n","export default {\n  patients: {\n    label: 'Pasien',\n    viewPatients: 'Lihat Pasien',\n    viewPatient: 'Lihat Pasien',\n    editPatient: 'Ganti Pasien',\n    newPatient: 'Pasien Baru',\n  },\n}\n","export default {\n  settings: {},\n}\n","export default {\n  medications: {\n    label: 'Pengobatan',\n    filterTitle: 'Filter menurut status',\n    search: 'Cari Obat',\n    status: {\n      draft: 'Minuman',\n      active: 'Aktif',\n      onHold: 'Tertahan',\n      cancelled: 'Dibatalkan',\n      completed: 'Lengkap',\n      enteredInError: 'Dimasukkan Dalam Kesalahan',\n      stopped: 'Berhenti',\n      unknown: 'Tidak diketahui',\n    },\n    intent: {\n      proposal: 'Usul',\n      plan: 'Rencana',\n      order: 'Memesan',\n      originalOrder: 'Pesanan Asli',\n      reflexOrder: 'Urutan Refleks',\n      fillerOrder: 'Urutan Pengisi',\n      instanceOrder: 'Urutan Instance',\n      option: 'Pilihan',\n    },\n    priority: {\n      routine: 'Rutin',\n      urgent: 'Mendesak',\n      asap: 'Secepat mungkin',\n      stat: 'Stat',\n    },\n    filter: {\n      all: 'Semua status',\n    },\n    requests: {\n      label: 'Permintaan Obat',\n      new: 'Minta Pengobatan',\n      view: 'Lihat Obat',\n      cancel: 'Batalkan Pengobatan',\n      complete: 'Pengobatan Lengkap',\n      error: {\n        unableToRequest: 'Tidak dapat membuat permintaan Obat.',\n        unableToComplete: 'Tidak dapat menyelesaikan permintaan Pengobatan.',\n        quantityRequired: 'Kuantitas diperlukan.',\n        unitRequired: 'Satuan wajib diisi.',\n      },\n    },\n    medication: {\n      medication: 'Pengobatan',\n      for: 'Untuk',\n      status: 'Status',\n      intent: 'Maksud',\n      priority: 'Prioritas',\n      notes: 'Catatan',\n      quantity: 'Kuantitas',\n      quantityValue: 'Nilai',\n      quantityUnit: 'Satuan',\n      requestedOn: 'Diminta Pada',\n      requestedBy: 'Diminta oleh',\n      completedOn: 'Selesai Pada',\n      canceledOn: 'Dibatalkan Pada',\n      patient: 'Sabar',\n    },\n  },\n}\n","import translationAR from './ar/translations'\nimport translationDE from './de/translations'\nimport translationEnUs from './enUs/translations'\nimport translationES from './es/translations'\nimport translationFR from './fr/translations'\nimport translationID from './id/translations'\nimport translationIT from './it/translations'\nimport translationJA from './ja/translations'\nimport translationPtBR from './ptBr/translations'\nimport translationRU from './ru/translations'\nimport translationTR from './tr/translations'\nimport translationZhCN from './zhCN/translations'\n\nconst resources: { [language: string]: any } = {\n  it: {\n    name: 'Italian',\n    translation: translationIT,\n  },\n  ar: {\n    name: 'Arabic',\n    translation: translationAR,\n  },\n  de: {\n    name: 'German',\n    translation: translationDE,\n  },\n  en: {\n    name: 'English, American',\n    translation: translationEnUs,\n  },\n  es: {\n    name: 'Spanish',\n    translation: translationES,\n  },\n  fr: {\n    name: 'French',\n    translation: translationFR,\n  },\n  id: {\n    name: 'Indonesian',\n    translation: translationID,\n  },\n  ja: {\n    name: 'Japanese',\n    translation: translationJA,\n  },\n  ptBR: {\n    name: 'Portuguese',\n    translation: translationPtBR,\n  },\n  ru: {\n    name: 'Russian',\n    translation: translationRU,\n  },\n  tr: {\n    name: 'Turkish',\n    translation: translationTR,\n  },\n  zhCN: {\n    name: 'Chinese',\n    translation: translationZhCN,\n  },\n}\n\nexport default resources\n","import actions from './actions'\nimport dashboard from './dashboard'\nimport labs from './labs'\nimport medications from './medications'\nimport patient from './patient'\nimport patients from './patients'\nimport scheduling from './scheduling'\nimport settings from './settings'\nimport sex from './sex'\nimport states from './states'\n\nexport default {\n  ...actions,\n  ...dashboard,\n  ...patient,\n  ...patients,\n  ...scheduling,\n  ...states,\n  ...sex,\n  ...labs,\n  ...settings,\n  ...medications,\n}\n","export default {\n  actions: {\n    label: 'Azioni',\n    edit: 'Modifica',\n    save: 'Salva',\n    update: 'Aggiorna',\n    complete: 'Completa',\n    delete: 'Rimuovi',\n    cancel: 'Annulla',\n    new: 'Nuovo',\n    list: 'Lista',\n    search: 'Cerca',\n    confirmDelete: 'Conferma cancellazione',\n  },\n}\n","export default {\n  dashboard: {\n    label: 'Dashboard',\n  },\n}\n","export default {\n  patient: {\n    code: 'Codice del paziente',\n    firstName: 'Nome',\n    lastName: 'Cognome',\n    suffix: 'Suffisso',\n    prefix: 'Prefisso',\n    givenName: 'Nome',\n    familyName: 'Cognome',\n    dateOfBirth: 'Data di nascita',\n    approximateDateOfBirth: 'Data presunta di nascita',\n    age: 'Anni',\n    approximateAge: 'Anni presunti',\n    placeOfBirth: 'Luogo di nascita',\n    sex: 'Sesso',\n    phoneNumber: 'Numero di telefono',\n    email: 'Email',\n    address: 'Indirizzo',\n    occupation: 'Occupazione',\n    type: 'Tipo di paziente',\n    preferredLanguage: 'Lingua',\n    basicInformation: 'Informazioni base',\n    generalInformation: 'Informazioni generali',\n    contactInformation: 'Informazioni di contatto',\n    unknownDateOfBirth: 'Sconosciuto',\n    relatedPerson: 'Relazione di parentela',\n    relatedPersons: {\n      error: {\n        unableToAddRelatedPerson: 'Impossibile aggiungere relazione di parentela.',\n        relatedPersonRequired: 'Il campo relazione di parentela  obbligatorio.',\n        relationshipTypeRequired: 'Il tipo di relazione  obbligatorio.',\n      },\n      label: 'Relazioni di parentela',\n      new: 'Nuova relazione di parentela',\n      add: 'Aggiungi relazione di parentela',\n      relationshipType: 'Tipo di relazione',\n      warning: {\n        noRelatedPersons: 'Non ci sono relazioni di parentela',\n      },\n      addRelatedPersonAbove:\n        'Aggiungi una nuova relazione di parentela usando il pulsante soprastante.',\n    },\n    appointments: {\n      new: 'Aggiungi appuntamento',\n    },\n    allergies: {\n      label: 'Allergie',\n      allergyName: \"Nome dell'allergia\",\n      new: 'Aggiungi allergia',\n      error: {\n        nameRequired: 'Il nome  obbligatorio.',\n        unableToAdd: \"Impossibile aggiungere l'allergia.\",\n      },\n      warning: {\n        noAllergies: 'Non ci sono allergie',\n      },\n      addAllergyAbove: 'Aggiungi un allergia utilizzando il pulsante soprastante.',\n      successfullyAdded: 'Allergia aggiunta con successo!',\n    },\n    diagnoses: {\n      label: 'Diagnosi',\n      new: 'Aggiungi diagnosi',\n      diagnosisName: 'Nome',\n      diagnosisDate: 'Data',\n      warning: {\n        noDiagnoses: 'Non ci sono diagnosi',\n      },\n      error: {\n        nameRequired: 'Il nome della diagnosi  obbligatorio.',\n        dateRequired: 'La data della diagnosi  obbligatorio.',\n        unableToAdd: 'Impossibile aggiungere la diagnosi',\n      },\n      addDiagnosisAbove: 'Aggiungi la diagnosi utilizzando il pulsante soprastante.',\n      successfullyAdded: 'Diagnosi aggiunta con successo!',\n    },\n    note: 'Nota',\n    notes: {\n      label: 'Note',\n      new: 'Aggiungi nuova nota',\n      warning: {\n        noNotes: 'Non ci sono note',\n      },\n      error: {\n        noteRequired: 'Il campo nota  obbligatorio.',\n        unableToAdd: 'Impossibile aggiungere la nota.',\n      },\n      addNoteAbove: 'Aggiungi una nota utilizzando il pulsante soprastante.',\n    },\n    medications: {\n      label: 'Farmaci',\n      new: 'Aggiungi nuovo farmaco',\n      warning: {\n        noMedications: 'Nessun farmaco',\n      },\n      noMedicationsMessage: 'Nessuna richiesta di farmaci per questa persona.',\n    },\n    types: {\n      charity: 'Beneficenza',\n      private: 'Privato',\n    },\n    errors: {\n      createPatientError: 'Impossibile aggiungere il paziente.',\n      updatePatientError: 'Impossibile aggiornare il paziente.',\n      patientGivenNameFeedback: 'Il nome  obbligatorio.',\n      patientDateOfBirthFeedback: 'La data di nascita non pu essere maggiore della data odierna',\n    },\n  },\n}\n","export default {\n  patients: {\n    label: 'Pazienti',\n    patientsList: 'Lista Pazienti',\n    viewPatients: 'Vedi Pazienti',\n    viewPatient: 'Vedi Paziente',\n    newPatient: 'Nuovo Paziente',\n    successfullyCreated: 'Paziente creato con successo',\n    successfullyAddedNote: 'Note aggiunte con successo',\n    successfullyAddedRelatedPerson: 'Relazione di parentela aggiunta con successo',\n  },\n}\n","export default {\n  scheduling: {\n    label: 'Appuntamenti',\n    appointments: {\n      label: 'Appuntamenti',\n      new: 'Nuovo appuntamento',\n      schedule: 'Programma appuntamento',\n      editAppointment: 'Modifica appuntamento',\n      deleteAppointment: 'Cancella appuntamento',\n      viewAppointment: 'Vedi appuntamento',\n    },\n    appointment: {\n      startDate: 'Data di inizio',\n      endDate: 'Data di fine',\n      location: 'Luogo',\n      type: 'Tipo',\n      types: {\n        checkup: 'Checkup',\n        emergency: 'Emergenza',\n        followUp: 'Approfondimento',\n        routine: 'Routine',\n        walkIn: 'Senza appuntamento',\n      },\n      errors: {\n        patientRequired: 'Il paziente  obbligatorio.',\n        errorCreatingAppointment: \"Impossibile creare l'appuntamento!\",\n        startDateMustBeBeforeEndDate:\n          'La data di inizio non pu essere inferiore a quella di fine.',\n      },\n      reason: 'Motivo',\n      patient: 'Paziente',\n      deleteConfirmationMessage: \"Sei sicuro di voler cancellare l'appuntamento?\",\n      successfullyCreated: 'Appuntamento creato con successo.',\n    },\n  },\n}\n","export default {\n  states: {\n    success: 'Successo!',\n    error: 'Errore!',\n  },\n}\n","export default {\n  sex: {\n    male: 'Maschio',\n    female: 'Femmina',\n    other: 'Altro',\n    unknown: 'Sconosciuto',\n  },\n}\n","export default {\n  labs: {\n    label: 'Laboratori',\n    requests: {\n      label: 'Richieste di laboratorio',\n      new: 'Nuova richiesta di laboratorio',\n      view: 'Visualizza richiesta',\n      cancel: 'Annulla richiesta',\n      complete: 'Completa',\n      error: {\n        unableToRequest: 'Impossibile creare la richiesta.',\n        unableToComplete: 'Impossibile completare la richiesta.',\n        typeRequired: 'La tipologia  richiesta.',\n        resultRequiredToComplete: 'Il risultato  obbligatorio per completare la richiesta.',\n      },\n    },\n    lab: {\n      status: 'Stato',\n      for: 'Per',\n      type: 'Tipo',\n      result: 'Risultato',\n      notes: 'Note',\n      requestedOn: 'Richiesta fatta il',\n      completedOn: 'Completato il',\n      canceledOn: 'Annullata il',\n      patient: 'Paziente',\n    },\n  },\n}\n","export default {\n  settings: {},\n}\n","export default {\n  medications: {\n    label: 'Farmaci',\n    filterTitle: 'Filtra per stato',\n    search: 'Cerca farmaci',\n    status: {\n      draft: 'Bozza',\n      active: 'Attiva',\n      onHold: 'In attesa',\n      cancelled: 'Annullata',\n      completed: 'Completato',\n      enteredInError: 'Inserito per errore',\n      stopped: 'Fermato',\n      unknown: 'Sconosciuta',\n    },\n    intent: {\n      proposal: 'Proposta',\n      plan: 'Piano',\n      order: 'Ordine',\n      originalOrder: 'Ordine originale',\n      reflexOrder: 'Ordine riflesso',\n      fillerOrder: 'Ordine di riempimento',\n      instanceOrder: 'Ordine istanza',\n      option: 'Opzione',\n    },\n    priority: {\n      routine: 'Routine',\n      urgent: 'Urgente',\n      asap: 'Al pi presto',\n      stat: 'statistica',\n    },\n    filter: {\n      all: 'Tutti gli stati',\n    },\n    requests: {\n      label: 'Richieste di farmaci',\n      new: 'Richiedi farmaci',\n      view: 'Visualizza farmaci',\n      cancel: 'Annulla farmaco',\n      complete: 'Farmaco completo',\n      error: {\n        unableToRequest: 'Impossibile creare la richiesta di farmaco.',\n        unableToComplete: 'Impossibile completare la richiesta del farmaco.',\n        quantityRequired: 'La quantit  richiesta.',\n        unitRequired: `L'unit  richiesta.`,\n      },\n    },\n    medication: {\n      medication: 'Farmaco',\n      for: 'Per',\n      status: 'Stato',\n      intent: 'Intenta',\n      priority: 'Priorit',\n      notes: 'Appunti',\n      quantity: 'Quantit',\n      quantityValue: 'Valore',\n      quantityUnit: 'Unit',\n      requestedOn: 'Richiesto il',\n      requestedBy: 'Richiesto da',\n      completedOn: 'Completato il',\n      canceledOn: 'Annullato il',\n      patient: 'Paziente',\n    },\n  },\n}\n","import actions from './actions'\nimport dashboard from './dashboard'\nimport labs from './labs'\nimport medications from './medications'\nimport patient from './patient'\nimport patients from './patients'\nimport settings from './settings'\n\nexport default {\n  ...actions,\n  ...dashboard,\n  ...labs,\n  ...patient,\n  ...patients,\n  ...settings,\n  ...medications,\n}\n","export default {\n  actions: {\n    edit: '',\n    save: '',\n    cancel: '',\n    new: '',\n    list: '',\n  },\n}\n","export default {\n  dashboard: {\n    label: '',\n  },\n}\n","export default {\n  labs: {\n    lab: {\n      code: '',\n    },\n  },\n}\n","export default {\n  patient: {\n    firstName: '',\n    lastName: '',\n    medications: {\n      label: '',\n      new: '',\n      warning: {\n        noMedications: '',\n      },\n      noMedicationsMessage: '',\n    },\n  },\n}\n","export default {\n  patients: {\n    label: '',\n    viewPatients: '',\n    viewPatient: '',\n    editPatient: '',\n    newPatient: '',\n  },\n}\n","export default {\n  settings: {\n    label: '',\n    language: {\n      label: '',\n    },\n  },\n}\n","export default {\n  medications: {\n    label: '',\n    filterTitle: '',\n    search: '',\n    status: {\n      draft: '',\n      active: '',\n      onHold: '',\n      cancelled: '',\n      completed: '',\n      enteredInError: '',\n      stopped: '',\n      unknown: '',\n    },\n    intent: {\n      proposal: '',\n      plan: '',\n      order: '',\n      originalOrder: '',\n      reflexOrder: '',\n      fillerOrder: '',\n      instanceOrder: '',\n      option: '',\n    },\n    priority: {\n      routine: '',\n      urgent: '',\n      asap: '',\n      stat: '',\n    },\n    filter: {\n      all: '',\n    },\n    requests: {\n      label: '',\n      new: '',\n      view: '',\n      cancel: '',\n      complete: '',\n      error: {\n        unableToRequest: '',\n        unableToComplete: '',\n        quantityRequired: '',\n        unitRequired: '',\n      },\n    },\n    medication: {\n      medication: '',\n      for: '',\n      status: '',\n      intent: '',\n      priority: '',\n      notes: '',\n      quantity: '',\n      quantityValue: '',\n      quantityUnit: '',\n      requestedOn: '',\n      requestedBy: '',\n      completedOn: '',\n      canceledOn: '',\n      patient: '',\n    },\n  },\n}\n","import actions from './actions'\nimport dashboard from './dashboard'\nimport labs from './labs'\nimport medications from './medications'\nimport patient from './patient'\nimport patients from './patients'\nimport scheduling from './scheduling'\nimport settings from './settings'\nimport sex from './sex'\nimport states from './states'\n\nexport default {\n  ...actions,\n  ...dashboard,\n  ...patient,\n  ...patients,\n  ...scheduling,\n  ...states,\n  ...sex,\n  ...labs,\n  ...settings,\n  ...medications,\n}\n","export default {\n  actions: {\n    label: 'Aes',\n    edit: 'Editar',\n    save: 'Salvar',\n    update: 'Atualizar',\n    complete: 'Completar',\n    delete: 'Eliminar',\n    cancel: 'Cancelar',\n    new: 'Novo',\n    list: 'Lista',\n    search: 'Pesquisar',\n    confirmDelete: 'Eliminar confirmao',\n  },\n}\n","export default {\n  dashboard: {\n    label: 'Painel de controle',\n  },\n}\n","export default {\n  patient: {\n    code: 'Cdigo do paciente',\n    firstName: 'Nome',\n    lastName: 'Sobrenome',\n    suffix: 'Sufixo',\n    prefix: 'Prefixo',\n    givenName: 'Nome Prprio',\n    familyName: 'Nome de Famlia',\n    dateOfBirth: 'Data de Nascimento',\n    approximateDateOfBirth: 'Data de Nascimento Aproximada',\n    age: 'Idade',\n    approximateAge: 'Idade Aproximada',\n    placeOfBirth: 'Local de Nascimento',\n    sex: 'Sexo',\n    phoneNumber: 'Nmero de Telefone',\n    email: 'E-mail',\n    address: 'Endereo',\n    occupation: 'Ocupao',\n    type: 'Tipo de Paciente',\n    preferredLanguage: 'Idioma de Preferncia',\n    basicInformation: 'Informao Bsica',\n    generalInformation: 'Informao Geral',\n    contactInformation: 'Informao de Contato',\n    unknownDateOfBirth: 'Data de Nascimento Desconhecida',\n    relatedPerson: 'Pessoa Relacionada',\n    relatedPersons: {\n      error: {\n        unableToAddRelatedPerson: 'Impossibilidade de adicionar nova pessoa relacionadas.',\n        relatedPersonRequired: 'Pessoa relacionada  necessria.',\n        relationshipTypeRequired: 'Tipo de relacionamento  necessrio.',\n      },\n      label: 'Pessoas Relacionadas',\n      new: 'Nova Pessoa Relacionada',\n      add: 'Addicione Pessoa Relacionada',\n      relationshipType: 'Tipo de Relacionamento',\n      warning: {\n        noRelatedPersons: 'Sem pessoas relacionadas',\n      },\n      addRelatedPersonAbove: 'Addicione uma pessoa relacionada utilizando o boto acima.',\n    },\n    appointments: {\n      new: 'Adicionar um compromisso',\n    },\n    allergies: {\n      label: 'Alergias',\n      allergyName: 'Nome da Alergia',\n      new: 'Adicionar alergia',\n      error: {\n        nameRequired: 'Nome da alergia  necessrio.',\n        unableToAdd: 'Impossibilidade de adicionar alergia.',\n      },\n      warning: {\n        noAllergies: 'Sem alergias',\n      },\n      addAllergyAbove: 'Adicione uma alergia utilizando o boto acima.',\n      successfullyAdded: 'Uma nova alergia foi adicionada com sucesso!',\n    },\n    diagnoses: {\n      label: 'Diagnsticos',\n      new: 'Novo diagnsticos',\n      diagnosisName: 'Nome do diagnstico',\n      diagnosisDate: 'Data do diagnstico',\n      warning: {\n        noDiagnoses: 'Sem diagnsticos',\n      },\n      error: {\n        nameRequired: 'Nome do diagnstico  necessrio.',\n        dateRequired: 'Data do diagnstico  necessria.',\n      },\n      addDiagnosisAbove: 'Adicione um diagnstico utilizando o boto acima.',\n      successfullyAdded: 'Um novo diagnstico foi adicionado com sucesso!',\n    },\n    note: 'Nota',\n    notes: {\n      label: 'Notas',\n      new: 'Adicionar novas notas',\n      warning: {\n        noNotes: 'Sem Notas',\n      },\n      error: {\n        noteRequired: 'Uma nota  necessrio.',\n        unableToAdd: 'Impossibilidade adicionar uma nova nota.',\n      },\n      addNoteAbove: 'Adicione uma nota utilizando o boto acima.',\n    },\n    medications: {\n      label: 'Remdios',\n      new: 'Adicionar novo medicamento',\n      warning: {\n        noMedications: 'Nomejikachion s',\n      },\n      noMedicationsMessage: 'Nenhum pedido de medicamentos para esta pessoa.',\n    },\n    types: {\n      charity: 'Caridade',\n      private: 'Particular',\n    },\n    errors: {\n      createPatientError: 'No foi possvel criar um paciente.',\n      updatePatientError: 'No foi possvel atualizar o paciente',\n      patientGivenNameFeedback: 'Nome do Paciente  necessrio.',\n      patientDateOfBirthFeedback: 'Data de Nascimento no pode ser maior que hoje.',\n    },\n  },\n}\n","export default {\n  patients: {\n    label: 'Pacientes',\n    patientsList: 'Lista de pacientes',\n    viewPatients: 'Exibir pacientes',\n    viewPatient: 'Ver paciente',\n    newPatient: 'Novo Paciente',\n    editPatient: 'Mudar paciente',\n    successfullyCreated: 'Paciente criado com sucesso',\n    successfullyAddedNote: 'Adicionou uma nova nota com sucesso',\n    successfullyAddedRelatedPerson: 'Adicionou uma pessoa relacionada com sucesso',\n  },\n}\n","export default {\n  scheduling: {\n    label: 'Agendamento',\n    appointments: {\n      label: 'Agendamantos',\n      new: 'Novo Agendamento',\n      schedule: 'Agenda de compromissos',\n      editAppointment: 'Editar um compromisso',\n      deleteAppointment: 'Eliminar um compromisso',\n      viewAppointment: 'Ver um compromisso',\n    },\n    appointment: {\n      startDate: 'Data de incio',\n      endDate: 'Data final',\n      location: 'Localizao',\n      type: 'Tipo',\n      types: {\n        checkup: 'Checkup',\n        emergency: 'Emergncia',\n        followUp: 'Acompanhamento',\n        routine: 'Rotina',\n        walkIn: 'Primeira consulta',\n      },\n      errors: {\n        patientRequired: 'Paciente  necessario.',\n        startDateMustBeBeforeEndDate: 'Horrio de incio deve ser antes do horrio final.',\n      },\n      reason: 'Razo',\n      patient: 'Paciente',\n      deleteConfirmationMessage: 'Tem a certeza de que deseja eliminar este compromisso?',\n      successfullyCreated: 'Compromisso criado com sucesso',\n    },\n  },\n}\n","export default {\n  states: {\n    success: 'Sucesso!',\n    error: 'Algo deu errado..',\n  },\n}\n","export default {\n  sex: {\n    male: 'Masculino',\n    female: 'Feminino',\n    other: 'Outro',\n    unknown: 'Desconhecido',\n  },\n}\n","export default {\n  labs: {\n    label: 'Laboratrio',\n    requests: {\n      label: 'Pedidos de Laboratrio',\n      new: 'Novo Pedido de Laboratrio',\n      view: 'Ver Laboratrio',\n      cancel: 'Cancelar Laboratrio',\n      complete: 'Completar Laboratrio',\n      error: {\n        unableToRequest: 'Impossibilidade de criar um novo pedido de laboratrio.',\n        unableToComplete: 'Impossibilidade de completar o pedido de laboratrio.',\n        typeRequired: 'O tipo  necessrio.',\n        resultRequiredToComplete: 'O resultado  necessrio para completar.',\n      },\n    },\n    lab: {\n      code: 'Cdigo',\n      status: 'Estado',\n      for: 'Por',\n      type: 'Tipo',\n      result: 'Result',\n      notes: 'Resultado',\n      requestedOn: 'Perdiu em',\n      completedOn: 'Completou em',\n      canceledOn: 'Cancelou em',\n      patient: 'Paciente',\n    },\n  },\n}\n","export default {\n  settings: {},\n}\n","export default {\n  medications: {\n    label: 'Remdios',\n    filterTitle: 'Filtrar por status',\n    search: 'Pesquisar medicamentos',\n    status: {\n      draft: 'Esboo, projeto',\n      active: 'Ativa',\n      onHold: 'Em espera',\n      cancelled: 'Cancelada',\n      completed: 'Concluda',\n      enteredInError: 'Erro inserido',\n      stopped: 'Parada',\n      unknown: 'Desconhecida',\n    },\n    intent: {\n      proposal: 'Proposta',\n      plan: 'Plano',\n      order: 'Ordem',\n      originalOrder: 'Pedido Original',\n      reflexOrder: 'Ordem de Reflexo',\n      fillerOrder: 'Pedido de Enchimento',\n      instanceOrder: 'Pedido de Instncia',\n      option: 'Opo',\n    },\n    priority: {\n      routine: 'Rotina',\n      urgent: 'Urgente',\n      asap: 'Assim que possvel',\n      stat: 'Estado',\n    },\n    filter: {\n      all: 'Todos os status',\n    },\n    requests: {\n      label: 'Pedidos de medicao',\n      new: 'Solicitar Medicao',\n      view: 'Ver medicao',\n      cancel: 'Cancelar medicao',\n      complete: 'Medicao Completa',\n      error: {\n        unableToRequest: 'Incapaz de criar um pedido de medicao.',\n        unableToComplete: 'Incapaz de completar o pedido de medicao.',\n        quantityRequired: 'A quantidade  obrigatria.',\n        unitRequired: 'A unidade  necessria.',\n      },\n    },\n    medication: {\n      medication: 'Medicamento',\n      for: 'Para',\n      status: 'Status',\n      intent: 'Inteno',\n      priority: 'Prioridade',\n      notes: 'Notas',\n      quantity: 'Quantidade',\n      quantityValue: 'Valor',\n      quantityUnit: 'Unidade',\n      requestedOn: 'Solicitado em',\n      requestedBy: 'Requerido por',\n      completedOn: 'Completo em',\n      canceledOn: 'Cancelado em',\n      patient: 'Paciente',\n    },\n  },\n}\n","import actions from './actions'\nimport bloodType from './blood-type'\nimport dashboard from './dashboard'\nimport imagings from './imagings'\nimport incidents from './incidents'\nimport labs from './labs'\nimport medications from './medications'\nimport networkStatus from './network-status'\nimport patient from './patient'\nimport patients from './patients'\nimport scheduling from './scheduling'\nimport settings from './settings'\nimport sex from './sex'\nimport states from './states'\n\nexport default {\n  ...actions,\n  ...dashboard,\n  ...sex,\n  ...incidents,\n  ...networkStatus,\n  ...labs,\n  ...states,\n  ...scheduling,\n  ...patient,\n  ...patients,\n  ...settings,\n  ...medications,\n  ...bloodType,\n  ...imagings,\n}\n","export default {\n  actions: {\n    edit: '',\n    save: '',\n    cancel: '',\n    new: '',\n    list: '',\n    label: '',\n    update: '',\n    complete: '',\n    delete: '',\n    search: '',\n    confirmDelete: ' ',\n    next: '',\n    previous: '',\n    page: '',\n    add: '',\n    view: '',\n    logout: '',\n  },\n}\n","export default {\n  dashboard: {\n    label: ' ',\n  },\n}\n","export default {\n  sex: {\n    male: '',\n    female: '',\n    other: '',\n    unknown: '',\n  },\n}\n","export default {\n  incidents: {\n    filterTitle: '  ',\n    label: '',\n    actions: {\n      report: '',\n    },\n    status: {\n      reported: '',\n      resolved: '',\n      all: '',\n    },\n    reports: {\n      label: ' ',\n      new: '  ',\n      view: ' ',\n      resolve: ' ',\n      dateOfIncident: ' ',\n      download: '',\n      department: '',\n      category: '',\n      categoryItem: '',\n      description: ' ',\n      patient: '',\n      code: '',\n      reportedBy: ' ',\n      reportedOn: ' ',\n      resolvedOn: ' ',\n      status: '',\n      error: {\n        dateRequired: '  .',\n        dateMustBeInThePast: '    .',\n        departmentRequired: '  .',\n        categoryRequired: '  ',\n        categoryItemRequired: '  ',\n        descriptionRequired: '  ',\n      },\n    },\n    visualize: {\n      label: '',\n      view: ' ',\n    },\n  },\n}\n","export default {\n  networkStatus: {\n    offline: '    ',\n    online: '  ',\n  },\n}\n","export default {\n  labs: {\n    label: '',\n    filterTitle: '  ',\n    search: ' ',\n    successfullyUpdated: ' ',\n    successfullyCompleted: ' ',\n    successfullyCreated: ' ',\n    status: {\n      requested: '',\n      completed: '',\n      canceled: '',\n    },\n    filter: {\n      all: ' ',\n    },\n    requests: {\n      label: ' ',\n      new: '  ',\n      save: ' ',\n      view: ' ',\n      cancel: ' ',\n      complete: ' ',\n      update: ' ',\n      error: {\n        unableToRequest: '    .',\n        unableToComplete: '  .',\n        typeRequired: '  .',\n        patientRequired: '  .',\n        resultRequiredToComplete: '  .',\n      },\n    },\n    lab: {\n      code: ' ',\n      status: '',\n      for: '',\n      type: '',\n      result: '',\n      notes: '',\n      requestedOn: ' ',\n      completedOn: ' ',\n      canceledOn: ' ',\n      patient: '',\n    },\n  },\n}\n","export default {\n  states: {\n    success: '!',\n    error: '!',\n  },\n}\n","export default {\n  scheduling: {\n    label: '',\n    appointments: {\n      label: '',\n      new: ' ',\n      schedule: ' ',\n      editAppointment: ' ',\n      createAppointment: ' ',\n      deleteAppointment: ' ',\n      viewAppointment: ' ',\n      updateAppointment: ' ',\n    },\n    appointment: {\n      startDate: ' ',\n      endDate: ' ',\n      location: '',\n      type: '',\n      types: {\n        checkup: '',\n        emergency: '',\n        followUp: '',\n        routine: '',\n        walkIn: ' ',\n      },\n      errors: {\n        createAppointmentError: '  .',\n        updateAppointmentError: '  .',\n        patientRequired: '  .',\n        startDateMustBeBeforeEndDate: '       .',\n      },\n      reason: '',\n      patient: '',\n      deleteConfirmationMessage: ' ,    ?',\n      successfullyCreated: '  .',\n      successfullyDeleted: '  .',\n      successfullyUpdated: '  .',\n    },\n  },\n}\n","export default {\n  patient: {\n    label: '',\n    code: ' ',\n    firstName: '',\n    lastName: '',\n    suffix: '',\n    prefix: '',\n    givenName: '',\n    familyName: '',\n    dateOfBirth: ' ',\n    approximateDateOfBirth: '  ',\n    age: '',\n    approximateAge: ' ',\n    placeOfBirth: ' ',\n    sex: '',\n    bloodType: ' ',\n    contactInfoType: {\n      label: '',\n      options: {\n        home: '',\n        mobile: '',\n        work: '',\n        temporary: '',\n        old: '',\n      },\n    },\n    phoneNumber: ' ',\n    email: 'Email',\n    address: '',\n    occupation: ' ',\n    type: ' ',\n    preferredLanguage: ' ',\n    basicInformation: ' ',\n    generalInformation: ' ',\n    contactInformation: ' ',\n    unknownDateOfBirth: '',\n    relatedPerson: '',\n    relatedPersons: {\n      error: {\n        unableToAddRelatedPerson: '   .',\n        relatedPersonRequired: '  .',\n        relationshipTypeRequired: '   .',\n      },\n      label: '',\n      new: ' ',\n      add: ' ',\n      relationshipType: ' ',\n      warning: {\n        noRelatedPersons: ' ',\n      },\n      addRelatedPersonAbove: ' ,   .',\n    },\n    appointments: {\n      new: ' ',\n      warning: {\n        noAppointments: ' ',\n      },\n      addAppointmentAbove: ' ,   .',\n    },\n    allergies: {\n      label: '',\n      allergyName: ' ',\n      new: ' ',\n      error: {\n        nameRequired: '  .',\n        unableToAdd: '  .',\n      },\n      warning: {\n        noAllergies: ' ',\n      },\n      addAllergyAbove: ' ,   .',\n      successfullyAdded: '  !',\n    },\n    diagnoses: {\n      label: '',\n      new: ' ',\n      diagnosisName: '',\n      diagnosisDate: '',\n      onsetDate: ' ',\n      abatementDate: ' ',\n      visit: '',\n      status: '',\n      active: '',\n      recurrence: '',\n      relapse: '',\n      inactive: '',\n      remission: '',\n      resolved: '',\n      note: '',\n      warning: {\n        noDiagnoses: ' ',\n      },\n      error: {\n        nameRequired: '   .',\n        dateRequired: '   .',\n        unableToAdd: '  ',\n      },\n      addDiagnosisAbove: ' ,   .',\n      successfullyAdded: '   !',\n    },\n    note: '',\n    notes: {\n      label: '',\n      new: '  ',\n      warning: {\n        noNotes: ' ',\n      },\n      error: {\n        noteRequired: '  .',\n        unableToAdd: '   .',\n      },\n      addNoteAbove: ' ,   .',\n    },\n    medications: {\n      label: '',\n      new: '  ',\n      warning: {\n        noMedications: ' ',\n      },\n      noMedicationsMessage: '      .',\n    },\n    labs: {\n      label: '',\n      new: '  ',\n      warning: {\n        noLabs: ' ',\n      },\n      noLabsMessage: '     .',\n    },\n    careGoal: {\n      new: '  ',\n      label: ' ',\n      title: '',\n      description: '',\n      status: '',\n      achievementStatus: ' ',\n      priority: {\n        label: '',\n        low: '',\n        medium: '',\n        high: '',\n      },\n      startDate: ' ',\n      dueDate: ' ',\n      note: '',\n      error: {\n        unableToAdd: '   .',\n        descriptionRequired: '  .',\n        priorityRequired: '  .',\n        statusRequired: '  .',\n        achievementStatusRequired: '   .',\n        startDate: '   .',\n        dueDate: '   .',\n        dueDateMustBeAfterStartDate: '     .',\n      },\n    },\n    careGoals: {\n      warning: {\n        noCareGoals: '  ',\n        addCareGoalAbove: '  ,   .',\n      },\n    },\n    carePlan: {\n      new: '  ',\n      label: ' ',\n      title: '',\n      description: '',\n      status: '',\n      condition: '',\n      intent: '',\n      startDate: ' ',\n      endDate: ' ',\n      note: '',\n      error: {\n        unableToAdd: '   .',\n        titleRequired: '  .',\n        descriptionRequired: '  .',\n        conditionRequired: '  .',\n        statusRequired: '  .',\n        intentRequired: '  .',\n        startDate: '   .',\n        endDate: '   ',\n      },\n    },\n    carePlans: {\n      warning: {\n        noCarePlans: '  ',\n        addCarePlanAbove: '  ,   .',\n      },\n    },\n    visit: '',\n    history: {\n      label: '',\n      eventDate: ' ',\n      recordType: ' ',\n      information: '',\n      noHistoryTitle: ' ',\n      noHistoryMessage: '    ',\n    },\n    visits: {\n      new: ' ',\n      label: '',\n      startDateTime: ' ',\n      endDateTime: ' ',\n      type: '',\n      status: '',\n      reason: '',\n      location: '',\n      error: {\n        unableToAdd: '  .',\n        startDateRequired: '   .',\n        endDateRequired: '   .',\n        endDateMustBeAfterStartDate: '     .',\n        typeRequired: '  .',\n        statusRequired: '  .',\n        reasonRequired: '  .',\n        locationRequired: '  .',\n      },\n      warning: {\n        noVisits: ' ',\n        addVisitAbove: ' ,   .',\n      },\n    },\n    types: {\n      charity: '',\n      private: '',\n    },\n    errors: {\n      createPatientError: '   .',\n      updatePatientError: '   .',\n      patientGivenNameFeedback: '  .',\n      patientDateOfBirthFeedback: '       ',\n      patientNumInSuffixFeedback: '   .',\n      patientNumInPrefixFeedback: '   ',\n      patientNumInFamilyNameFeedback: '   ',\n      patientNumInPreferredLanguageFeedback: '   ',\n      invalidEmail: ' email.',\n      invalidPhoneNumber: '  .',\n    },\n  },\n}\n","export default {\n  patients: {\n    label: '',\n    warning: '!',\n    viewPatients: ' ',\n    noPatients: '  ,   !',\n    viewPatient: ' ',\n    createPatient: ' ',\n    editPatient: ' ',\n    newPatient: ' ',\n    updatePatient: '  ',\n    patientsList: ' ',\n    successfullyCreated: '  ',\n    successfullyAddedNote: '   ',\n    successfullyAddedRelatedPerson: '   ',\n    successfullyUpdated: '    ',\n    possibleDuplicatePatient: '  :',\n    duplicatePatientWarning:\n      '       .  ,     ?',\n  },\n}\n","export default {\n  settings: {\n    label: '',\n    language: {\n      label: '',\n    },\n  },\n}\n","export default {\n  medications: {\n    label: '',\n    filterTitle: '  ',\n    search: ' ',\n    status: {\n      draft: '',\n      active: '',\n      onHold: ' ',\n      canceled: '',\n      completed: '',\n      enteredInError: '  ',\n      stopped: '',\n      unknown: '',\n    },\n    intent: {\n      proposal: '',\n      plan: ' ',\n      order: '',\n      originalOrder: ' ',\n      reflexOrder: ' ',\n      fillerOrder: ' ',\n      instanceOrder: ' ',\n      option: '',\n    },\n    priority: {\n      routine: '',\n      urgent: '',\n      asap: '  ',\n      stat: '',\n    },\n    filter: {\n      all: ' ',\n    },\n    requests: {\n      label: '  ',\n      new: ' ',\n      view: ' ',\n      cancel: ' ',\n      complete: ' ',\n      update: ' ',\n      error: {\n        unableToRequest: '    .',\n        unableToComplete: '    .',\n        quantityRequired: ' .',\n        unitRequired: ' .',\n      },\n    },\n    medication: {\n      medication: '',\n      for: '',\n      status: '',\n      intent: '',\n      priority: '',\n      notes: '',\n      quantity: '',\n      quantityValue: '',\n      quantityUnit: ' ',\n      requestedOn: '',\n      requestedBy: '',\n      completedOn: '',\n      canceledOn: '',\n      patient: '',\n    },\n  },\n}\n","export default {\n  bloodType: {\n    apositive: 'A+ (II+)',\n    anegative: 'A- (II-)',\n    abpositive: 'AB+(IV+)',\n    abnegative: 'AB-(IV-)',\n    bpositive: 'B+ (III+)',\n    bnegative: 'B- (III-)',\n    opositive: 'O+ (I+)',\n    onegative: 'O- (I-)',\n    unknown: ' ',\n  },\n}\n","export default {\n  imagings: {\n    label: '',\n    status: {\n      requested: '',\n      completed: '',\n      canceled: '',\n    },\n    requests: {\n      label: ' ',\n      new: '  ',\n      view: ' ',\n      create: '',\n      cancel: '',\n      complete: '',\n      error: {\n        unableToRequest: '    .',\n        incorrectStatus: ' ',\n        typeRequired: '  .',\n        statusRequired: '  .',\n        patientRequired: '  .',\n      },\n    },\n    imaging: {\n      label: '',\n      code: ' ',\n      status: '',\n      type: '',\n      notes: '',\n      requestedOn: ' ',\n      completedOn: ' ',\n      canceledOn: ' ',\n      requestedBy: ' ',\n      patient: '',\n    },\n  },\n}\n","import actions from './actions'\nimport bloodType from './blood-type'\nimport dashboard from './dashboard'\nimport imagings from './imagings'\nimport incidents from './incidents'\nimport labs from './labs'\nimport medications from './medications'\nimport networkStatus from './network-status'\nimport patient from './patient'\nimport patients from './patients'\nimport scheduling from './scheduling'\nimport settings from './settings'\nimport sex from './sex'\nimport states from './states'\nimport user from './user'\n\nexport default {\n  ...actions,\n  ...dashboard,\n  ...networkStatus,\n  ...patient,\n  ...patients,\n  ...scheduling,\n  ...states,\n  ...sex,\n  ...labs,\n  ...medications,\n  ...incidents,\n  ...settings,\n  ...user,\n  ...bloodType,\n  ...imagings,\n}\n","export default {\n  actions: {\n    label: 'Eylemler',\n    edit: 'Dzenle',\n    save: 'Kaydet',\n    update: 'Gncelle',\n    complete: 'Tamamla',\n    delete: 'Sil',\n    cancel: 'ptal',\n    new: 'Yeni',\n    list: 'Liste',\n    search: 'Ara',\n    confirmDelete: 'Seilenleri Sil',\n    next: 'Sonraki',\n    page: 'Sayfa',\n    previous: 'nceki',\n    add: 'Ekle',\n    name: 'sim',\n    view: 'Grnle',\n    logout: 'k',\n  },\n}\n","export default {\n  dashboard: {\n    label: 'Panel',\n  },\n}\n","export default {\n  networkStatus: {\n    offline: \"Ofline Mod'da alyorsunuz\",\n    online: 'u an online moddasnz',\n  },\n}\n","export default {\n  patient: {\n    label: 'Hasta',\n    code: 'Hasta Kodu',\n    firstName: 'sim',\n    lastName: 'Soyisim',\n    suffix: 'Son ek',\n    prefix: 'nvan',\n    givenName: 'sim',\n    familyName: 'Soyisim',\n    dateOfBirth: 'Doum Tarihi',\n    approximateDateOfBirth: 'Yaklak Doum Tarihi',\n    age: 'Ya',\n    approximateAge: 'Yaklak Ya',\n    placeOfBirth: 'Doum Yeri',\n    sex: 'Cinsiyet',\n    bloodType: 'Kan Grubu',\n    contactInfoType: {\n      label: 'Tr',\n      options: {\n        home: 'Ev',\n        mobile: 'Mobil',\n        work: '',\n        temporary: 'Geici',\n        old: 'Eski',\n      },\n    },\n    phoneNumber: 'Telefon Numaras',\n    email: 'Email',\n    address: 'Adres',\n    occupation: 'Meslek',\n    type: 'Hasta Tipi',\n    preferredLanguage: 'Tercih Edilen Dil',\n    basicInformation: 'Temel Bilgi',\n    generalInformation: 'Genel Bilgi',\n    contactInformation: 'letiim Bilgisi',\n    unknownDateOfBirth: 'Doum Tarihi Bilinmiyor',\n    relatedPerson: 'Akraba',\n    relatedPersons: {\n      error: {\n        unableToAddRelatedPerson: 'Akraba ksmna yeni kii eklenemiyor.',\n        relatedPersonRequired: 'Akraba alan gereklidir.',\n        relationshipTypeRequired: 'Akrabalk tr gereklidir.',\n      },\n      label: 'Akraba',\n      new: 'Yeni Akraba',\n      add: 'Akrabay Ekle',\n      relationshipType: 'Akrabalk Tr',\n      warning: {\n        noRelatedPersons: 'Akraba bulunamad.',\n      },\n      addRelatedPersonAbove: 'stteki buton ile yeni akraba ekleyebilirsiniz.',\n    },\n    appointments: {\n      new: 'Yeni Randevu Ekle',\n      warning: {\n        noAppointments: 'Randevu Yok',\n      },\n      addAppointmentAbove: 'stteki buton ile yeni randevu ekleyebilirsiniz.',\n    },\n    allergies: {\n      label: 'Alerjiler',\n      allergyName: 'Alerji Ad',\n      new: 'Yeni Alerji Ekle',\n      error: {\n        nameRequired: 'Ad girilmesi zorunludur.',\n        unableToAdd: 'Alerji eklenemiyor.',\n      },\n      warning: {\n        noAllergies: 'Alerji kayd yok.',\n      },\n      addAllergyAbove: 'stteki buton ile yeni alerji ekleyebilirsiniz.',\n      successfullyAdded: 'Yeni alerji kayd baarl bir ekilde eklendi!',\n    },\n    diagnoses: {\n      label: 'Tanlar',\n      new: 'Yeni Tan Ekle',\n      diagnosisName: 'Tan Ad',\n      diagnosisDate: 'Tan Eklenme Tarihi',\n      onsetDate: 'Balang Tarihi',\n      abatementDate: 'Azalma Tarihi',\n      visit: 'Ziyaret',\n      status: 'Durum',\n      active: 'Aktif',\n      recurrence: 'Nksetme',\n      relapse: 'Ktleme',\n      inactive: 'Pasif',\n      remission: 'Hafifleme',\n      resolved: 'Tedavi Edildi',\n      note: 'Not',\n      warning: {\n        noDiagnoses: 'Tan kayd bulunamad.',\n      },\n      error: {\n        nameRequired: 'Tan Ad girilmesi zorunludur.',\n        dateRequired: 'Tan Ekleme Tarihi girilmesi zorunludur.',\n        unableToAdd: 'Yeni tan eklenemiyor.',\n      },\n      addDiagnosisAbove: 'stteki buton ile yeni tan ekleyebilirsiniz.',\n      successfullyAdded: 'Yeni tan kayd baarl bir ekilde eklendi!',\n    },\n    note: 'Not',\n    notes: {\n      label: 'Notlar',\n      new: 'Yeni Not Ekle',\n      warning: {\n        noNotes: 'Not bulunamad.',\n      },\n      error: {\n        noteRequired: 'Not ksm doldurulmas zorunludur.',\n        unableToAdd: 'Yeni not eklenemiyor.',\n      },\n      addNoteAbove: 'stteki buton ile yeni not ekleyebilirsiniz.',\n    },\n    labs: {\n      label: 'Laboratuvarlar',\n      new: 'Yeni Laboratuvar Ekle',\n      warning: {\n        noLabs: 'Laboratuvar bulunamad.',\n      },\n      noLabsMessage: 'Bu hasta iin Laboratuvar kayd bulunamad.',\n    },\n    medications: {\n      label: 'lalar',\n      new: 'Yeni la Ekle',\n      warning: {\n        noMedications: 'la bulunamad.',\n      },\n      noMedicationsMessage: 'Bu hasta iin la kayd bulunamad.',\n    },\n    careGoal: {\n      new: 'Yeni Tedavi Hedefi Ekle',\n      label: 'Tedavi Hedefleri',\n      title: 'Balk',\n      description: 'Aklama',\n      status: 'Durum',\n      achievementStatus: 'Baar Durumu',\n      priority: {\n        label: 'ncelik',\n        low: 'dk',\n        medium: 'orta',\n        high: 'yksek',\n      },\n      startDate: 'Balang Zaman',\n      dueDate: 'Planlanan Biti Zaman',\n      note: 'Not',\n      error: {\n        unableToAdd: 'Yeni tedavi hedefi eklenemiyor.',\n        descriptionRequired: 'Aklama alannn doldurulmas zorunludur.',\n        priorityRequired: 'ncelik bilgisinin girilmesi zorunludur.',\n        statusRequired: 'Durum bilgisinin girilmesi zorunludur.',\n        achievementStatusRequired: 'Baar Durumu bilgisinin girilmesi zorunludur.',\n        startDate: 'Balang Zaman bilgisinin girilmesi zorunludur.',\n        dueDate: 'Planlanan Biti Zaman bilgisinin girilmesi zorunludur.',\n        dueDateMustBeAfterStartDate:\n          'Planlanan Biti Zaman Balang Zamanndan sonra olmak zorundadr.',\n      },\n    },\n    careGoals: {\n      warning: {\n        noCareGoals: 'Tedavi Hedefi Yok.',\n        addCareGoalAbove: 'stteki buton ile yeni tedavi hedefi ekleyebilirsiniz.',\n      },\n    },\n    carePlan: {\n      new: 'Yeni Tedavi Plan Ekle',\n      label: 'Tedavi Planlar',\n      title: 'Balk',\n      description: 'Aklama',\n      status: 'Durum',\n      condition: 'art',\n      intent: 'Ama',\n      startDate: 'Balang Zaman',\n      endDate: 'Biti Zaman',\n      note: 'Not',\n      error: {\n        unableToAdd: 'Yeni tedavi plan eklenemiyor.',\n        titleRequired: 'Balk bilgisinin girilmesi zorunludur.',\n        descriptionRequired: 'Aklama bilgisinin girilmesi zorunludur.',\n        conditionRequired: 'art bilgisinin girilmesi zorunludur.',\n        statusRequired: 'Durum bilgisinin girilmesi zorunludur.',\n        intentRequired: 'Ama bilgisinin girilmesi zorunludur.',\n        startDate: 'Balang zaman bilgisinin girilmesi zorunludur.',\n        endDate: 'Biti zaman bilgisinin girilmesi zorunludur',\n      },\n    },\n    carePlans: {\n      warning: {\n        noCarePlans: 'Tedavi Plan Yok',\n        addCarePlanAbove: 'stteki buton ile yeni tedavi plan ekleyebilirsiniz.',\n      },\n    },\n    visit: 'Muayene',\n    visits: {\n      new: 'Yeni Muayene Ekle',\n      label: 'Muayeneler',\n      startDateTime: 'Balang Zaman',\n      endDateTime: 'Biti Zaman',\n      type: 'Tr',\n      status: 'Durum',\n      reason: 'Gereke',\n      location: 'Yer',\n      error: {\n        unableToAdd: 'Yeni muayene eklenemiyor.',\n        startDateRequired: 'Balang tarihi bilgisinin girilmesi zorunludur.',\n        endDateRequired: 'Biti tarihi bilgisinin girilmesi zorunludur.',\n        endDateMustBeAfterStartDate: 'Biti tarihi Balang tarihinden sonra olmaldr.',\n        typeRequired: 'Tr bilgisinin girilmesi zorunludur.',\n        statusRequired: 'Durum bilgisinin girilmesi zorunludur.',\n        reasonRequired: 'Gereke bilgisinin girilmesi zorunludur.',\n        locationRequired: 'Yer bilgisinin girilmesi zorunludur.',\n      },\n      warning: {\n        noVisits: 'Muayene Yok',\n        addVisitAbove: 'stteki buton ile yeni muayene ekleyebilirsiniz.',\n      },\n    },\n    types: {\n      charity: 'cretsiz/ndirimli',\n      private: 'zel',\n    },\n    errors: {\n      createPatientError: 'Yeni hasta eklenemiyor.',\n      updatePatientError: 'Hasta gncellenemiyor.',\n      patientGivenNameFeedback: 'sim alan zorunludur.',\n      patientDateOfBirthFeedback: 'Doum Tarihi bugnden byk olmamaldr.',\n      patientNumInSuffixFeedback: 'Rakam iermemelidir.',\n      patientNumInPrefixFeedback: 'Rakam iermemelidir.',\n      patientNumInFamilyNameFeedback: 'Rakam iermemelidir.',\n      patientNumInPreferredLanguageFeedback: 'Rakam iermemelidir.',\n      invalidEmail: 'Email adresi geerli bir adres olmaldr.',\n      invalidPhoneNumber: 'Telefon numaras geerli bir numara olmaldr.',\n    },\n  },\n}\n","export default {\n  patients: {\n    label: 'Hastalar',\n    warning: 'Warning!',\n    patientsList: 'Hasta Listesi',\n    viewPatients: 'Hastalar Grntle',\n    noPatients: 'Henz bir hasta yok hadi bir tane ekleyelim!',\n    viewPatient: 'Hastay Kaydn Grntle',\n    createPatient: 'Hasta Kaydn Olutur',\n    newPatient: 'Yeni Hasta Kayd',\n    editPatient: 'Hasta Kaydn Dzenle',\n    updatePatient: 'Hasta Kaydn Gncelle',\n    successfullyCreated: 'Yeni hasta kady baarl bir ekilde oluturuldu.',\n    successfullyAddedNote: 'Yeni not baarl bir ekilde eklendi.',\n    successfullyAddedRelatedPerson: 'Akraba baarl bir ekilde eklendi.',\n    successfullyUpdated: 'Baarl bir ekilde bilgisi gncellendi: ',\n    possibleDuplicatePatient: 'Muhtemel tekrarl kayt bulundu:',\n    duplicatePatientWarning:\n      'Bu bilgilerle eleen bir hasta kayd bulundu. Yine de bu hasta kaydn oluturmak istiyor musunuz?',\n  },\n}\n","export default {\n  scheduling: {\n    label: 'Planlama',\n    appointments: {\n      label: 'Randevular',\n      new: 'Yeni Randevu Olutur',\n      schedule: 'Randevuyu Planla',\n      editAppointment: 'Randevuyu Dzenle',\n      createAppointment: 'Randevuyu Kaydet',\n      deleteAppointment: 'Randevuyu Sil',\n      viewAppointment: 'Randevuyu Grntle',\n      updateAppointment: 'Randevuyu Gncelle',\n    },\n    appointment: {\n      startDate: 'Balang Zaman',\n      endDate: 'Biti Zaman',\n      location: 'Yer',\n      type: 'Tr',\n      types: {\n        checkup: 'Check-up',\n        emergency: 'Acil',\n        followUp: 'Kontrol',\n        routine: 'Rutin',\n        walkIn: 'Rezervasyonsuz',\n      },\n      errors: {\n        createAppointmentError: 'Randevu kayd oluturulamyor!',\n        updateAppointmentError: 'Randevu kayd gncellenemiyor.',\n        patientRequired: 'Hasta alan zorunludur.',\n        startDateMustBeBeforeEndDate: 'Balang zaman Biti zamanndan nce olmaldr.',\n      },\n      reason: 'Gereke',\n      patient: 'Hasta',\n      deleteConfirmationMessage: 'Bu randevu kaydn silmek istediinize emin misiniz?',\n      successfullyCreated: 'Randevu kayd baarl bir ekilde oluturuldu.',\n      successfullyDeleted: 'Randevu kayd baarl bir ekilde silindi.',\n      successfullyUpdated: 'Randevu kayd baarl bir ekilde gncellendi.',\n    },\n  },\n}\n","export default {\n  states: {\n    success: 'Baarl!',\n    error: 'Hata!',\n  },\n}\n","export default {\n  sex: {\n    male: 'Erkek',\n    female: 'Kadn',\n    other: 'Dier',\n    unknown: 'Bilinmiyor',\n  },\n}\n","export default {\n  labs: {\n    label: 'Laboratuvarlar',\n    filterTitle: 'Duruma Gre Filtrele',\n    search: 'Laboratuvarlar inde Ara',\n    successfullyUpdated: 'Baarl bir ekilde gncellendi',\n    successfullyCompleted: 'Baarl bir ekilde tamamland',\n    successfullyCreated: 'Baarl bir ekilde oluturuldu',\n    status: {\n      requested: 'Talep Oluturuldu',\n      completed: 'Tamamland',\n      canceled: 'ptal Edildi',\n    },\n    filter: {\n      all: 'Tm Durumlar',\n    },\n    requests: {\n      label: 'Laboratuvar Talepleri',\n      new: 'Yeni Laboratuvar Talebi',\n      save: 'Request',\n      view: 'Laboratuvar Grntle',\n      cancel: 'Laboratuvar ptal Et',\n      complete: 'Laboratuvar Tamamla',\n      update: 'Update Lab',\n      error: {\n        unableToRequest: 'Yeni laboratuvar talebi oluturulamyor.',\n        unableToComplete: 'Laboratuvar talebi tamamlanamyor.',\n        typeRequired: 'Tr alannn doldurulmas zorunludur.',\n        patientRequired: 'Patient is required.',\n        resultRequiredToComplete: 'Tamamlama ilemi iin sonu gerekli.',\n      },\n    },\n    lab: {\n      code: 'Laboratuvar Kodu',\n      status: 'Durum',\n      for: 'in',\n      type: 'Tr',\n      result: 'Sonu',\n      notes: 'Notlar',\n      requestedOn: 'Talep Tarihi',\n      completedOn: 'Tamamlanma Tarihi',\n      canceledOn: 'ptal Tarih',\n      patient: 'Hasta',\n    },\n  },\n}\n","export default {\n  medications: {\n    label: 'lalar',\n    filterTitle: 'Durma Gre Filtrele',\n    search: 'lalar inde Ara',\n    status: {\n      draft: 'Tek Dozluk',\n      active: 'Aktif',\n      onHold: 'Ara Verildi',\n      canceled: 'ptal Edildi',\n      completed: 'Tamamland',\n      enteredInError: 'Hata ile girildi',\n      stopped: 'Durduruldu',\n      unknown: 'Bilinmiyor',\n    },\n    intent: {\n      proposal: 'neri',\n      plan: 'Plan',\n      order: 'Sipari',\n      originalOrder: 'Orijinal Sipari',\n      reflexOrder: 'Otomatik Oluturulmu Sipari',\n      fillerOrder: 'Doldurma Siparii',\n      instanceOrder: 'rnek Sipari',\n      option: 'Seim',\n    },\n    priority: {\n      routine: 'Rutin',\n      urgent: 'Acil',\n      asap: 'En Ksa Zamanda',\n      stat: 'Stat',\n    },\n    filter: {\n      all: 'Tm Durumlar',\n    },\n    requests: {\n      label: 'la Talepleri',\n      new: 'Yeni la Talebi',\n      view: 'la Kaydn Grntle',\n      cancel: 'la Kaydn ptal Et',\n      complete: 'la Kaydn Tamamla',\n      update: 'la Kaydn Gncelle',\n      error: {\n        unableToRequest: 'Yeni la talebi oluturulamyor.',\n        unableToComplete: 'la talebi tamamlanamyor.',\n        quantityRequired: 'Miktar alannn doldurulmas zorunludur.',\n        unitRequired: 'Birim alannn doldurulmas zorunludur.',\n      },\n    },\n    medication: {\n      medication: 'la',\n      for: 'in',\n      status: 'Durum',\n      intent: 'Sebep',\n      priority: 'ncelik',\n      notes: 'Notlar',\n      quantity: 'Miktar',\n      quantityValue: 'Deer olarak',\n      quantityUnit: 'Birim olarak',\n      requestedOn: 'Talep Tarihi',\n      requestedBy: 'Talep Eden',\n      completedOn: 'Tamamlanma Tarihi',\n      canceledOn: 'ptal Tarih',\n      patient: 'Hasta',\n    },\n  },\n}\n","export default {\n  incidents: {\n    filterTitle: ' Duruma Gre Filtrele',\n    label: 'Olaylar',\n    actions: {\n      report: 'Rapor',\n    },\n    status: {\n      reported: 'Raporland',\n      resolved: 'zld',\n      all: 'Tm',\n    },\n    reports: {\n      label: 'Raporlanm Ola',\n      new: 'Yeni Rapor Olutur',\n      view: 'Olay Grntle',\n      resolve: 'Olay z',\n      dateOfIncident: 'Olay Tarihi',\n      department: 'Departman',\n      download: 'ndir',\n      category: 'Kategori',\n      categoryItem: 'Kategori item',\n      description: 'Aklama',\n      patient: 'Hasta',\n      code: 'Kod',\n      reportedBy: 'Raporlayan',\n      reportedOn: 'Raporlanma Tarihi',\n      resolvedOn: 'zlme Tarihi',\n      status: 'Durum',\n      error: {\n        dateRequired: 'Tarih bilgisinin girilmesi zorunludur.',\n        dateMustBeInThePast: 'Tarih gemi olmas zorunludur.',\n        departmentRequired: 'Departman bilgisinin girilmesi zorunludur.',\n        categoryRequired: 'Kategori bilgisinin girilmesi zorunludur.',\n        categoryItemRequired: 'Kategori item bilgisinin girilmesi zorunludur.',\n        descriptionRequired: 'Aklama bilgisinin girilmesi zorunludur.',\n      },\n    },\n    visualize: {\n      label: 'Grselletir',\n      view: 'Raporu Grselletir',\n    },\n  },\n}\n","export default {\n  settings: {\n    label: 'Ayarlar',\n    language: {\n      label: 'Dil',\n    },\n  },\n}\n","export default {\n  user: {\n    login: {\n      error: {\n        message: {\n          required: 'Gerekli alanlar doldurulmaldr.',\n          incorrect: 'Yanl kullanc ad veya ifre.',\n        },\n        username: {\n          required: 'Kullanc ad alannn doldurulmas zorunludur.',\n        },\n        password: {\n          required: 'ifre alannn doldurulmas zorunludur.',\n        },\n      },\n      currentlySignedInAs: 'Giri yapan kullanc: ',\n    },\n  },\n}\n","export default {\n  bloodType: {\n    apositive: 'A+',\n    anegative: 'A-',\n    abpositive: 'AB+',\n    abnegative: 'AB-',\n    bpositive: 'B+',\n    bnegative: 'B-',\n    opositive: 'O+',\n    onegative: 'O-',\n    unknown: 'Bilinmiyor',\n  },\n}\n","export default {\n  imagings: {\n    label: 'Grntlemeler',\n    status: {\n      requested: 'Talep Edildi',\n      completed: 'Tamamland',\n      canceled: 'ptal Edildi',\n    },\n    requests: {\n      label: 'Grntleme Talepleri',\n      new: 'Yeni Grntleme Talebi',\n      view: 'Grntleme Detaylarn A',\n      create: 'Grntleme Talebini Olutur',\n      cancel: 'Grntleme Talebini ptal Et',\n      complete: 'Grntleme Talebini Tamamla',\n      error: {\n        unableToRequest: 'Yeni grntleme talebi oluturulamyor.',\n        incorrectStatus: 'Geersiz Durum',\n        typeRequired: 'Tr bilgisinin girilmesi zorunludur.',\n        statusRequired: 'Durum bilgisinin girilmesi zorunludur.',\n        patientRequired: 'Hasta ad bilgisinin girilmesi zorunludur.',\n      },\n    },\n    imaging: {\n      label: 'Grntleme',\n      code: 'Grntleme Kodu',\n      status: 'Durum',\n      type: 'Tr',\n      notes: 'Notlar',\n      requestedOn: 'Talep Tarihi',\n      completedOn: 'Tamamlanma Tarihi',\n      canceledOn: 'ptal Tarihi',\n      requestedBy: 'Talep Eden',\n      patient: 'Hasta',\n    },\n  },\n}\n","import actions from './actions'\nimport dashboard from './dashboard'\nimport labs from './labs'\nimport medications from './medications'\nimport patient from './patient'\nimport patients from './patients'\nimport settings from './settings'\n\nexport default {\n  ...actions,\n  ...dashboard,\n  ...labs,\n  ...patient,\n  ...patients,\n  ...settings,\n  ...medications,\n}\n","export default {\n  actions: {\n    edit: '',\n    save: '',\n    cancel: '',\n    new: '',\n    list: '',\n  },\n}\n","export default {\n  dashboard: {\n    label: '',\n  },\n}\n","export default {\n  labs: {\n    lab: {\n      code: ' ',\n    },\n  },\n}\n","export default {\n  patient: {\n    firstName: '',\n    lastName: '',\n    medications: {\n      label: '',\n      new: '',\n      warning: {\n        noMedications: '',\n      },\n      noMedicationsMessage: '',\n    },\n  },\n}\n","export default {\n  patients: {\n    label: '',\n    viewPatients: '',\n    viewPatient: '',\n    editPatient: '',\n    newPatient: '',\n  },\n}\n","export default {\n  settings: {},\n}\n","export default {\n  medications: {\n    label: '',\n    filterTitle: '',\n    search: '',\n    status: {\n      draft: '',\n      active: '',\n      onHold: '',\n      cancelled: '',\n      completed: '',\n      enteredInError: '',\n      stopped: '',\n      unknown: '',\n    },\n    intent: {\n      proposal: '',\n      plan: '',\n      order: '',\n      originalOrder: '',\n      reflexOrder: '',\n      fillerOrder: '',\n      instanceOrder: '',\n      option: '',\n    },\n    priority: {\n      routine: '',\n      urgent: '',\n      asap: '',\n      stat: '',\n    },\n    filter: {\n      all: '',\n    },\n    requests: {\n      label: '',\n      new: '',\n      view: '',\n      cancel: '',\n      complete: '',\n      error: {\n        unableToRequest: '',\n        unableToComplete: '',\n        quantityRequired: '',\n        unitRequired: '',\n      },\n    },\n    medication: {\n      medication: '',\n      for: '',\n      status: '',\n      intent: '',\n      priority: '',\n      notes: '',\n      quantity: '',\n      quantityValue: '',\n      quantityUnit: 'Unit',\n      requestedOn: '',\n      requestedBy: '',\n      completedOn: '',\n      canceledOn: '',\n      patient: '',\n    },\n  },\n}\n","import i18n from 'i18next'\nimport LanguageDetector from 'i18next-browser-languagedetector'\nimport { initReactI18next } from 'react-i18next'\n\nimport resources from '../locales'\n\ni18n\n  // load translation using xhr -> see /public/locales\n  // learn more: https://github.com/i18next/i18next-xhr-backend\n  // detect user language\n  // learn more: https://github.com/i18next/i18next-browser-languageDetector\n  .use(LanguageDetector)\n  // pass the i18n instance to react-i18next.\n  .use(initReactI18next)\n  // init i18next\n  // for all options read: https://www.i18next.com/overview/configuration-options\n  .init({\n    fallbackLng: 'en',\n    debug: true,\n    resources,\n    interpolation: {\n      escapeValue: false, // not needed for react as it escapes by default\n    },\n  })\n\nexport default i18n\nexport { resources }\n","import { Select, Label } from '@hospitalrun/components'\nimport sortBy from 'lodash/sortBy'\nimport React, { useState } from 'react'\n\nimport i18n, { resources } from '../../config/i18n'\nimport useTranslator from '../../hooks/useTranslator'\nimport { SelectOption } from './SelectOption'\n\nconst LanguageSelector = () => {\n  const { t } = useTranslator()\n  const [selected, setSelected] = useState(i18n.language)\n\n  let languageOptions: SelectOption[] = Object.keys(resources).map((abbr) => ({\n    label: resources[abbr].name,\n    value: abbr,\n  }))\n  languageOptions = sortBy(languageOptions, (o) => o.label)\n\n  const onChange = (value: string) => {\n    i18n.changeLanguage(value)\n    setSelected(value)\n  }\n\n  return (\n    <>\n      <Label text={t('settings.language.label')} title=\"language\" />\n      <Select\n        id=\"language\"\n        options={languageOptions}\n        defaultSelected={languageOptions.filter(({ value }) => value === selected)}\n        onChange={(values) => onChange(values[0])}\n      />\n    </>\n  )\n}\n\nexport default LanguageSelector\n","import DatePickerWithLabelFormGroup from './DatePickerWithLabelFormGroup'\nimport DateTimePickerWithLabelFromGroup from './DateTimePickerWithLabelFormGroup'\nimport LanguageSelector from './LanguageSelector'\nimport { SelectOption } from './SelectOption'\nimport TextFieldWithLabelFormGroup from './TextFieldWithLabelFormGroup'\nimport TextInputWithLabelFormGroup from './TextInputWithLabelFormGroup'\n\nexport type { SelectOption }\n\nexport default {\n  DatePickerWithLabelFormGroup,\n  DateTimePickerWithLabelFromGroup,\n  LanguageSelector,\n  TextFieldWithLabelFormGroup,\n  TextInputWithLabelFormGroup,\n}\n","import { useQuery } from 'react-query'\n\nimport PatientRepository from '../../shared/db/PatientRepository'\nimport Visit from '../../shared/model/Visit'\n\nasync function fetchPatientVisits(_: string, patientId: string): Promise<Visit[]> {\n  const patient = await PatientRepository.find(patientId)\n  return patient.visits || []\n}\n\nexport default function usePatientVisits(patientId: string) {\n  return useQuery(['visits', patientId], fetchPatientVisits)\n}\n","import { Select, Label, Alert, Row, Column } from '@hospitalrun/components'\nimport format from 'date-fns/format'\nimport React, { useState } from 'react'\nimport { useTranslation } from 'react-i18next'\n\nimport Input from '../../shared/components/input'\nimport { SelectOption } from '../../shared/components/input/SelectOption'\nimport Diagnosis, { DiagnosisStatus } from '../../shared/model/Diagnosis'\nimport Patient from '../../shared/model/Patient'\nimport usePatientVisits from '../hooks/usePatientVisits'\n\ninterface Error {\n  message?: string\n  name?: string\n  diagnosisDate?: string\n  onsetDate?: string\n  abatementDate?: string\n  status?: string\n  note?: string\n}\n\ninterface Props {\n  diagnosis: Partial<Diagnosis>\n  diagnosisError?: Error\n  onChange?: (newDiagnosis: Partial<Diagnosis>) => void\n  disabled: boolean\n  patient: Patient\n}\n\nconst DiagnosisForm = (props: Props) => {\n  const { t } = useTranslation()\n  const { diagnosis, diagnosisError, disabled, onChange, patient } = props\n  const [status, setStatus] = useState(diagnosis.status)\n  const { data: visits } = usePatientVisits(patient?.id)\n\n  const onFieldChange = (name: string, value: string | DiagnosisStatus) => {\n    if (onChange) {\n      const newDiagnosis = {\n        ...diagnosis,\n        [name]: value,\n      }\n      onChange(newDiagnosis)\n    }\n  }\n\n  const patientVisits = visits?.map((v) => ({\n    label: `${v.type} at ${format(new Date(v.startDateTime), 'yyyy-MM-dd, hh:mm a')}`,\n    value: v.id,\n  })) as SelectOption[]\n\n  const defaultSelectedVisitOption = () => {\n    if (patientVisits !== undefined) {\n      return patientVisits.filter(({ value }) => value === diagnosis.visit)\n    }\n    return []\n  }\n\n  const statusOptions: SelectOption[] = Object.values(DiagnosisStatus).map((v) => ({\n    label: v,\n    value: v,\n  }))\n\n  return (\n    <form aria-label=\"form\">\n      {diagnosisError && (\n        <Alert\n          color=\"danger\"\n          title={t('states.error')}\n          message={t(diagnosisError?.message || '')}\n        />\n      )}\n\n      <Row>\n        <Column md={12}>\n          <Input.TextInputWithLabelFormGroup\n            isRequired\n            value={diagnosis.name}\n            label={t('patient.diagnoses.diagnosisName')}\n            name=\"name\"\n            feedback={t(diagnosisError?.name || '')}\n            isInvalid={!!diagnosisError?.name}\n            isEditable={!disabled}\n            onChange={(event) => onFieldChange('name', event.currentTarget.value)}\n          />\n        </Column>\n      </Row>\n\n      <Row>\n        <Column md={12}>\n          <Input.DatePickerWithLabelFormGroup\n            name=\"diagnosisDate\"\n            label={t('patient.diagnoses.diagnosisDate')}\n            value={diagnosis.diagnosisDate ? new Date(diagnosis.diagnosisDate) : new Date()}\n            isEditable={!disabled}\n            onChange={(date) => onFieldChange('diagnosisDate', date.toISOString())}\n            isRequired\n            feedback={t(diagnosisError?.diagnosisDate || '')}\n            isInvalid={!!diagnosisError?.diagnosisDate}\n          />\n        </Column>\n      </Row>\n\n      <Row>\n        <Column md={12}>\n          <Input.DatePickerWithLabelFormGroup\n            name=\"onsetDate\"\n            label={t('patient.diagnoses.onsetDate')}\n            value={diagnosis.onsetDate ? new Date(diagnosis.onsetDate) : new Date()}\n            isEditable={!disabled}\n            onChange={(date) => onFieldChange('onsetDate', date.toISOString())}\n            isRequired\n            feedback={t(diagnosisError?.onsetDate || '')}\n            isInvalid={!!diagnosisError?.onsetDate}\n          />\n        </Column>\n      </Row>\n\n      <Row>\n        <Column md={12}>\n          <Input.DatePickerWithLabelFormGroup\n            name=\"abatementDate\"\n            label={t('patient.diagnoses.abatementDate')}\n            value={diagnosis.abatementDate ? new Date(diagnosis.abatementDate) : new Date()}\n            isEditable={!disabled}\n            isRequired\n            onChange={(date) => onFieldChange('abatementDate', date.toISOString())}\n            feedback={t(diagnosisError?.abatementDate || '')}\n            isInvalid={!!diagnosisError?.abatementDate}\n          />\n        </Column>\n      </Row>\n\n      <Row>\n        <Column md={12}>\n          <div className=\"form-group\" data-testid=\"visitSelect\">\n            <Label title=\"visit\" text={t('patient.diagnoses.visit')} />\n            <Select\n              id=\"visitSelect\"\n              options={patientVisits || []}\n              onChange={(values) => {\n                onFieldChange('visit', values[0])\n              }}\n              defaultSelected={defaultSelectedVisitOption()}\n              disabled={disabled}\n            />\n          </div>\n        </Column>\n      </Row>\n\n      <Row>\n        <Column md={12}>\n          <div className=\"form-group\" data-testid=\"statusSelect\">\n            <Label\n              text={t('patient.diagnoses.status')}\n              htmlFor=\"statusSelect\"\n              title=\"This is a required input\"\n              isRequired\n            />\n            <Select\n              id=\"statusSelect\"\n              options={statusOptions || []}\n              defaultSelected={statusOptions.filter(({ value }) => value === status)}\n              onChange={(values) => {\n                onFieldChange('status', values[0])\n                setStatus(values[0] as DiagnosisStatus)\n              }}\n              disabled={disabled}\n              isInvalid={!!diagnosisError?.status}\n            />\n          </div>\n        </Column>\n      </Row>\n\n      <Row>\n        <Column md={12}>\n          <Input.TextFieldWithLabelFormGroup\n            value={diagnosis.note}\n            label={t('patient.diagnoses.note')}\n            name=\"note\"\n            feedback={t(diagnosisError?.note || '')}\n            isInvalid={!!diagnosisError?.note}\n            isEditable={!disabled}\n            onChange={(event) => onFieldChange('note', event.currentTarget.value)}\n          />\n        </Column>\n      </Row>\n    </form>\n  )\n}\n\nDiagnosisForm.defaultProps = {\n  disabled: false,\n}\nexport default DiagnosisForm\n","import { Modal } from '@hospitalrun/components'\nimport React, { useState, useEffect } from 'react'\n\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport Diagnosis, { DiagnosisStatus } from '../../shared/model/Diagnosis'\nimport Patient from '../../shared/model/Patient'\nimport useAddPatientDiagnosis from '../hooks/useAddPatientDiagnosis'\nimport { DiagnosisError } from '../util/validate-diagnosis'\nimport DiagnosisForm from './DiagnosisForm'\n\ninterface NewDiagnosisModalProps {\n  patient: Patient\n  show: boolean\n  onCloseButtonClick: () => void\n}\n\nconst initialDiagnosisState = {\n  name: '',\n  diagnosisDate: new Date().toISOString(),\n  onsetDate: new Date().toISOString(),\n  abatementDate: new Date().toISOString(),\n  note: '',\n  visit: '',\n  status: DiagnosisStatus.Active,\n}\n\nconst AddDiagnosisModal = (props: NewDiagnosisModalProps) => {\n  const { show, onCloseButtonClick, patient } = props\n  const { t } = useTranslator()\n  const [mutate] = useAddPatientDiagnosis()\n\n  const [diagnosis, setDiagnosis] = useState(initialDiagnosisState)\n  const [diagnosisError, setDiagnosisError] = useState<DiagnosisError | undefined>(undefined)\n  useEffect(() => {\n    setDiagnosis(initialDiagnosisState)\n  }, [show])\n\n  const onDiagnosisChange = (newDiagnosis: Partial<Diagnosis>) => {\n    setDiagnosis(newDiagnosis as Diagnosis)\n  }\n  const onSaveButtonClick = async () => {\n    try {\n      await mutate({ diagnosis, patientId: patient.id })\n      onCloseButtonClick()\n    } catch (e) {\n      setDiagnosisError(e)\n    }\n  }\n\n  const body = (\n    <DiagnosisForm\n      diagnosis={diagnosis}\n      diagnosisError={diagnosisError}\n      onChange={onDiagnosisChange}\n      patient={patient}\n    />\n  )\n  return (\n    <Modal\n      show={show}\n      toggle={onCloseButtonClick}\n      title={t('patient.diagnoses.new')}\n      body={body}\n      closeButton={{\n        children: t('actions.cancel'),\n        color: 'danger',\n        onClick: onCloseButtonClick,\n      }}\n      successButton={{\n        children: t('patient.diagnoses.new'),\n        color: 'success',\n        icon: 'add',\n        iconLocation: 'left',\n        onClick: onSaveButtonClick,\n      }}\n    />\n  )\n}\n\nexport default AddDiagnosisModal\n","import { useQuery } from 'react-query'\n\nimport PatientRepository from '../../shared/db/PatientRepository'\nimport Diagnosis from '../../shared/model/Diagnosis'\n\nasync function fetchPatientDiagnoses(_: string, patientId: string): Promise<Diagnosis[]> {\n  const patient = await PatientRepository.find(patientId)\n  return patient.diagnoses || []\n}\n\nexport default function usePatientDiagnoses(patientId: string) {\n  return useQuery(['diagnoses', patientId], fetchPatientDiagnoses)\n}\n","import { Alert, Table } from '@hospitalrun/components'\nimport format from 'date-fns/format'\nimport React from 'react'\nimport { useHistory } from 'react-router-dom'\n\nimport Loading from '../../shared/components/Loading'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport usePatientDiagnoses from '../hooks/usePatientDiagnoses'\n\ninterface Props {\n  patientId: string\n}\n\nconst DiagnosisTable = (props: Props) => {\n  const { patientId } = props\n  const history = useHistory()\n  const { t } = useTranslator()\n  const { data, status } = usePatientDiagnoses(patientId)\n\n  if (data === undefined || status === 'loading') {\n    return <Loading />\n  }\n\n  if (data.length === 0) {\n    return (\n      <Alert\n        color=\"warning\"\n        title={t('patient.diagnoses.warning.noDiagnoses')}\n        message={t('patient.diagnoses.addDiagnosisAbove')}\n      />\n    )\n  }\n\n  return (\n    <Table\n      getID={(row) => row.id}\n      data={data}\n      columns={[\n        { label: t('patient.diagnoses.diagnosisName'), key: 'name' },\n        {\n          label: t('patient.diagnoses.diagnosisDate'),\n          key: 'diagnosisDate',\n          formatter: (row) =>\n            format(row.diagnosisDate ? new Date(row.diagnosisDate) : new Date(0), 'yyyy-MM-dd'),\n        },\n        {\n          label: t('patient.diagnoses.onsetDate'),\n          key: 'onsetDate',\n          formatter: (row) =>\n            format(row.onsetDate ? new Date(row.onsetDate) : new Date(0), 'yyyy-MM-dd'),\n        },\n        {\n          label: t('patient.diagnoses.abatementDate'),\n          key: 'abatementDate',\n          formatter: (row) =>\n            format(row.abatementDate ? new Date(row.abatementDate) : new Date(0), 'yyyy-MM-dd'),\n        },\n        { label: t('patient.diagnoses.status'), key: 'status' },\n      ]}\n      actionsHeaderText={t('actions.label')}\n      actions={[\n        {\n          label: t('actions.view'),\n          action: (row) => history.push(`/patients/${patientId}/diagnoses/${row.id}`),\n        },\n      ]}\n    />\n  )\n}\n\nexport default DiagnosisTable\n","import React from 'react'\nimport { useParams } from 'react-router-dom'\n\nimport DiagnosisTable from './DiagnosisTable'\n\nconst ViewDiagnoses = () => {\n  const { id: patientId } = useParams()\n\n  return <DiagnosisTable patientId={patientId} />\n}\n\nexport default ViewDiagnoses\n","import { useQuery } from 'react-query'\n\nimport PatientRepository from '../../shared/db/PatientRepository'\nimport Diagnosis from '../../shared/model/Diagnosis'\n\nasync function getDiagnosis(_: string, patientId: string, diagnosisId: string): Promise<Diagnosis> {\n  const patient = await PatientRepository.find(patientId)\n  const maybeDiagnosis = patient.diagnoses?.find((d) => d.id === diagnosisId)\n  if (!maybeDiagnosis) {\n    throw new Error('Diagnosis not found')\n  }\n\n  return maybeDiagnosis\n}\n\nexport default function useDiagnosis(patientId: string, diagnosisId: string) {\n  return useQuery(['diagnoses', patientId, diagnosisId], getDiagnosis, { retry: false })\n}\n","import React from 'react'\nimport { useParams } from 'react-router-dom'\n\nimport Loading from '../../shared/components/Loading'\nimport useDiagnosis from '../hooks/useDiagnosis'\nimport usePatient from '../hooks/usePatient'\nimport DiagnosisForm from './DiagnosisForm'\n\nconst ViewDiagnosis = () => {\n  const { diagnosisId, id: patientId } = useParams()\n  const { data: patient, status: patientStatus } = usePatient(patientId)\n  const { data: diagnosis, status: diagnosisStatus } = useDiagnosis(patientId, diagnosisId)\n\n  if (\n    patient === undefined ||\n    diagnosis === undefined ||\n    patientStatus === 'loading' ||\n    diagnosisStatus === 'loading'\n  ) {\n    return <Loading />\n  }\n\n  return (\n    <>\n      <h2>{diagnosis.name}</h2>\n      <DiagnosisForm patient={patient} diagnosis={diagnosis} disabled />\n    </>\n  )\n}\n\nexport default ViewDiagnosis\n","export enum HistoryRecordType {\n  APPOINTMENT = 'Appointment',\n  LAB = 'Lab',\n}\n\nexport interface PatientHistoryRecord {\n  id: string\n  date: Date\n  type: HistoryRecordType\n  info: string\n  recordId: string\n}\n","import { Button } from '@hospitalrun/components'\nimport React, { useState } from 'react'\nimport { useSelector } from 'react-redux'\nimport { Route, Switch, useParams } from 'react-router-dom'\n\nimport useAddBreadcrumbs from '../../page-header/breadcrumbs/useAddBreadcrumbs'\nimport Loading from '../../shared/components/Loading'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport Permissions from '../../shared/model/Permissions'\nimport { RootState } from '../../shared/store'\nimport usePatient from '../hooks/usePatient'\nimport AddDiagnosisModal from './AddDiagnosisModal'\nimport ViewDiagnoses from './ViewDiagnoses'\nimport ViewDiagnosis from './ViewDiagnosis'\n\nconst Diagnoses = () => {\n  const { id: patientId } = useParams()\n  const { t } = useTranslator()\n  const { permissions } = useSelector((state: RootState) => state.user)\n  const { data, status } = usePatient(patientId)\n  const [showDiagnosisModal, setShowDiagnosisModal] = useState(false)\n\n  const breadcrumbs = [\n    {\n      i18nKey: 'patient.diagnoses.label',\n      location: `/patients/${patientId}/diagnoses`,\n    },\n  ]\n  useAddBreadcrumbs(breadcrumbs)\n\n  const onAddDiagnosisModalClose = () => {\n    setShowDiagnosisModal(false)\n  }\n\n  if (data === undefined || status === 'loading') {\n    return <Loading />\n  }\n\n  return (\n    <>\n      <div className=\"row\">\n        <div className=\"col-md-12 d-flex justify-content-end\">\n          {permissions.includes(Permissions.AddDiagnosis) && (\n            <Button\n              outlined\n              color=\"success\"\n              icon=\"add\"\n              iconLocation=\"left\"\n              onClick={() => setShowDiagnosisModal(true)}\n            >\n              {t('patient.diagnoses.new')}\n            </Button>\n          )}\n        </div>\n      </div>\n      <br />\n      <Switch>\n        <Route exact path=\"/patients/:id/diagnoses\">\n          <ViewDiagnoses />\n        </Route>\n        <Route exact path=\"/patients/:id/diagnoses/:diagnosisId\">\n          <ViewDiagnosis />\n        </Route>\n      </Switch>\n      <AddDiagnosisModal\n        show={showDiagnosisModal}\n        onCloseButtonClick={onAddDiagnosisModalClose}\n        patient={data}\n      />\n    </>\n  )\n}\n\nexport default Diagnoses\n","import { useQuery } from 'react-query'\n\nimport PatientRepository from '../../shared/db/PatientRepository'\nimport Lab from '../../shared/model/Lab'\n\nasync function fetchPatientLabs(_: string, patientId: string): Promise<Lab[]> {\n  const fetchedLabs = await PatientRepository.getLabs(patientId)\n  return fetchedLabs || []\n}\n\nexport default function usePatientLabs(patientId: string) {\n  return useQuery(['labs', patientId], fetchPatientLabs)\n}\n","import Appointment from '../../../shared/model/Appointment'\nimport Lab from '../../../shared/model/Lab'\nimport { PatientHistoryRecord, HistoryRecordType } from '../../../shared/model/PatientHistoryRecord'\n\nexport const convertLab = (lab: Lab): PatientHistoryRecord[] => {\n  const labEvents = []\n  if (lab.requestedOn) {\n    labEvents.push({\n      date: new Date(lab.requestedOn),\n      type: HistoryRecordType.LAB,\n      info: `Requested - ${lab.type}`,\n      recordId: lab.id,\n      id: `requestedLab${lab.id}`,\n    })\n  }\n  if (lab.canceledOn) {\n    labEvents.push({\n      date: new Date(lab.canceledOn),\n      type: HistoryRecordType.LAB,\n      info: `Canceled - ${lab.type}`,\n      recordId: lab.id,\n      id: `canceledLab${lab.id}`,\n    })\n  } else if (lab.completedOn) {\n    labEvents.push({\n      date: new Date(lab.completedOn),\n      type: HistoryRecordType.LAB,\n      info: `Completed - ${lab.type}`,\n      recordId: lab.id,\n      id: `completedLab${lab.id}`,\n    })\n  }\n  return labEvents\n}\n\nexport const convertAppointment = (appt: Appointment): PatientHistoryRecord[] => {\n  const apptEvents = []\n  if (appt.startDateTime) {\n    apptEvents.push({\n      date: new Date(appt.startDateTime),\n      type: HistoryRecordType.APPOINTMENT,\n      info: `Started - ${appt.type}`,\n      recordId: appt.id,\n      id: `startedAppt${appt.id}`,\n    })\n  }\n  if (appt.endDateTime) {\n    apptEvents.push({\n      date: new Date(appt.endDateTime),\n      type: HistoryRecordType.APPOINTMENT,\n      info: `Ended - ${appt.type}`,\n      recordId: appt.id,\n      id: `endedAppt${appt.id}`,\n    })\n  }\n  return apptEvents\n}\n","import Appointment from '../../../shared/model/Appointment'\nimport Lab from '../../../shared/model/Lab'\nimport { PatientHistoryRecord } from '../../../shared/model/PatientHistoryRecord'\nimport { convertLab, convertAppointment } from './helpers'\n\nconst mapLabs = (labs: Lab[] | undefined): PatientHistoryRecord[] => {\n  if (!labs) {\n    return []\n  }\n  let flattenedRecords = [] as PatientHistoryRecord[]\n  labs.forEach((lab) => {\n    flattenedRecords = flattenedRecords.concat(convertLab(lab))\n  })\n  return flattenedRecords\n}\n\nconst mapAppointments = (appointments: Appointment[] | undefined): PatientHistoryRecord[] => {\n  if (!appointments) {\n    return []\n  }\n  let flattenedRecords = [] as PatientHistoryRecord[]\n  appointments.forEach((appt) => {\n    flattenedRecords = flattenedRecords.concat(convertAppointment(appt))\n  })\n  return flattenedRecords\n}\n\nexport const mapHistoryRecords = (\n  labs: Lab[] | undefined,\n  appointments: Appointment[] | undefined,\n): PatientHistoryRecord[] => {\n  const labRecords = mapLabs(labs)\n  const appointmentRecords = mapAppointments(appointments)\n\n  const result = labRecords.concat(appointmentRecords)\n  result.sort(\n    (a: PatientHistoryRecord, b: PatientHistoryRecord): number =>\n      b.date.getTime() - a.date.getTime(),\n  )\n\n  return result\n}\n","import { Alert, Table } from '@hospitalrun/components'\nimport format from 'date-fns/format'\nimport React from 'react'\nimport { useHistory } from 'react-router-dom'\n\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport { HistoryRecordType, PatientHistoryRecord } from '../../shared/model/PatientHistoryRecord'\nimport usePatientAppointments from '../hooks/usePatientAppointments'\nimport usePatientLabs from '../hooks/usePatientLabs'\nimport { mapHistoryRecords } from './mappers/HistoryRecordsMapper'\n\ninterface Props {\n  patientId: string\n}\n\nconst getRecordPath = (historyRecord: PatientHistoryRecord): string => {\n  if (historyRecord.type === HistoryRecordType.LAB) {\n    return `/labs/${historyRecord.recordId}`\n  }\n  return `/appointments/${historyRecord.recordId}`\n}\n\nconst HistoryTable = ({ patientId }: Props) => {\n  const { t } = useTranslator()\n  const history = useHistory()\n\n  const { data: labs } = usePatientLabs(patientId)\n  const { data: appointments } = usePatientAppointments(patientId)\n\n  const mappedHistoryRecords = mapHistoryRecords(labs, appointments)\n\n  if (mappedHistoryRecords.length === 0) {\n    return (\n      <Alert\n        color=\"warning\"\n        title={t('patient.history.noHistoryTitle')}\n        message={t('patient.history.noHistoryMessage')}\n      />\n    )\n  }\n  return (\n    <Table\n      getID={(row) => row.id}\n      data={mappedHistoryRecords}\n      columns={[\n        {\n          label: t('patient.history.eventDate'),\n          key: 'date',\n          formatter: (row) => format(new Date(row.date), 'yyyy-MM-dd hh:mm a'),\n        },\n        {\n          label: t('patient.history.recordType'),\n          key: 'type',\n        },\n        {\n          label: t('patient.history.information'),\n          key: 'info',\n        },\n      ]}\n      actionsHeaderText={t('actions.label')}\n      actions={[\n        {\n          label: t('actions.view'),\n          action: (row) => history.push(getRecordPath(row as PatientHistoryRecord)),\n        },\n      ]}\n    />\n  )\n}\n\nexport default HistoryTable\n","import React from 'react'\n\nimport HistoryTable from './HistoryTable'\n\ninterface Props {\n  patientId: string\n}\n\nconst HistoryTab = ({ patientId }: Props) => (\n  <>\n    <HistoryTable patientId={patientId} />\n  </>\n)\n\nexport default HistoryTab\n","import { Alert, Table } from '@hospitalrun/components'\nimport format from 'date-fns/format'\nimport React from 'react'\nimport { useHistory } from 'react-router-dom'\n\nimport Loading from '../../shared/components/Loading'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport Patient from '../../shared/model/Patient'\nimport usePatientLabs from '../hooks/usePatientLabs'\n\ninterface Props {\n  patient: Patient\n}\n\nconst LabsList = (props: Props) => {\n  const { patient } = props\n  const history = useHistory()\n  const { t } = useTranslator()\n  const { data, status } = usePatientLabs(patient.id)\n\n  if (data === undefined || status === 'loading') {\n    return <Loading />\n  }\n\n  if (data.length === 0) {\n    return (\n      <Alert\n        color=\"warning\"\n        title={t('patient.labs.warning.noLabs')}\n        message={t('patient.labs.noLabsMessage')}\n      />\n    )\n  }\n\n  return (\n    <Table\n      actionsHeaderText={t('actions.label')}\n      getID={(row) => row.id}\n      data={data}\n      columns={[\n        { label: t('labs.lab.type'), key: 'type' },\n        {\n          label: t('labs.lab.requestedOn'),\n          key: 'requestedOn',\n          formatter: (row) => format(new Date(row.requestedOn), 'yyyy-MM-dd hh:mm a'),\n        },\n        { label: t('labs.lab.status'), key: 'status' },\n      ]}\n      actions={[{ label: t('actions.view'), action: (row) => history.push(`/labs/${row.id}`) }]}\n    />\n  )\n}\n\nexport default LabsList\n","import React from 'react'\nimport { Route } from 'react-router-dom'\n\nimport useAddBreadcrumbs from '../../page-header/breadcrumbs/useAddBreadcrumbs'\nimport Patient from '../../shared/model/Patient'\nimport LabsList from './LabsList'\n\ninterface LabsProps {\n  patient: Patient\n}\n\nconst Labs = (props: LabsProps) => {\n  const { patient } = props\n\n  const breadcrumbs = [\n    {\n      i18nKey: 'patient.labs.label',\n      location: `/patients/${patient.id}/labs`,\n    },\n  ]\n  useAddBreadcrumbs(breadcrumbs)\n\n  return (\n    <Route exact path=\"/patients/:id/labs\">\n      <LabsList patient={patient} />\n    </Route>\n  )\n}\n\nexport default Labs\n","import { useQuery } from 'react-query'\n\nimport PatientRepository from '../../shared/db/PatientRepository'\nimport Medication from '../../shared/model/Medication'\n\nasync function fetchPatientMedications(_: string, patientId: string): Promise<Medication[]> {\n  const fetchedMedications = await PatientRepository.getMedications(patientId)\n  return fetchedMedications || []\n}\n\nexport default function usePatientMedications(patientId: string) {\n  return useQuery(['medications', patientId], fetchPatientMedications)\n}\n","import { Alert, Table } from '@hospitalrun/components'\nimport format from 'date-fns/format'\nimport React from 'react'\nimport { useHistory } from 'react-router-dom'\n\nimport Loading from '../../shared/components/Loading'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport Patient from '../../shared/model/Patient'\nimport usePatientMedications from '../hooks/usePatientMedications'\n\ninterface Props {\n  patient: Patient\n}\n\nconst MedicationsList = (props: Props) => {\n  const { patient } = props\n  const history = useHistory()\n  const { t } = useTranslator()\n  const { data, status } = usePatientMedications(patient.id)\n\n  if (data === undefined || status === 'loading') {\n    return <Loading />\n  }\n\n  if (data.length === 0) {\n    return (\n      <Alert\n        color=\"warning\"\n        title={t('patient.medications.warning.noMedications')}\n        message={t('patient.medications.noMedicationsMessage')}\n      />\n    )\n  }\n\n  return (\n    <Table\n      actionsHeaderText={t('actions.label')}\n      getID={(row) => row.id}\n      data={data}\n      columns={[\n        { label: t('medications.medication.medication'), key: 'medication' },\n        { label: t('medications.medication.priority'), key: 'priority' },\n        { label: t('medications.medication.intent'), key: 'intent' },\n        {\n          label: t('medications.medication.requestedOn'),\n          key: 'requestedOn',\n          formatter: (row) =>\n            row.requestedOn ? format(new Date(row.requestedOn), 'yyyy-MM-dd hh:mm a') : '',\n        },\n        { label: t('medications.medication.status'), key: 'status' },\n      ]}\n      actions={[\n        { label: t('actions.view'), action: (row) => history.push(`/medications/${row.id}`) },\n      ]}\n    />\n  )\n}\n\nexport default MedicationsList\n","import React from 'react'\nimport { Route } from 'react-router-dom'\n\nimport useAddBreadcrumbs from '../../page-header/breadcrumbs/useAddBreadcrumbs'\nimport Patient from '../../shared/model/Patient'\nimport MedicationsList from './MedicationsList'\n\ninterface MedicationsProps {\n  patient: Patient\n}\n\nconst Medications = (props: MedicationsProps) => {\n  const { patient } = props\n\n  const breadcrumbs = [\n    {\n      i18nKey: 'patient.medications.label',\n      location: `/patients/${patient.id}/medications`,\n    },\n  ]\n  useAddBreadcrumbs(breadcrumbs)\n\n  return (\n    <Route exact path=\"/patients/:id/medications\">\n      <MedicationsList patient={patient} />\n    </Route>\n  )\n}\n\nexport default Medications\n","import Note from '../../shared/model/Note'\n\nexport class NoteError extends Error {\n  noteError?: string\n\n  constructor(message: string, note: string) {\n    super(message)\n    this.noteError = note\n    Object.setPrototypeOf(this, NoteError.prototype)\n  }\n}\n\nexport default function validateNote(note: Partial<Note>) {\n  const error: any = {}\n  if (!note.text) {\n    error.noteError = 'patient.notes.error.noteRequired'\n  }\n\n  return error\n}\n","import isEmpty from 'lodash/isEmpty'\nimport { queryCache, useMutation } from 'react-query'\n\nimport PatientRepository from '../../shared/db/PatientRepository'\nimport Note from '../../shared/model/Note'\nimport { uuid } from '../../shared/util/uuid'\nimport validateNote from '../util/validate-note'\n\ninterface AddNoteRequest {\n  patientId: string\n  note: Omit<Note, 'id'>\n}\n\nasync function addNote(request: AddNoteRequest): Promise<Note[]> {\n  const error = validateNote(request.note)\n\n  if (isEmpty(error)) {\n    const patient = await PatientRepository.find(request.patientId)\n    const notes = patient.notes ? [...patient.notes] : []\n    const newNote: Note = {\n      id: uuid(),\n      ...request.note,\n    }\n    notes.push(newNote)\n\n    await PatientRepository.saveOrUpdate({\n      ...patient,\n      notes,\n    })\n\n    return notes\n  }\n\n  throw error\n}\n\nexport default function useAddPatientNote() {\n  return useMutation(addNote, {\n    onSuccess: async (data, variables) => {\n      await queryCache.setQueryData(['notes', variables.patientId], data)\n    },\n    throwOnError: true,\n  })\n}\n","import { Modal, Alert } from '@hospitalrun/components'\nimport React, { useState } from 'react'\n\nimport TextFieldWithLabelFormGroup from '../../shared/components/input/TextFieldWithLabelFormGroup'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport useAddPatientNote from '../hooks/useAddPatientNote'\nimport { NoteError } from '../util/validate-note'\n\ninterface Props {\n  show: boolean\n  toggle: () => void\n  onCloseButtonClick: () => void\n  patientId: string\n}\nconst initialNoteState = { text: '', date: new Date().toISOString(), deleted: false }\n\nconst NewNoteModal = (props: Props) => {\n  const { show, toggle, onCloseButtonClick, patientId } = props\n  const { t } = useTranslator()\n  const [mutate] = useAddPatientNote()\n\n  const [noteError, setNoteError] = useState<NoteError | undefined>(undefined)\n  const [note, setNote] = useState(initialNoteState)\n\n  const onNoteTextChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const text = event.currentTarget.value\n    setNote({\n      ...note,\n      text,\n    })\n  }\n\n  const onSaveButtonClick = async () => {\n    try {\n      await mutate({ patientId, note })\n      setNote(initialNoteState)\n      onCloseButtonClick()\n    } catch (e) {\n      setNoteError(e)\n    }\n  }\n\n  const body = (\n    <form>\n      {noteError && (\n        <Alert\n          color=\"danger\"\n          title={t('states.error')}\n          message={t('patient.notes.error.unableToAdd')}\n        />\n      )}\n      <div className=\"row\">\n        <div className=\"col-md-12\">\n          <div className=\"form-group\">\n            <TextFieldWithLabelFormGroup\n              isEditable\n              isRequired\n              name=\"noteTextField\"\n              label={t('patient.note')}\n              value={note.text}\n              isInvalid={!!noteError?.noteError}\n              feedback={t(noteError?.noteError || '')}\n              onChange={onNoteTextChange}\n            />\n          </div>\n        </div>\n      </div>\n    </form>\n  )\n\n  return (\n    <Modal\n      show={show}\n      toggle={toggle}\n      title={t('patient.notes.new')}\n      body={body}\n      closeButton={{\n        children: t('actions.cancel'),\n        color: 'danger',\n        onClick: onCloseButtonClick,\n      }}\n      successButton={{\n        children: t('patient.notes.new'),\n        color: 'success',\n        icon: 'add',\n        iconLocation: 'left',\n        onClick: onSaveButtonClick,\n      }}\n    />\n  )\n}\n\nexport default NewNoteModal\n","import { useQuery } from 'react-query'\n\nimport PatientRepository from '../../shared/db/PatientRepository'\nimport Note from '../../shared/model/Note'\n\nasync function fetchPatientNotes(_: string, patientId: string): Promise<Note[]> {\n  const patient = await PatientRepository.find(patientId)\n  return patient.notes || []\n}\n\nexport default function usePatientNotes(patientId: string) {\n  return useQuery(['notes', patientId], fetchPatientNotes)\n}\n","import { Alert, List, ListItem } from '@hospitalrun/components'\nimport React from 'react'\nimport { useHistory } from 'react-router-dom'\n\nimport Loading from '../../shared/components/Loading'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport Note from '../../shared/model/Note'\nimport usePatientNotes from '../hooks/usePatientNotes'\n\ninterface Props {\n  patientId: string\n}\n\nconst NotesList = (props: Props) => {\n  const { patientId } = props\n  const history = useHistory()\n  const { t } = useTranslator()\n  const { data, status } = usePatientNotes(patientId)\n\n  if (data === undefined || status === 'loading') {\n    return <Loading />\n  }\n\n  if (data.length === 0) {\n    return (\n      <Alert\n        color=\"warning\"\n        title={t('patient.notes.warning.noNotes')}\n        message={t('patient.notes.addNoteAbove')}\n      />\n    )\n  }\n\n  return (\n    <List>\n      {data.map((note: Note) => (\n        <ListItem\n          action\n          key={note.id}\n          onClick={() => history.push(`/patients/${patientId}/notes/${note.id}`)}\n        >\n          <p className=\"ref__note-item-date\">{new Date(note.date).toLocaleString()}</p>\n          <p role=\"listitem\" className=\"ref__note-item-text\">\n            {note.text}\n          </p>\n        </ListItem>\n      ))}\n    </List>\n  )\n}\n\nexport default NotesList\n","import { useQuery } from 'react-query'\n\nimport PatientRepository from '../../shared/db/PatientRepository'\nimport Note from '../../shared/model/Note'\n\nasync function getNote(_: string, patientId: string, noteId: string): Promise<Note> {\n  const patient = await PatientRepository.find(patientId)\n  const maybeNote = patient.notes?.find((n) => n.id === noteId)\n\n  if (!maybeNote) {\n    throw new Error('Note not found')\n  }\n\n  return maybeNote\n}\n\nexport default function usePatientNote(patientId: string, noteId: string) {\n  return useQuery(['notes', patientId, noteId], getNote)\n}\n","import React from 'react'\nimport { useParams } from 'react-router-dom'\n\nimport TextInputWithLabelFormGroup from '../../shared/components/input/TextInputWithLabelFormGroup'\nimport Loading from '../../shared/components/Loading'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport usePatientNote from '../hooks/usePatientNote'\n\nconst ViewNote = () => {\n  const { t } = useTranslator()\n  const { noteId, id: patientId } = useParams()\n  const { data, status } = usePatientNote(patientId, noteId)\n\n  if (data === undefined || status === 'loading') {\n    return <Loading />\n  }\n\n  return (\n    <div>\n      <p>Date: {new Date(data.date).toLocaleString()}</p>\n      <TextInputWithLabelFormGroup\n        name=\"text\"\n        label={t('patient.note')}\n        isEditable={false}\n        placeholder={t('patient.note')}\n        value={data.text}\n      />\n    </div>\n  )\n}\n\nexport default ViewNote\n","import { Button } from '@hospitalrun/components'\nimport React, { useState } from 'react'\nimport { useSelector } from 'react-redux'\nimport { Route, Switch } from 'react-router-dom'\n\nimport useAddBreadcrumbs from '../../page-header/breadcrumbs/useAddBreadcrumbs'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport Patient from '../../shared/model/Patient'\nimport Permissions from '../../shared/model/Permissions'\nimport { RootState } from '../../shared/store'\nimport NewNoteModal from './NewNoteModal'\nimport NotesList from './NotesList'\nimport ViewNote from './ViewNote'\n\ninterface Props {\n  patient: Patient\n}\n\nconst NoteTab = (props: Props) => {\n  const { patient } = props\n  const { t } = useTranslator()\n  const { permissions } = useSelector((state: RootState) => state.user)\n  const [showNewNoteModal, setShowNoteModal] = useState<boolean>(false)\n\n  const breadcrumbs = [\n    {\n      i18nKey: 'patient.notes.label',\n      location: `/patients/${patient.id}/notes`,\n    },\n  ]\n  useAddBreadcrumbs(breadcrumbs)\n\n  const onNewNoteClick = () => {\n    setShowNoteModal(true)\n  }\n\n  const closeNewNoteModal = () => {\n    setShowNoteModal(false)\n  }\n\n  return (\n    <div>\n      <div className=\"row\">\n        <div className=\"col-md-12 d-flex justify-content-end\">\n          {permissions.includes(Permissions.WritePatients) && (\n            <Button\n              outlined\n              color=\"success\"\n              icon=\"add\"\n              iconLocation=\"left\"\n              onClick={onNewNoteClick}\n            >\n              {t('patient.notes.new')}\n            </Button>\n          )}\n        </div>\n      </div>\n      <br />\n      <Switch>\n        <Route exact path=\"/patients/:id/notes\">\n          <NotesList patientId={patient.id} />\n        </Route>\n        <Route exact path=\"/patients/:id/notes/:noteId\">\n          <ViewNote />\n        </Route>\n      </Switch>\n\n      <NewNoteModal\n        show={showNewNoteModal}\n        toggle={closeNewNoteModal}\n        onCloseButtonClick={closeNewNoteModal}\n        patientId={patient.id}\n      />\n    </div>\n  )\n}\n\nexport default NoteTab\n","import { useQuery } from 'react-query'\n\nimport PatientRepository from '../../shared/db/PatientRepository'\nimport Patient from '../../shared/model/Patient'\n\ninterface RelatedPersonsResult extends Patient {\n  type: string\n}\n\nasync function fetchPatientRelatedPersons(\n  _: any,\n  patientId: string,\n): Promise<RelatedPersonsResult[]> {\n  const patient = await PatientRepository.find(patientId)\n  const relatedPersons = patient.relatedPersons || []\n  const result = await Promise.all(\n    relatedPersons.map(async (person) => {\n      const fetchedRelatedPerson = await PatientRepository.find(person.patientId)\n      return { ...fetchedRelatedPerson, type: person.type }\n    }),\n  )\n\n  return result\n}\n\nexport default function usePatientRelatedPersons(patientId: string) {\n  return useQuery(['related-persons', patientId], fetchPatientRelatedPersons)\n}\n","import { useMutation, queryCache } from 'react-query'\n\nimport PatientRepository from '../../shared/db/PatientRepository'\nimport RelatedPerson from '../../shared/model/RelatedPerson'\n\ninterface removeRelatedPersonRequest {\n  patientId: string\n  relatedPersonId: string\n}\n\nasync function removeRelatedPerson(request: removeRelatedPersonRequest): Promise<RelatedPerson[]> {\n  const patient = await PatientRepository.find(request.patientId)\n  const relatedPersons = patient.relatedPersons\n    ? patient.relatedPersons.filter((rp) => rp.patientId !== request.relatedPersonId)\n    : []\n  await PatientRepository.saveOrUpdate({\n    ...patient,\n    relatedPersons,\n  })\n\n  return relatedPersons\n}\n\nexport default function useRemovePatientRelatedPerson() {\n  return useMutation(removeRelatedPerson, {\n    onSuccess: async (data, variables) => {\n      const relatedPersons = await Promise.all(\n        data.map(async (rp) => {\n          const patient = await PatientRepository.find(rp.patientId)\n          return { ...patient, type: rp.type }\n        }),\n      )\n      await queryCache.setQueryData(['related-persons', variables.patientId], relatedPersons)\n    },\n    throwOnError: true,\n  })\n}\n","import RelatedPerson from '../../shared/model/RelatedPerson'\n\nexport class RelatedPersonError extends Error {\n  relatedPersonError?: string\n\n  relationshipTypeError?: string\n\n  constructor(message: string, related: string, relationship: string) {\n    super(message)\n    this.relatedPersonError = related\n    this.relationshipTypeError = relationship\n    Object.setPrototypeOf(this, RelatedPersonError.prototype)\n  }\n}\n\nexport default function validateRelatedPerson(relatedPerson: Partial<RelatedPerson>) {\n  const error: any = {}\n\n  if (!relatedPerson.patientId) {\n    error.relatedPersonError = 'patient.relatedPersons.error.relatedPersonRequired'\n  }\n\n  if (!relatedPerson.type) {\n    error.relationshipTypeError = 'patient.relatedPersons.error.relationshipTypeRequired'\n  }\n\n  return error\n}\n","import isEmpty from 'lodash/isEmpty'\nimport { useMutation, queryCache } from 'react-query'\n\nimport PatientRepository from '../../shared/db/PatientRepository'\nimport RelatedPerson from '../../shared/model/RelatedPerson'\nimport { uuid } from '../../shared/util/uuid'\nimport validateRelatedPerson from '../util/validate-related-person'\n\ninterface AddRelatedPersonRequest {\n  patientId: string\n  relatedPerson: Omit<RelatedPerson, 'id'>\n}\n\nasync function addRelatedPerson(request: AddRelatedPersonRequest): Promise<RelatedPerson[]> {\n  const error = validateRelatedPerson(request.relatedPerson)\n\n  if (isEmpty(error)) {\n    const patient = await PatientRepository.find(request.patientId)\n    const relatedPersons = patient.relatedPersons ? [...patient.relatedPersons] : []\n    const newRelated: RelatedPerson = {\n      id: uuid(),\n      ...request.relatedPerson,\n    }\n    relatedPersons.push(newRelated)\n\n    await PatientRepository.saveOrUpdate({\n      ...patient,\n      relatedPersons,\n    })\n\n    return relatedPersons\n  }\n\n  throw error\n}\n\nexport default function useAddPatientRelatedPerson() {\n  return useMutation(addRelatedPerson, {\n    onSuccess: async (data, variables) => {\n      const relatedPersons = await Promise.all(\n        data.map(async (rp) => {\n          const patient = await PatientRepository.find(rp.patientId)\n          return { ...patient, type: rp.type }\n        }),\n      )\n      await queryCache.setQueryData(['related-persons', variables.patientId], relatedPersons)\n    },\n    throwOnError: true,\n  })\n}\n","import { Modal, Alert, Typeahead, Label } from '@hospitalrun/components'\nimport format from 'date-fns/format'\nimport React, { useState } from 'react'\n\nimport TextInputWithLabelFormGroup from '../../shared/components/input/TextInputWithLabelFormGroup'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport Patient from '../../shared/model/Patient'\nimport useAddPatientRelatedPerson from '../hooks/useAddPatientRelatedPerson'\nimport usePatients from '../hooks/usePatients'\nimport { RelatedPersonError } from '../util/validate-related-person'\n\ninterface Props {\n  patientId: string\n  show: boolean\n  toggle: () => void\n  onCloseButtonClick: () => void\n}\n\nconst AddRelatedPersonModal = (props: Props) => {\n  const { t } = useTranslator()\n\n  const { patientId, show, toggle, onCloseButtonClick } = props\n  const [relatedPerson, setRelatedPerson] = useState({\n    patientId: '',\n    type: '',\n  })\n\n  const [patientQuery, setPatientQuery] = useState<string>('')\n\n  const { data, status } = usePatients({ queryString: patientQuery })\n  let patients = [] as Patient[]\n  if (data !== undefined && status !== 'loading') {\n    patients = data.patients.filter((p: Patient) => p.id !== patientId)\n  }\n\n  const [mutate] = useAddPatientRelatedPerson()\n  const [relatedPersonError, setRelatedPersonError] = useState<RelatedPersonError | undefined>(\n    undefined,\n  )\n\n  const onFieldChange = (key: string, value: string) => {\n    setRelatedPerson({\n      ...relatedPerson,\n      [key]: value,\n    })\n  }\n\n  const onInputElementChange = (event: React.ChangeEvent<HTMLInputElement>, fieldName: string) => {\n    onFieldChange(fieldName, event.target.value)\n  }\n\n  const onPatientSelect = (p: Patient[]) => {\n    if (p.length > 0) {\n      setRelatedPerson({ ...relatedPerson, patientId: p[0].id })\n    }\n  }\n\n  const onSearch = async (query: string) => {\n    setPatientQuery(query)\n    return [...patients]\n  }\n\n  const onSaveButtonClick = async () => {\n    try {\n      await mutate({ patientId, relatedPerson })\n      onCloseButtonClick()\n    } catch (e) {\n      setRelatedPersonError(e)\n    }\n  }\n\n  const formattedDate = (date: string) => (date ? format(new Date(date), 'yyyy-MM-dd') : '')\n\n  const body = (\n    <form>\n      {relatedPersonError && (\n        <Alert\n          color=\"danger\"\n          title={t('states.error')}\n          message={t('patient.relatedPersons.error.unableToAddRelatedPerson')}\n        />\n      )}\n      <div className=\"row\">\n        <div className=\"col-md-12\">\n          <div className=\"form-group\">\n            <Label text={t('patient.relatedPerson')} htmlFor=\"relatedPersonTypeAhead\" isRequired />\n            <Typeahead\n              id=\"relatedPersonTypeAhead\"\n              searchAccessor=\"fullName\"\n              placeholder={t('patient.relatedPerson')}\n              onChange={onPatientSelect}\n              isInvalid={!!relatedPersonError?.relatedPersonError}\n              onSearch={onSearch}\n              renderMenuItemChildren={(p: Patient) => (\n                <div>{`${p.fullName} - ${formattedDate(p.dateOfBirth)} (${p.code})`}</div>\n              )}\n            />\n            {relatedPersonError?.relatedPersonError && (\n              <div className=\"text-left ml-3 mt-1 text-small text-danger invalid-feedback d-block related-person-feedback\">\n                {t(relatedPersonError?.relatedPersonError)}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n      <div className=\"row\">\n        <div className=\"col-md-12\">\n          <TextInputWithLabelFormGroup\n            name=\"type\"\n            label={t('patient.relatedPersons.relationshipType')}\n            value={relatedPerson.type}\n            isEditable\n            isInvalid={!!relatedPersonError?.relationshipTypeError}\n            feedback={t(relatedPersonError?.relationshipTypeError)}\n            isRequired\n            onChange={(event: React.ChangeEvent<HTMLInputElement>) => {\n              onInputElementChange(event, 'type')\n            }}\n          />\n        </div>\n      </div>\n    </form>\n  )\n\n  return (\n    <Modal\n      show={show}\n      toggle={toggle}\n      title={t('patient.relatedPersons.add')}\n      body={body}\n      closeButton={{\n        children: t('actions.cancel'),\n        color: 'danger',\n        onClick: onCloseButtonClick,\n      }}\n      successButton={{\n        children: t('patient.relatedPersons.add'),\n        color: 'success',\n        icon: 'add',\n        iconLocation: 'left',\n        onClick: onSaveButtonClick,\n      }}\n    />\n  )\n}\n\nexport default AddRelatedPersonModal\n","import AbstractDBModel from './AbstractDBModel'\n\nexport enum VisitStatus {\n  Planned = 'planned',\n  Arrived = 'arrived',\n  Triaged = 'triaged',\n  InProgress = 'in progress',\n  OnLeave = 'on leave',\n  Finished = 'finished',\n  Cancelled = 'cancelled',\n}\n\nexport default interface Visit extends AbstractDBModel {\n  id: string\n  createdAt: string\n  updatedAt: string\n  startDateTime: string\n  endDateTime: string\n  type: string\n  status: VisitStatus\n  reason: string\n  location: string\n}\n","import { Button, Alert, Spinner, Table } from '@hospitalrun/components'\nimport React, { useState } from 'react'\nimport { useSelector } from 'react-redux'\nimport { useHistory } from 'react-router-dom'\n\nimport useAddBreadcrumbs from '../../page-header/breadcrumbs/useAddBreadcrumbs'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport Patient from '../../shared/model/Patient'\nimport Permissions from '../../shared/model/Permissions'\nimport { RootState } from '../../shared/store'\nimport usePatientRelatedPersons from '../hooks/usePatientRelatedPersons'\nimport useRemovePatientRelatedPerson from '../hooks/useRemovePatientRelatedPerson'\nimport AddRelatedPersonModal from './AddRelatedPersonModal'\n\ninterface Props {\n  patient: Patient\n}\n\nconst RelatedPersonTab = (props: Props) => {\n  const history = useHistory()\n\n  const navigateTo = (location: string) => {\n    history.push(location)\n  }\n  const { patient } = props\n  const { t } = useTranslator()\n  const { permissions } = useSelector((state: RootState) => state.user)\n  const [showNewRelatedPersonModal, setShowRelatedPersonModal] = useState<boolean>(false)\n  const [mutate] = useRemovePatientRelatedPerson()\n\n  const breadcrumbs = [\n    {\n      i18nKey: 'patient.relatedPersons.label',\n      location: `/patients/${patient.id}/relatedpersons`,\n    },\n  ]\n  useAddBreadcrumbs(breadcrumbs)\n\n  const { data: relatedPersons } = usePatientRelatedPersons(patient.id)\n\n  const onNewRelatedPersonClick = () => {\n    setShowRelatedPersonModal(true)\n  }\n\n  const closeNewRelatedPersonModal = () => {\n    setShowRelatedPersonModal(false)\n  }\n\n  const onRelatedPersonDelete = (relatedPerson: Patient) => {\n    mutate({ patientId: patient.id, relatedPersonId: relatedPerson.id })\n  }\n\n  return (\n    <div>\n      <div className=\"row\">\n        <div className=\"col-md-12 d-flex justify-content-end\">\n          {permissions.includes(Permissions.WritePatients) && (\n            <Button\n              outlined\n              color=\"success\"\n              icon=\"add\"\n              iconLocation=\"left\"\n              onClick={onNewRelatedPersonClick}\n            >\n              {t('patient.relatedPersons.add')}\n            </Button>\n          )}\n        </div>\n      </div>\n      <br />\n      <div className=\"row\">\n        <div className=\"col-md-12\">\n          {relatedPersons ? (\n            relatedPersons.length > 0 ? (\n              <Table\n                getID={(row) => row.id}\n                data={relatedPersons}\n                columns={[\n                  { label: t('patient.givenName'), key: 'givenName' },\n                  { label: t('patient.familyName'), key: 'familyName' },\n                  { label: t('patient.relatedPersons.relationshipType'), key: 'type' },\n                ]}\n                actionsHeaderText={t('actions.label')}\n                actions={[\n                  { label: t('actions.view'), action: (row) => navigateTo(`/patients/${row.id}`) },\n                  {\n                    label: t('actions.delete'),\n                    action: (row) => onRelatedPersonDelete(row as Patient),\n                    buttonColor: 'danger',\n                  },\n                ]}\n              />\n            ) : (\n              <Alert\n                color=\"warning\"\n                title={t('patient.relatedPersons.warning.noRelatedPersons')}\n                message={t('patient.relatedPersons.addRelatedPersonAbove')}\n              />\n            )\n          ) : (\n            <Spinner color=\"blue\" loading size={[10, 25]} type=\"ScaleLoader\" />\n          )}\n        </div>\n      </div>\n\n      <AddRelatedPersonModal\n        patientId={patient.id}\n        show={showNewRelatedPersonModal}\n        toggle={closeNewRelatedPersonModal}\n        onCloseButtonClick={closeNewRelatedPersonModal}\n      />\n    </div>\n  )\n}\n\nexport default RelatedPersonTab\n","import isBefore from 'date-fns/isBefore'\n\nimport Visit from '../../shared/model/Visit'\n\ninterface AddVisitError {\n  message?: string\n  status?: string\n  intent?: string\n  startDateTime?: string\n  endDateTime?: string\n}\n\nexport class VisitError extends Error {\n  nameError?: string\n\n  constructor(message: string, name: string) {\n    super(message)\n    this.nameError = name\n    Object.setPrototypeOf(this, VisitError.prototype)\n  }\n}\n\nexport default function validateVisit(visit: Partial<Visit>) {\n  const error: AddVisitError = {}\n\n  if (!visit.startDateTime) {\n    error.startDateTime = 'patient.visits.error.startDateRequired'\n  }\n\n  if (!visit.endDateTime) {\n    error.endDateTime = 'patient.visits.error.endDateRequired'\n  }\n\n  if (!visit.type) {\n    error.status = 'patient.visits.error.typeRequired'\n  }\n\n  if (visit.startDateTime && visit.endDateTime) {\n    if (isBefore(new Date(visit.endDateTime), new Date(visit.startDateTime))) {\n      error.endDateTime = 'patient.visits.error.endDateMustBeAfterStartDate'\n    }\n  }\n\n  if (!visit.status) {\n    error.status = 'patient.visits.error.statusRequired'\n  }\n\n  if (!visit.reason) {\n    error.status = 'patient.visits.error.reasonRequired'\n  }\n\n  if (!visit.location) {\n    error.status = 'patient.visits.error.locationRequired'\n  }\n\n  return error\n}\n","import isEmpty from 'lodash/isEmpty'\nimport { queryCache, useMutation } from 'react-query'\n\nimport PatientRepository from '../../shared/db/PatientRepository'\nimport Visit from '../../shared/model/Visit'\nimport { uuid } from '../../shared/util/uuid'\nimport validateVisit from '../util/validate-visit'\n\nexport type RequestVisit = Omit<Visit, 'id' | 'createdAt'>\ninterface AddVisitRequest {\n  patientId: string\n  visit: RequestVisit\n}\n\nasync function addVisit(request: AddVisitRequest): Promise<Visit[]> {\n  const error = validateVisit(request.visit)\n  if (isEmpty(error)) {\n    const patient = await PatientRepository.find(request.patientId)\n    const visits = patient.visits || ([] as Visit[])\n    visits.push({\n      id: uuid(),\n      createdAt: new Date(Date.now().valueOf()).toISOString(),\n      ...request.visit,\n    })\n    await PatientRepository.saveOrUpdate({\n      ...patient,\n      visits,\n    })\n    return visits\n  }\n  error.message = 'patient.visits.error.unableToAdd'\n  throw error\n}\n\nexport default function useAddVisit() {\n  return useMutation(addVisit, {\n    onSuccess: async (data, variables) => {\n      await queryCache.setQueryData(['visits', variables.patientId], data)\n    },\n    throwOnError: true,\n  })\n}\n","import { Select, Label, Alert, Column, Row } from '@hospitalrun/components'\nimport React, { useState } from 'react'\n\nimport DateTimePickerWithLabelFormGroup from '../../shared/components/input/DateTimePickerWithLabelFormGroup'\nimport { SelectOption } from '../../shared/components/input/SelectOption'\nimport TextFieldWithLabelFormGroup from '../../shared/components/input/TextFieldWithLabelFormGroup'\nimport TextInputWithLabelFormGroup from '../../shared/components/input/TextInputWithLabelFormGroup'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport { VisitStatus } from '../../shared/model/Visit'\nimport { RequestVisit } from '../hooks/useAddVisit'\n\ninterface Error {\n  message?: string\n  startDateTime?: string\n  endDateTime?: string\n  type?: string\n  status?: string\n  reason?: string\n  location?: string\n}\ninterface Props {\n  visit: RequestVisit\n  visitError?: Error\n  onChange?: (newVisit: Partial<RequestVisit>) => void\n  disabled?: boolean\n}\n\nconst VisitForm = (props: Props) => {\n  const { t } = useTranslator()\n  const { visit, visitError, disabled, onChange } = props\n\n  const [status, setStatus] = useState(visit.status)\n\n  const onFieldChange = (name: string, value: string | VisitStatus) => {\n    if (onChange) {\n      const newVisit = {\n        ...visit,\n        [name]: value,\n      }\n      onChange(newVisit)\n    }\n  }\n\n  const statusOptions: SelectOption[] =\n    Object.values(VisitStatus).map((v) => ({ label: v, value: v })) || []\n\n  return (\n    <form aria-label=\"visit form\">\n      {visitError?.message && <Alert color=\"danger\" message={t(visitError.message)} />}\n      <Row>\n        <Column sm={6}>\n          <DateTimePickerWithLabelFormGroup\n            isRequired\n            value={visit.startDateTime ? new Date(visit.startDateTime) : new Date()}\n            label={t('patient.visits.startDateTime')}\n            name=\"startDateTime\"\n            feedback={t(visitError?.startDateTime || '')}\n            isInvalid={!!visitError?.startDateTime}\n            isEditable={!disabled}\n            onChange={(date) => onFieldChange('startDateTime', date.toISOString())}\n          />\n        </Column>\n        <Column sm={6}>\n          <DateTimePickerWithLabelFormGroup\n            isRequired\n            value={visit.endDateTime ? new Date(visit.endDateTime) : new Date()}\n            label={t('patient.visits.endDateTime')}\n            name=\"endDateTime\"\n            feedback={t(visitError?.endDateTime || '')}\n            isInvalid={!!visitError?.endDateTime}\n            isEditable={!disabled}\n            onChange={(date) => onFieldChange('endDateTime', date.toISOString())}\n          />\n        </Column>\n      </Row>\n      <Row>\n        <Column sm={12}>\n          <TextInputWithLabelFormGroup\n            isRequired\n            value={visit.type}\n            label={t('patient.visits.type')}\n            name=\"type\"\n            feedback={t(visitError?.type || '')}\n            isInvalid={!!visitError?.type}\n            isEditable={!disabled}\n            onChange={(event) => onFieldChange('type', event.currentTarget.value)}\n          />\n        </Column>\n      </Row>\n      <Row>\n        <Column sm={12}>\n          <Label text={t('patient.visits.status')} title=\"status\" isRequired />\n          <Select\n            id=\"status\"\n            options={statusOptions}\n            defaultSelected={statusOptions.filter(({ value }) => value === status)}\n            onChange={(values) => {\n              onFieldChange('status', values[0])\n              setStatus(values[0] as VisitStatus)\n            }}\n            disabled={disabled}\n            isInvalid={!!visitError?.status}\n          />\n        </Column>\n      </Row>\n      <Row>\n        <Column sm={12}>\n          <TextFieldWithLabelFormGroup\n            isRequired\n            value={visit.reason}\n            label={t('patient.visits.reason')}\n            name=\"reason\"\n            feedback={visitError?.reason}\n            isInvalid={!!visitError?.reason}\n            isEditable={!disabled}\n            onChange={(event) => onFieldChange('reason', event.currentTarget.value)}\n          />\n        </Column>\n      </Row>\n      <Row>\n        <Column sm={12}>\n          <TextInputWithLabelFormGroup\n            isRequired\n            value={visit.location}\n            label={t('patient.visits.location')}\n            name=\"location\"\n            feedback={t(visitError?.location || '')}\n            isInvalid={!!visitError?.location}\n            isEditable={!disabled}\n            onChange={(event) => onFieldChange('location', event.currentTarget.value)}\n          />\n        </Column>\n      </Row>\n    </form>\n  )\n}\n\nVisitForm.defaultProps = {\n  disabled: false,\n  onChange: (newVisit: Partial<RequestVisit>) => newVisit,\n  visitError: {},\n}\n\nexport default VisitForm\n","import { Modal } from '@hospitalrun/components'\nimport addMonths from 'date-fns/addMonths'\nimport React, { useState, useEffect } from 'react'\n\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport Visit, { VisitStatus } from '../../shared/model/Visit'\nimport useAddVisit, { RequestVisit } from '../hooks/useAddVisit'\nimport VisitForm from './VisitForm'\n\ninterface Props {\n  show: boolean\n  onCloseButtonClick: () => void\n  patientId: string\n}\n\nconst initialVisitState = {\n  startDateTime: new Date().toISOString(),\n  endDateTime: addMonths(new Date(), 1).toISOString(),\n  updatedAt: '',\n  type: '',\n  status: '' as VisitStatus,\n  reason: '',\n  location: '',\n  rev: '',\n}\n\nconst AddVisitModal = ({ show, onCloseButtonClick, patientId }: Props) => {\n  const { t } = useTranslator()\n\n  const [mutate] = useAddVisit()\n  const [visit, setVisit] = useState<RequestVisit>(initialVisitState)\n  const [error, setError] = useState<Error | undefined>(undefined)\n\n  useEffect(() => {\n    setVisit(initialVisitState)\n  }, [show])\n\n  const onVisitChange = (newVisit: Partial<Visit>) => {\n    setVisit(newVisit as Visit)\n  }\n  const onClose = () => {\n    onCloseButtonClick()\n  }\n\n  const onSaveButtonClick = async () => {\n    try {\n      await mutate({ patientId, visit })\n      onClose()\n    } catch (e) {\n      setError(e)\n    }\n  }\n\n  const body = <VisitForm visit={visit} visitError={error} onChange={onVisitChange} />\n  return (\n    <Modal\n      show={show}\n      toggle={onClose}\n      title={t('patient.visits.new')}\n      body={body}\n      closeButton={{\n        children: t('actions.cancel'),\n        color: 'danger',\n        onClick: onClose,\n      }}\n      successButton={{\n        children: t('patient.visits.new'),\n        color: 'success',\n        icon: 'add',\n        iconLocation: 'left',\n        onClick: onSaveButtonClick,\n      }}\n    />\n  )\n}\n\nexport default AddVisitModal\n","import { useQuery } from 'react-query'\n\nimport PatientRepository from '../../shared/db/PatientRepository'\nimport Visit from '../../shared/model/Visit'\n\nasync function fetchVisit(\n  _: string,\n  patientId: string,\n  visitsId: string,\n): Promise<Visit | undefined> {\n  const { visits } = await PatientRepository.find(patientId)\n  return visits.find(({ id }) => id === visitsId) || undefined\n}\n\nexport default function useVisit(patientId: string, visitsId: string) {\n  return useQuery(['visits', patientId, visitsId], fetchVisit)\n}\n","import React from 'react'\nimport { useParams } from 'react-router-dom'\n\nimport Loading from '../../shared/components/Loading'\nimport useVisit from '../hooks/useVisit'\nimport VisitForm from './VisitForm'\n\ninterface Props {\n  patientId: string\n}\nconst ViewVisit = ({ patientId }: Props) => {\n  const { visitId } = useParams()\n\n  const { data: visit, status } = useVisit(patientId, visitId)\n\n  if (visit === undefined || status === 'loading') {\n    return <Loading />\n  }\n\n  return (\n    <>\n      <h2>{visit.reason}</h2>\n      <VisitForm visit={visit} disabled />\n    </>\n  )\n}\n\nexport default ViewVisit\n","import { Alert, Table } from '@hospitalrun/components'\nimport format from 'date-fns/format'\nimport React from 'react'\nimport { useHistory } from 'react-router-dom'\n\nimport Loading from '../../shared/components/Loading'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport usePatientVisits from '../hooks/usePatientVisits'\n\ninterface Props {\n  patientId: string\n}\nconst VisitTable = ({ patientId }: Props) => {\n  const history = useHistory()\n  const { t } = useTranslator()\n\n  const { data: patientVisits, status } = usePatientVisits(patientId)\n\n  if (patientVisits === undefined || status === 'loading') {\n    return <Loading />\n  }\n\n  if (patientVisits.length === 0) {\n    return (\n      <Alert\n        color=\"warning\"\n        title={t('patient.visits.warning.noVisits')}\n        message={t('patient.visits.warning.addVisitAbove')}\n      />\n    )\n  }\n\n  return (\n    <Table\n      getID={(row) => row.id}\n      data={patientVisits}\n      columns={[\n        {\n          label: t('patient.visits.startDateTime'),\n          key: 'startDateTime',\n          formatter: (row) => format(new Date(row.startDateTime), 'yyyy-MM-dd hh:mm a'),\n        },\n        {\n          label: t('patient.visits.endDateTime'),\n          key: 'endDateTime',\n          formatter: (row) => format(new Date(row.endDateTime), 'yyyy-MM-dd hh:mm a'),\n        },\n        { label: t('patient.visits.type'), key: 'type' },\n        { label: t('patient.visits.status'), key: 'status' },\n        { label: t('patient.visits.reason'), key: 'reason' },\n        { label: t('patient.visits.location'), key: 'location' },\n      ]}\n      actionsHeaderText={t('actions.label')}\n      actions={[\n        {\n          label: t('actions.view'),\n          action: (row) => history.push(`/patients/${patientId}/visits/${row.id}`),\n        },\n      ]}\n    />\n  )\n}\n\nexport default VisitTable\n","import { Button } from '@hospitalrun/components'\nimport React, { useState } from 'react'\nimport { useSelector } from 'react-redux'\nimport { Route, Switch } from 'react-router-dom'\n\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport Permissions from '../../shared/model/Permissions'\nimport { RootState } from '../../shared/store'\nimport AddVisitModal from './AddVisitModal'\nimport ViewVisit from './ViewVisit'\nimport VisitTable from './VisitTable'\n\ninterface Props {\n  patientId: string\n}\n\nconst VisitTab = ({ patientId }: Props) => {\n  const { t } = useTranslator()\n  const { permissions } = useSelector((state: RootState) => state.user)\n  const [showAddVisitModal, setShowAddVisitModal] = useState(false)\n  return (\n    <>\n      <div className=\"row\">\n        <div className=\"col-md-12 d-flex justify-content-end\">\n          {permissions.includes(Permissions.AddVisit) && (\n            <Button\n              outlined\n              color=\"success\"\n              icon=\"add\"\n              iconLocation=\"left\"\n              onClick={() => setShowAddVisitModal(true)}\n            >\n              {t('patient.visits.new')}\n            </Button>\n          )}\n        </div>\n      </div>\n      <br />\n      <Switch>\n        <Route exact path=\"/patients/:id/visits\">\n          <VisitTable patientId={patientId} />\n        </Route>\n        <Route exact path=\"/patients/:id/visits/:visitId\">\n          <ViewVisit patientId={patientId} />\n        </Route>\n      </Switch>\n      <AddVisitModal\n        show={showAddVisitModal}\n        patientId={patientId}\n        onCloseButtonClick={() => setShowAddVisitModal(false)}\n      />\n    </>\n  )\n}\n\nexport default VisitTab\n","import { Row, Table, Button, Typography } from '@hospitalrun/components'\nimport React, { CSSProperties, useState } from 'react'\nimport { useSelector } from 'react-redux'\nimport { useHistory } from 'react-router-dom'\n\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport Allergy from '../../shared/model/Allergy'\nimport Diagnosis from '../../shared/model/Diagnosis'\nimport Patient from '../../shared/model/Patient'\nimport Permissions from '../../shared/model/Permissions'\nimport { RootState } from '../../shared/store'\nimport { formatDate } from '../../shared/util/formatDate'\nimport NewAllergyModal from '../allergies/NewAllergyModal'\nimport AddCarePlanModal from '../care-plans/AddCarePlanModal'\nimport AddDiagnosisModal from '../diagnoses/AddDiagnosisModal'\nimport usePatientAllergies from '../hooks/usePatientAllergies'\nimport AddVisitModal from '../visits/AddVisitModal'\n\ninterface Props {\n  patient: Patient\n}\n\nconst getPatientCode = (p: Patient): string => {\n  if (p) {\n    return p.code\n  }\n\n  return ''\n}\n\nconst ImportantPatientInfo = (props: Props) => {\n  const { patient } = props\n  const { t } = useTranslator()\n  const history = useHistory()\n  const { permissions } = useSelector((state: RootState) => state.user)\n  const [showNewAllergyModal, setShowNewAllergyModal] = useState(false)\n  const [showDiagnosisModal, setShowDiagnosisModal] = useState(false)\n  const [showAddCarePlanModal, setShowAddCarePlanModal] = useState(false)\n  const [showAddVisitModal, setShowAddVisitModal] = useState(false)\n  const { data, status } = usePatientAllergies(patient.id)\n\n  const headerRowStyle: CSSProperties = {\n    minHeight: '3rem',\n    marginBottom: '1rem',\n  }\n\n  const middleRowStyle: CSSProperties = {\n    minHeight: '3rem',\n    marginBottom: '1rem',\n  }\n\n  const headerInfoStyle: CSSProperties = {\n    display: 'flex',\n    flexDirection: 'column',\n    position: 'relative',\n    color: 'black',\n    backgroundColor: 'rgba(245,245,245,1)',\n    fontSize: 'small',\n    textAlign: 'center',\n    justifyContent: 'center',\n    height: '100%',\n  }\n\n  const headerInfoPatientNameStyle: CSSProperties = {\n    display: 'flex',\n    flexDirection: 'column',\n    color: 'black',\n    textAlign: 'left',\n    justifyContent: 'center',\n    height: '100%',\n  }\n\n  const headerAddVisitButtonStyle: CSSProperties = {\n    height: '2.5rem',\n  }\n\n  const middleRowSectionStyle: CSSProperties = {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100%',\n  }\n\n  const tableContainerStyle: CSSProperties = {\n    fontSize: 'small',\n  }\n\n  return (\n    <div>\n      <Row style={headerRowStyle}>\n        <div className=\"col-2\">\n          <div style={headerInfoPatientNameStyle}>\n            <h3>{patient.fullName}</h3>\n          </div>\n        </div>\n        <div className=\"col-2\">\n          <div style={headerInfoStyle}>\n            <strong>{t('patient.code')}</strong>\n            <h6>{getPatientCode(patient)}</h6>\n          </div>\n        </div>\n        <div className=\"col-2\">\n          <div style={headerInfoStyle} className=\"patient-sex\">\n            <strong>{t('patient.sex')}</strong>\n            <h6>{patient.sex}</h6>\n          </div>\n        </div>\n        <div className=\"col-2\">\n          <div style={headerInfoStyle} className=\"patient-dateOfBirth\">\n            <strong>{t('patient.dateOfBirth')}</strong>\n            <h6>\n              {patient.dateOfBirth\n                ? formatDate(patient.dateOfBirth)\n                : t('patient.unknownDateOfBirth')}\n            </h6>\n          </div>\n        </div>\n\n        <div className=\"col d-flex justify-content-end align-items-center\">\n          {permissions.includes(Permissions.AddVisit) && (\n            <Button\n              outlined\n              color=\"success\"\n              icon=\"add\"\n              iconLocation=\"left\"\n              style={headerAddVisitButtonStyle}\n              onClick={() => setShowAddVisitModal(true)}\n            >\n              {t('patient.visits.new')}\n            </Button>\n          )}\n        </div>\n      </Row>\n\n      <Row style={middleRowStyle}>\n        <div className=\"col allergies-section\" style={middleRowSectionStyle}>\n          <Typography variant=\"h5\">{t('patient.allergies.label')}</Typography>\n          <div className=\"border border-primary\" style={tableContainerStyle}>\n            <Table\n              tableClassName=\"table table-hover table-sm m-0\"\n              onRowClick={() => history.push(`/patients/${patient.id}/allergies`)}\n              getID={(row) => row.id}\n              columns={[{ label: t('patient.allergies.allergyName'), key: 'name' }]}\n              data={data && status !== 'loading' ? (data as Allergy[]) : []}\n            />\n          </div>\n          {permissions.includes(Permissions.AddAllergy) && (\n            <Button\n              size=\"small\"\n              color=\"primary\"\n              icon=\"add\"\n              iconLocation=\"left\"\n              onClick={() => setShowNewAllergyModal(true)}\n            >\n              {t('patient.allergies.new')}\n            </Button>\n          )}\n        </div>\n\n        <div className=\"col diagnoses-section\" style={middleRowSectionStyle}>\n          <Typography variant=\"h5\">{t('patient.diagnoses.label')}</Typography>\n          <div className=\"border border-primary\" style={tableContainerStyle}>\n            <Table\n              tableClassName=\"table table-hover table-sm m-0\"\n              onRowClick={(row) => history.push(`/patients/${patient.id}/diagnoses/${row.id}`)}\n              getID={(row) => row.id}\n              columns={[\n                { label: t('patient.diagnoses.diagnosisName'), key: 'name' },\n                {\n                  label: t('patient.diagnoses.diagnosisDate'),\n                  key: 'diagnosisDate',\n                  formatter: (row) => formatDate(row.diagnosisDate),\n                },\n                { label: t('patient.diagnoses.status'), key: 'status' },\n              ]}\n              data={patient.diagnoses ? (patient.diagnoses as Diagnosis[]) : []}\n            />\n          </div>\n          {permissions.includes(Permissions.AddDiagnosis) && (\n            <Button\n              size=\"small\"\n              color=\"primary\"\n              icon=\"add\"\n              iconLocation=\"left\"\n              onClick={() => setShowDiagnosisModal(true)}\n            >\n              {t('patient.diagnoses.new')}\n            </Button>\n          )}\n        </div>\n\n        <div className=\"col carePlan-section\" style={middleRowSectionStyle}>\n          <Typography variant=\"h5\">{t('patient.carePlan.label')}</Typography>\n          <div className=\"border border-primary\" style={tableContainerStyle}>\n            <Table\n              tableClassName=\"table table-hover table-sm m-0\"\n              onRowClick={(row) => history.push(`/patients/${patient.id}/care-plans/${row.id}`)}\n              getID={(row) => row.id}\n              data={patient.carePlans || []}\n              columns={[\n                { label: t('patient.carePlan.title'), key: 'title' },\n                {\n                  label: t('patient.carePlan.startDate'),\n                  key: 'startDate',\n                  formatter: (row) => formatDate(row.startDate),\n                },\n                {\n                  label: t('patient.carePlan.endDate'),\n                  key: 'endDate',\n                  formatter: (row) => formatDate(row.endDate),\n                },\n                { label: t('patient.carePlan.status'), key: 'status' },\n              ]}\n            />\n          </div>\n          {permissions.includes(Permissions.AddCarePlan) && (\n            <Button\n              size=\"small\"\n              color=\"primary\"\n              icon=\"add\"\n              iconLocation=\"left\"\n              onClick={() => setShowAddCarePlanModal(true)}\n            >\n              {t('patient.carePlan.new')}\n            </Button>\n          )}\n        </div>\n      </Row>\n\n      <NewAllergyModal\n        show={showNewAllergyModal}\n        onCloseButtonClick={() => setShowNewAllergyModal(false)}\n        patientId={patient.id}\n      />\n\n      <AddDiagnosisModal\n        show={showDiagnosisModal}\n        onCloseButtonClick={() => setShowDiagnosisModal(false)}\n        patient={patient}\n      />\n\n      <AddCarePlanModal\n        show={showAddCarePlanModal}\n        onCloseButtonClick={() => setShowAddCarePlanModal(false)}\n        patient={patient}\n      />\n\n      <AddVisitModal\n        show={showAddVisitModal}\n        onCloseButtonClick={() => setShowAddVisitModal(false)}\n        patientId={patient.id}\n      />\n    </div>\n  )\n}\n\nexport default ImportantPatientInfo\n","import { Panel, Spinner, TabsHeader, Tab, Button } from '@hospitalrun/components'\nimport React, { useEffect } from 'react'\nimport { useSelector } from 'react-redux'\nimport {\n  useParams,\n  withRouter,\n  Route,\n  useHistory,\n  useLocation,\n  useRouteMatch,\n} from 'react-router-dom'\n\nimport useAddBreadcrumbs from '../../page-header/breadcrumbs/useAddBreadcrumbs'\nimport { useButtonToolbarSetter } from '../../page-header/button-toolbar/ButtonBarProvider'\nimport { useUpdateTitle } from '../../page-header/title/TitleContext'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport Permissions from '../../shared/model/Permissions'\nimport { RootState } from '../../shared/store'\nimport Allergies from '../allergies/Allergies'\nimport AppointmentsList from '../appointments/AppointmentsList'\nimport CareGoalTab from '../care-goals/CareGoalTab'\nimport CarePlanTab from '../care-plans/CarePlanTab'\nimport Diagnoses from '../diagnoses/Diagnoses'\nimport GeneralInformation from '../GeneralInformation'\nimport HistoryTab from '../history/HistoryTab'\nimport usePatient from '../hooks/usePatient'\nimport Labs from '../labs/Labs'\nimport Medications from '../medications/Medications'\nimport Note from '../notes/NoteTab'\nimport RelatedPerson from '../related-persons/RelatedPersonTab'\nimport { getPatientFullName } from '../util/patient-util'\nimport VisitTab from '../visits/VisitTab'\nimport ImportantPatientInfo from './ImportantPatientInfo'\n\nconst ViewPatient = () => {\n  const { t } = useTranslator()\n  const history = useHistory()\n  const location = useLocation()\n  const { path } = useRouteMatch()\n  const setButtonToolBar = useButtonToolbarSetter()\n\n  const { id } = useParams()\n  const { permissions } = useSelector((state: RootState) => state.user)\n  const { data: patient, status } = usePatient(id)\n\n  const updateTitle = useUpdateTitle()\n  useEffect(() => {\n    updateTitle(t('patient.label'))\n  }, [updateTitle, t])\n\n  const breadcrumbs = [\n    { i18nKey: 'patients.label', location: '/patients' },\n    { text: getPatientFullName(patient), location: `/patients/${id}` },\n  ]\n  useAddBreadcrumbs(breadcrumbs, true)\n\n  useEffect(() => {\n    const buttons = []\n    if (permissions.includes(Permissions.WritePatients)) {\n      buttons.push(\n        <Button\n          key=\"editPatientButton\"\n          color=\"success\"\n          icon=\"edit\"\n          outlined\n          onClick={() => {\n            history.push(`/patients/edit/${id}`)\n          }}\n        >\n          {t('actions.edit')}\n        </Button>,\n      )\n    }\n\n    setButtonToolBar(buttons)\n\n    return () => {\n      setButtonToolBar([])\n    }\n  }, [setButtonToolBar, history, id, permissions, t])\n\n  if (status === 'loading' || !patient) {\n    return <Spinner color=\"blue\" loading size={[10, 25]} type=\"ScaleLoader\" />\n  }\n\n  return (\n    <div>\n      {' '}\n      <ImportantPatientInfo patient={patient} />\n      <div>\n        <TabsHeader>\n          <Tab\n            active={location.pathname === `/patients/${patient.id}`}\n            label={t('patient.generalInformation')}\n            onClick={() => history.push(`/patients/${patient.id}`)}\n          />\n          <Tab\n            active={location.pathname === `/patients/${patient.id}/relatedpersons`}\n            label={t('patient.relatedPersons.label')}\n            onClick={() => history.push(`/patients/${patient.id}/relatedpersons`)}\n          />\n          <Tab\n            active={location.pathname === `/patients/${patient.id}/appointments`}\n            label={t('scheduling.appointments.label')}\n            onClick={() => history.push(`/patients/${patient.id}/appointments`)}\n          />\n          <Tab\n            active={location.pathname.startsWith(`/patients/${patient.id}/allergies`)}\n            label={t('patient.allergies.label')}\n            onClick={() => history.push(`/patients/${patient.id}/allergies`)}\n          />\n          <Tab\n            active={location.pathname.startsWith(`/patients/${patient.id}/diagnoses`)}\n            label={t('patient.diagnoses.label')}\n            onClick={() => history.push(`/patients/${patient.id}/diagnoses`)}\n          />\n          <Tab\n            active={location.pathname.startsWith(`/patients/${patient.id}/notes`)}\n            label={t('patient.notes.label')}\n            onClick={() => history.push(`/patients/${patient.id}/notes`)}\n          />\n          <Tab\n            active={location.pathname === `/patients/${patient.id}/medications`}\n            label={t('patient.medications.label')}\n            onClick={() => history.push(`/patients/${patient.id}/medications`)}\n          />\n          <Tab\n            active={location.pathname === `/patients/${patient.id}/labs`}\n            label={t('patient.labs.label')}\n            onClick={() => history.push(`/patients/${patient.id}/labs`)}\n          />\n          <Tab\n            active={location.pathname.startsWith(`/patients/${patient.id}/care-plans`)}\n            label={t('patient.carePlan.label')}\n            onClick={() => history.push(`/patients/${patient.id}/care-plans`)}\n          />\n          <Tab\n            active={location.pathname.startsWith(`/patients/${patient.id}/care-goals`)}\n            label={t('patient.careGoal.label')}\n            onClick={() => history.push(`/patients/${patient.id}/care-goals`)}\n          />\n          <Tab\n            active={location.pathname.startsWith(`/patients/${patient.id}/visits`)}\n            label={t('patient.visits.label')}\n            onClick={() => history.push(`/patients/${patient.id}/visits`)}\n          />\n          <Tab\n            active={location.pathname.startsWith(`/patients/${patient.id}/history`)}\n            label={t('patient.history.label')}\n            onClick={() => history.push(`/patients/${patient.id}/history`)}\n          />\n        </TabsHeader>\n        <Panel>\n          <Route exact path={path}>\n            <GeneralInformation patient={patient} />\n          </Route>\n          <Route exact path={`${path}/relatedpersons`}>\n            <RelatedPerson patient={patient} />\n          </Route>\n          <Route exact path={`${path}/appointments`}>\n            <AppointmentsList patient={patient} />\n          </Route>\n          <Route path={`${path}/allergies`}>\n            <Allergies patient={patient} />\n          </Route>\n          <Route path={`${path}/diagnoses`}>\n            <Diagnoses />\n          </Route>\n          <Route exact path={`${path}/notes`}>\n            <Note patient={patient} />\n          </Route>\n          <Route exact path={`${path}/medications`}>\n            <Medications patient={patient} />\n          </Route>\n          <Route exact path={`${path}/labs`}>\n            <Labs patient={patient} />\n          </Route>\n          <Route path={`${path}/care-plans`}>\n            <CarePlanTab />\n          </Route>\n          <Route path={`${path}/care-goals`}>\n            <CareGoalTab />\n          </Route>\n          <Route path={`${path}/visits`}>\n            <VisitTab patientId={patient.id} />\n          </Route>\n          <Route path={`${path}/history`}>\n            <HistoryTab patientId={patient.id} />\n          </Route>\n        </Panel>\n      </div>\n    </div>\n  )\n}\n\nexport default withRouter(ViewPatient)\n","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { Switch } from 'react-router-dom'\n\nimport PrivateRoute from '../shared/components/PrivateRoute'\nimport Permissions from '../shared/model/Permissions'\nimport { RootState } from '../shared/store'\nimport EditPatient from './edit/EditPatient'\nimport NewPatient from './new/NewPatient'\nimport ViewPatients from './search/ViewPatients'\nimport ViewPatient from './view/ViewPatient'\n\nconst Patients = () => {\n  const permissions = useSelector((state: RootState) => state.user.permissions)\n  return (\n    <Switch>\n      <PrivateRoute\n        isAuthenticated={permissions.includes(Permissions.ReadPatients)}\n        exact\n        path=\"/patients\"\n        component={ViewPatients}\n      />\n      <PrivateRoute\n        isAuthenticated={permissions.includes(Permissions.WritePatients)}\n        exact\n        path=\"/patients/new\"\n        component={NewPatient}\n      />\n      <PrivateRoute\n        isAuthenticated={\n          permissions.includes(Permissions.WritePatients) &&\n          permissions.includes(Permissions.ReadPatients)\n        }\n        exact\n        path=\"/patients/edit/:id\"\n        component={EditPatient}\n      />\n      <PrivateRoute\n        isAuthenticated={permissions.includes(Permissions.ReadPatients)}\n        path=\"/patients/:id\"\n        component={ViewPatient}\n      />\n    </Switch>\n  )\n}\n\nexport default Patients\n","import escapeStringRegexp from 'escape-string-regexp'\n\nimport { relationalDb } from '../config/pouchdb'\nimport Appointment from '../model/Appointment'\nimport Repository from './Repository'\n\nclass AppointmentRepository extends Repository<Appointment> {\n  constructor() {\n    super('appointment', relationalDb)\n    this.db.createIndex({\n      index: {\n        fields: ['data.patient', '_id'],\n      },\n    })\n  }\n\n  // Fuzzy search for patient appointments. Used for patient appointment search bar\n  async searchPatientAppointments(patientId: string, text: string): Promise<Appointment[]> {\n    const escapedString = escapeStringRegexp(text)\n    return super.search({\n      selector: {\n        $and: [\n          {\n            'data.patient': patientId,\n          },\n          {\n            $or: [\n              {\n                'data.location': {\n                  $regex: RegExp(escapedString, 'i'),\n                },\n              },\n              {\n                'data.reason': {\n                  $regex: RegExp(escapedString, 'i'),\n                },\n              },\n              {\n                'data.type': {\n                  $regex: RegExp(escapedString, 'i'),\n                },\n              },\n            ],\n          },\n        ],\n      },\n    })\n  }\n}\n\nexport default new AppointmentRepository()\n","import { useQuery } from 'react-query'\n\nimport AppointmentRepository from '../../shared/db/AppointmentRepository'\nimport Appointment from '../../shared/model/Appointment'\n\nfunction getAppointmentById(_: string, appointmentId: string): Promise<Appointment> {\n  return AppointmentRepository.find(appointmentId)\n}\n\nexport default function useAppointment(appointmentId: string) {\n  return useQuery(['appointment', appointmentId], getAppointmentById)\n}\n","import isBefore from 'date-fns/isBefore'\n\nimport Appointment from '../../../shared/model/Appointment'\n\nexport class AppointmentError extends Error {\n  patient?: string\n\n  startDateTime?: string\n\n  constructor(patient: string, startDateTime: string, message: string) {\n    super(message)\n    this.patient = patient\n    this.startDateTime = startDateTime\n    Object.setPrototypeOf(this, AppointmentError.prototype)\n  }\n}\n\nexport default function validateAppointment(appointment: Appointment): AppointmentError {\n  const newError: any = {}\n\n  if (!appointment.patient) {\n    newError.patient = 'scheduling.appointment.errors.patientRequired'\n  }\n  if (isBefore(new Date(appointment.endDateTime), new Date(appointment.startDateTime))) {\n    newError.startDateTime = 'scheduling.appointment.errors.startDateMustBeBeforeEndDate'\n  }\n\n  return newError as AppointmentError\n}\n","import { MutateFunction, queryCache, useMutation } from 'react-query'\n\nimport AppointmentRepository from '../../shared/db/AppointmentRepository'\nimport Appointment from '../../shared/model/Appointment'\nimport validateAppointment, { AppointmentError } from '../appointments/util/validate-appointment'\n\ninterface updateAppointmentResult {\n  mutate: MutateFunction<Appointment, unknown, Appointment, unknown>\n  isLoading: boolean\n  isError: boolean\n  error: AppointmentError\n}\n\nasync function updateAppointment(appointment: Appointment): Promise<Appointment> {\n  return AppointmentRepository.saveOrUpdate(appointment)\n}\n\nexport default function useUpdateAppointment(appointment: Appointment): updateAppointmentResult {\n  const updateAppointmentError = validateAppointment(appointment)\n  const [mutate, { isLoading, isError }] = useMutation(updateAppointment, {\n    onSuccess: async () => {\n      await queryCache.invalidateQueries('appointment')\n    },\n    throwOnError: true,\n  })\n  const result: updateAppointmentResult = {\n    mutate,\n    isLoading,\n    isError,\n    error: updateAppointmentError,\n  }\n  return result\n}\n","import { Select, Typeahead, Label, Alert } from '@hospitalrun/components'\nimport React from 'react'\n\nimport DateTimePickerWithLabelFormGroup from '../../shared/components/input/DateTimePickerWithLabelFormGroup'\nimport { SelectOption } from '../../shared/components/input/SelectOption'\nimport TextFieldWithLabelFormGroup from '../../shared/components/input/TextFieldWithLabelFormGroup'\nimport TextInputWithLabelFormGroup from '../../shared/components/input/TextInputWithLabelFormGroup'\nimport PatientRepository from '../../shared/db/PatientRepository'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport Appointment from '../../shared/model/Appointment'\nimport Patient from '../../shared/model/Patient'\n\ninterface Props {\n  appointment: Appointment\n  patient?: Patient\n  isEditable: boolean\n  error?: any\n  onFieldChange?: (key: string, value: string | boolean) => void\n}\n\nconst AppointmentDetailForm = (props: Props) => {\n  const { onFieldChange, appointment, patient, isEditable, error } = props\n  const { t } = useTranslator()\n\n  const onDateChange = (date: Date, fieldName: string) =>\n    onFieldChange && onFieldChange(fieldName, date.toISOString())\n\n  const onInputElementChange = (event: React.ChangeEvent<HTMLInputElement>, fieldName: string) =>\n    onFieldChange && onFieldChange(fieldName, event.target.value)\n\n  const typeOptions: SelectOption[] = [\n    { label: t('scheduling.appointment.types.checkup'), value: 'checkup' },\n    { label: t('scheduling.appointment.types.emergency'), value: 'emergency' },\n    { label: t('scheduling.appointment.types.followUp'), value: 'follow up' },\n    { label: t('scheduling.appointment.types.routine'), value: 'routine' },\n    { label: t('scheduling.appointment.types.walkIn'), value: 'walk in' },\n  ]\n\n  return (\n    <>\n      {error?.message && <Alert className=\"alert\" color=\"danger\" message={t(error?.message)} />}\n      <div className=\"row\">\n        <div className=\"col\">\n          <div className=\"form-group\">\n            <Label\n              htmlFor=\"patientTypeahead\"\n              isRequired\n              text={t('scheduling.appointment.patient')}\n            />\n            <Typeahead\n              id=\"patientTypeahead\"\n              disabled={!isEditable || patient !== undefined}\n              value={patient?.fullName}\n              placeholder={t('scheduling.appointment.patient')}\n              onChange={(p: Patient[]) =>\n                onFieldChange && p[0] && onFieldChange('patient', p[0].id)\n              }\n              onSearch={async (query: string) => PatientRepository.search(query)}\n              searchAccessor=\"fullName\"\n              renderMenuItemChildren={(p: Patient) => <div>{`${p.fullName} (${p.code})`}</div>}\n              isInvalid={!!error?.patient}\n              feedback={t(error?.patient)}\n            />\n          </div>\n        </div>\n      </div>\n      <div className=\"row\">\n        <div className=\"col\">\n          <DateTimePickerWithLabelFormGroup\n            name=\"startDate\"\n            label={t('scheduling.appointment.startDate')}\n            value={\n              appointment.startDateTime && appointment.startDateTime.length > 0\n                ? new Date(appointment.startDateTime)\n                : undefined\n            }\n            isEditable={isEditable}\n            isInvalid={error?.startDateTime}\n            feedback={t(error?.startDateTime)}\n            onChange={(date: Date) => {\n              onDateChange(date, 'startDateTime')\n            }}\n          />\n        </div>\n        <div className=\"col\">\n          <DateTimePickerWithLabelFormGroup\n            name=\"endDate\"\n            label={t('scheduling.appointment.endDate')}\n            value={\n              appointment.endDateTime && appointment.endDateTime.length > 0\n                ? new Date(appointment.endDateTime)\n                : undefined\n            }\n            isEditable={isEditable}\n            onChange={(date: Date) => {\n              onDateChange(date, 'endDateTime')\n            }}\n          />\n        </div>\n      </div>\n      <div className=\"row\">\n        <div className=\"col\">\n          <TextInputWithLabelFormGroup\n            name=\"location\"\n            label={t('scheduling.appointment.location')}\n            value={appointment.location}\n            isEditable={isEditable}\n            onChange={(event) => {\n              onInputElementChange(event, 'location')\n            }}\n          />\n        </div>\n      </div>\n      <div className=\"row\">\n        <div className=\"col\">\n          <div className=\"form-group\" data-testid=\"typeSelect\">\n            <Label text={t('scheduling.appointment.type')} title=\"type\" />\n            <Select\n              id=\"type\"\n              options={typeOptions}\n              defaultSelected={typeOptions.filter(({ value }) => value === appointment.type)}\n              onChange={(values) => onFieldChange && onFieldChange('type', values[0])}\n              disabled={!isEditable}\n            />\n          </div>\n        </div>\n      </div>\n      <div className=\"row\">\n        <div className=\"col\">\n          <div className=\"form-group\">\n            <TextFieldWithLabelFormGroup\n              name=\"reason\"\n              label={t('scheduling.appointment.reason')}\n              value={appointment.reason}\n              isEditable={isEditable}\n              onChange={(event: React.ChangeEvent<HTMLTextAreaElement>) =>\n                onFieldChange && onFieldChange('reason', event.currentTarget.value)\n              }\n            />\n          </div>\n        </div>\n      </div>\n    </>\n  )\n}\n\nAppointmentDetailForm.defaultProps = {\n  isEditable: true,\n}\n\nexport default AppointmentDetailForm\n","import Appointment from '../../../shared/model/Appointment'\n\nconst options = {\n  year: 'numeric',\n  month: '2-digit',\n  day: '2-digit',\n  hour: '2-digit',\n  minute: '2-digit',\n}\n\nfunction toLocaleString(date: Date) {\n  return date.toLocaleString([], options)\n}\n\nexport function getAppointmentLabel(appointment: Appointment | undefined) {\n  if (!appointment) {\n    return ''\n  }\n\n  const { id, startDateTime, endDateTime } = appointment\n\n  return startDateTime && endDateTime\n    ? `${toLocaleString(new Date(startDateTime))} - ${toLocaleString(new Date(endDateTime))}`\n    : id\n}\n","import { Spinner, Button, Toast } from '@hospitalrun/components'\nimport isEmpty from 'lodash/isEmpty'\nimport React, { useEffect, useState } from 'react'\nimport { useHistory, useParams } from 'react-router-dom'\n\nimport useAddBreadcrumbs from '../../../page-header/breadcrumbs/useAddBreadcrumbs'\nimport { useUpdateTitle } from '../../../page-header/title/TitleContext'\nimport usePatient from '../../../patients/hooks/usePatient'\nimport useTranslator from '../../../shared/hooks/useTranslator'\nimport Appointment from '../../../shared/model/Appointment'\nimport useAppointment from '../../hooks/useAppointment'\nimport useUpdateAppointment from '../../hooks/useUpdateAppointment'\nimport AppointmentDetailForm from '../AppointmentDetailForm'\nimport { getAppointmentLabel } from '../util/scheduling-appointment.util'\n\nconst EditAppointment = () => {\n  const { t } = useTranslator()\n  const { id } = useParams()\n\n  const updateTitle = useUpdateTitle()\n  useEffect(() => {\n    updateTitle(t('scheduling.appointments.editAppointment'))\n  }, [updateTitle, t])\n  const history = useHistory()\n\n  const [newAppointment, setAppointment] = useState({} as Appointment)\n  const { data: currentAppointment, isLoading: isLoadingAppointment } = useAppointment(id)\n\n  const {\n    mutate: updateMutate,\n    isLoading: isLoadingUpdate,\n    isError: isErrorUpdate,\n    error: updateMutateError,\n  } = useUpdateAppointment(newAppointment)\n  const { data: patient } = usePatient(currentAppointment ? currentAppointment.patient : id)\n\n  const breadcrumbs = [\n    { i18nKey: 'scheduling.appointments.label', location: '/appointments' },\n    {\n      text: getAppointmentLabel(currentAppointment),\n      location: `/appointments/${id}`,\n    },\n    {\n      i18nKey: 'scheduling.appointments.editAppointment',\n      location: `/appointments/edit/${id}`,\n    },\n  ]\n  useAddBreadcrumbs(breadcrumbs, true)\n\n  useEffect(() => {\n    if (currentAppointment !== undefined) {\n      setAppointment(currentAppointment)\n    }\n  }, [currentAppointment])\n\n  const onCancel = () => {\n    history.push(`/appointments/${newAppointment.id}`)\n  }\n\n  const onSave = () => {\n    if (isEmpty(updateMutateError) && !isErrorUpdate) {\n      updateMutate(newAppointment).then(() => {\n        Toast('success', t('states.success'), t('scheduling.appointment.successfullyUpdated'))\n        history.push(`/appointments/${newAppointment.id}`)\n      })\n    }\n  }\n\n  const onFieldChange = (key: string, value: string | boolean) => {\n    setAppointment({\n      ...newAppointment,\n      [key]: value,\n    })\n  }\n\n  if (isLoadingAppointment || isLoadingUpdate) {\n    return <Spinner color=\"blue\" loading size={[10, 25]} type=\"ScaleLoader\" />\n  }\n\n  return (\n    <div>\n      <AppointmentDetailForm\n        isEditable\n        appointment={newAppointment}\n        patient={patient}\n        onFieldChange={onFieldChange}\n        error={updateMutateError}\n      />\n      <div className=\"row float-right\">\n        <div className=\"btn-group btn-group-lg mr-3\">\n          <Button className=\"mr-2\" color=\"success\" onClick={onSave}>\n            {t('scheduling.appointments.updateAppointment')}\n          </Button>\n          <Button color=\"danger\" onClick={onCancel}>\n            {t('actions.cancel')}\n          </Button>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default EditAppointment\n","import { MutateFunction, queryCache, useMutation } from 'react-query'\n\nimport AppointmentRepository from '../../shared/db/AppointmentRepository'\nimport Appointment from '../../shared/model/Appointment'\nimport validateAppointment, { AppointmentError } from '../appointments/util/validate-appointment'\n\ninterface newAppointmentResult {\n  mutate: MutateFunction<Appointment, unknown, Appointment, unknown>\n  isLoading: boolean\n  isError: boolean\n  validator(appointment: Appointment): AppointmentError\n}\n\nasync function createNewAppointment(appointment: Appointment): Promise<Appointment> {\n  return AppointmentRepository.save(appointment)\n}\n\nfunction validateCreateAppointment(appointment: Appointment): AppointmentError {\n  return validateAppointment(appointment)\n}\n\nexport default function useScheduleAppointment(): newAppointmentResult {\n  const [mutate, { isLoading, isError }] = useMutation(createNewAppointment, {\n    onSuccess: async () => {\n      await queryCache.invalidateQueries('appointment')\n    },\n    throwOnError: true,\n  })\n  const result: newAppointmentResult = {\n    mutate,\n    isLoading,\n    isError,\n    validator: validateCreateAppointment,\n  }\n  return result\n}\n","import { Button, Spinner, Toast } from '@hospitalrun/components'\nimport addMinutes from 'date-fns/addMinutes'\nimport roundToNearestMinutes from 'date-fns/roundToNearestMinutes'\nimport isEmpty from 'lodash/isEmpty'\nimport React, { useEffect, useState } from 'react'\nimport { useHistory, useLocation } from 'react-router-dom'\n\nimport useAddBreadcrumbs from '../../../page-header/breadcrumbs/useAddBreadcrumbs'\nimport { useUpdateTitle } from '../../../page-header/title/TitleContext'\nimport useTranslator from '../../../shared/hooks/useTranslator'\nimport Appointment from '../../../shared/model/Appointment'\nimport Patient from '../../../shared/model/Patient'\nimport useScheduleAppointment from '../../hooks/useScheduleAppointment'\nimport AppointmentDetailForm from '../AppointmentDetailForm'\nimport { AppointmentError } from '../util/validate-appointment'\n\nconst breadcrumbs = [\n  { i18nKey: 'scheduling.appointments.label', location: '/appointments' },\n  { i18nKey: 'scheduling.appointments.new', location: '/appointments/new' },\n]\n\ninterface LocationProps {\n  pathname: string\n  state?: {\n    patient: Patient\n  }\n}\n\nconst NewAppointment = () => {\n  const { t } = useTranslator()\n  const history = useHistory()\n  const location: LocationProps = useLocation()\n  const patient = location.state?.patient\n  const updateTitle = useUpdateTitle()\n  useEffect(() => {\n    updateTitle(t('scheduling.appointments.new'))\n  })\n  useAddBreadcrumbs(breadcrumbs, true)\n\n  const startDateTime = roundToNearestMinutes(new Date(), { nearestTo: 15 })\n  const endDateTime = addMinutes(startDateTime, 60)\n  const [saved, setSaved] = useState(false)\n  const [newAppointmentMutateError, setError] = useState<AppointmentError>({} as AppointmentError)\n  const [newAppointment, setAppointment] = useState({\n    patient: patient || '',\n    startDateTime: startDateTime.toISOString(),\n    endDateTime: endDateTime.toISOString(),\n    location: '',\n    reason: '',\n    type: '',\n  } as Appointment)\n\n  const {\n    mutate: newAppointmentMutate,\n    isLoading: isLoadingNewAppointment,\n    isError: isErrorNewAppointment,\n    validator: validateNewAppointment,\n  } = useScheduleAppointment()\n\n  const onCancelClick = () => {\n    history.push('/appointments')\n  }\n\n  const onSave = () => {\n    setSaved(true)\n    setError(validateNewAppointment(newAppointment))\n  }\n\n  useEffect(() => {\n    // if save click and no error proceed, else give error message.\n    if (saved) {\n      if (isEmpty(newAppointmentMutateError) && !isErrorNewAppointment) {\n        newAppointmentMutate(newAppointment).then((result) => {\n          Toast('success', t('states.success'), t('scheduling.appointment.successfullyCreated'))\n          history.push(`/appointments/${result?.id}`)\n        })\n      } else if (!isEmpty(newAppointmentMutateError)) {\n        newAppointmentMutateError.message = 'scheduling.appointment.errors.createAppointmentError'\n      }\n    }\n    setSaved(false)\n  }, [\n    saved,\n    newAppointmentMutateError,\n    isErrorNewAppointment,\n    newAppointmentMutate,\n    newAppointment,\n    t,\n    history,\n  ])\n\n  if (isLoadingNewAppointment) {\n    return <Spinner color=\"blue\" loading size={[10, 25]} type=\"ScaleLoader\" />\n  }\n\n  const onFieldChange = (key: string, value: string | boolean) => {\n    setAppointment({\n      ...newAppointment,\n      [key]: value,\n    })\n  }\n\n  return (\n    <div>\n      <form aria-label=\"new appointment form\">\n        <AppointmentDetailForm\n          appointment={newAppointment as Appointment}\n          patient={patient as Patient}\n          error={newAppointmentMutateError}\n          onFieldChange={onFieldChange}\n        />\n        <div className=\"row float-right\">\n          <div className=\"btn-group btn-group-lg mr-3\">\n            <Button className=\"mr-2\" color=\"success\" onClick={onSave}>\n              {t('scheduling.appointments.createAppointment')}\n            </Button>\n            <Button color=\"danger\" onClick={onCancelClick}>\n              {t('actions.cancel')}\n            </Button>\n          </div>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nexport default NewAppointment\n","import { queryCache, useMutation } from 'react-query'\n\nimport AppointmentRepository from '../../shared/db/AppointmentRepository'\nimport Appointment from '../../shared/model/Appointment'\n\ninterface deleteAppointmentRequest {\n  appointmentId: string\n}\n\nasync function deleteAppointment(request: deleteAppointmentRequest): Promise<Appointment> {\n  const appointment = await AppointmentRepository.find(request.appointmentId)\n  return AppointmentRepository.delete(appointment)\n}\n\nexport default function useDeleteAppointment() {\n  return useMutation(deleteAppointment, {\n    onSuccess: async () => {\n      await queryCache.invalidateQueries('appointment')\n    },\n  })\n}\n","import { Spinner, Button, Modal, Toast } from '@hospitalrun/components'\nimport React, { useCallback, useEffect, useState } from 'react'\nimport { useSelector } from 'react-redux'\nimport { useHistory, useParams } from 'react-router-dom'\n\nimport useAddBreadcrumbs from '../../../page-header/breadcrumbs/useAddBreadcrumbs'\nimport { useButtonToolbarSetter } from '../../../page-header/button-toolbar/ButtonBarProvider'\nimport { useUpdateTitle } from '../../../page-header/title/TitleContext'\nimport usePatient from '../../../patients/hooks/usePatient'\nimport useTranslator from '../../../shared/hooks/useTranslator'\nimport Permissions from '../../../shared/model/Permissions'\nimport { RootState } from '../../../shared/store'\nimport useAppointment from '../../hooks/useAppointment'\nimport useDeleteAppointment from '../../hooks/useDeleteAppointment'\nimport AppointmentDetailForm from '../AppointmentDetailForm'\nimport { getAppointmentLabel } from '../util/scheduling-appointment.util'\n\nconst ViewAppointment = () => {\n  const { t } = useTranslator()\n  const updateTitle = useUpdateTitle()\n\n  useEffect(() => {\n    if (updateTitle) {\n      updateTitle(t('scheduling.appointments.viewAppointment'))\n    }\n  }, [updateTitle, t])\n\n  const { id } = useParams()\n  const history = useHistory()\n  const [deleteMutate] = useDeleteAppointment()\n  const [showDeleteConfirmation, setShowDeleteConfirmation] = useState<boolean>(false)\n  const setButtonToolBar = useButtonToolbarSetter()\n  const { permissions } = useSelector((state: RootState) => state.user)\n\n  const { data: appointment } = useAppointment(id)\n  const { data: patient } = usePatient(appointment ? appointment.patient : id)\n  const breadcrumbs = [\n    { i18nKey: 'scheduling.appointments.label', location: '/appointments' },\n    { text: appointment ? getAppointmentLabel(appointment) : '', location: `/patients/${id}` },\n  ]\n  useAddBreadcrumbs(breadcrumbs, true)\n\n  const onAppointmentDeleteButtonClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    event.preventDefault()\n    setShowDeleteConfirmation(true)\n  }\n\n  const onDeleteConfirmationButtonClick = () => {\n    if (!appointment) {\n      return\n    }\n\n    deleteMutate({ appointmentId: appointment.id }).then(() => {\n      history.push('/appointments')\n      Toast('success', t('states.success'), t('scheduling.appointment.successfullyDeleted'))\n    })\n    setShowDeleteConfirmation(false)\n  }\n\n  const getButtons = useCallback(() => {\n    const buttons: React.ReactNode[] = []\n    if (appointment && permissions.includes(Permissions.WriteAppointments)) {\n      buttons.push(\n        <Button\n          key=\"editAppointmentButton\"\n          color=\"success\"\n          icon=\"edit\"\n          outlined\n          onClick={() => {\n            history.push(`/appointments/edit/${appointment.id}`)\n          }}\n        >\n          {t('actions.edit')}\n        </Button>,\n      )\n    }\n\n    if (permissions.includes(Permissions.DeleteAppointment)) {\n      buttons.push(\n        <Button\n          key=\"deleteAppointmentButton\"\n          color=\"danger\"\n          icon=\"appointment-remove\"\n          onClick={onAppointmentDeleteButtonClick}\n        >\n          {t('scheduling.appointments.deleteAppointment')}\n        </Button>,\n      )\n    }\n\n    return buttons\n  }, [appointment, history, permissions, t])\n\n  useEffect(() => {\n    setButtonToolBar(getButtons())\n\n    return () => {\n      setButtonToolBar([])\n    }\n  }, [getButtons, setButtonToolBar])\n\n  return (\n    <>\n      {patient && appointment ? (\n        <div>\n          <AppointmentDetailForm appointment={appointment} isEditable={false} patient={patient} />\n          <Modal\n            body={t('scheduling.appointment.deleteConfirmationMessage')}\n            buttonsAlignment=\"right\"\n            show={showDeleteConfirmation}\n            closeButton={{\n              children: t('actions.delete'),\n              color: 'danger',\n              onClick: onDeleteConfirmationButtonClick,\n            }}\n            title={t('actions.confirmDelete')}\n            toggle={() => setShowDeleteConfirmation(false)}\n          />\n        </div>\n      ) : (\n        <Spinner type=\"BarLoader\" loading />\n      )}\n    </>\n  )\n}\n\nexport default ViewAppointment\n","import { useQuery } from 'react-query'\n\nimport AppointmentRepository from '../../shared/db/AppointmentRepository'\nimport Appointment from '../../shared/model/Appointment'\n\nasync function fetchAppointments(): Promise<Appointment[]> {\n  const fetchedAppointments = await AppointmentRepository.findAll()\n  return fetchedAppointments || []\n}\n\nexport default function useAppointments() {\n  return useQuery(['appointments'], fetchAppointments)\n}\n","import { Calendar, Button } from '@hospitalrun/components'\nimport React, { useEffect, useState } from 'react'\nimport { useHistory } from 'react-router-dom'\n\nimport useAddBreadcrumbs from '../../page-header/breadcrumbs/useAddBreadcrumbs'\nimport { useButtonToolbarSetter } from '../../page-header/button-toolbar/ButtonBarProvider'\nimport { useUpdateTitle } from '../../page-header/title/TitleContext'\nimport Loading from '../../shared/components/Loading'\nimport PatientRepository from '../../shared/db/PatientRepository'\nimport useTranslator from '../../shared/hooks/useTranslator'\nimport Appointment from '../../shared/model/Appointment'\nimport useAppointments from '../hooks/useAppointments'\n\ninterface Event {\n  id: string\n  start: Date\n  end: Date\n  title: string\n  allDay: boolean\n}\n\nconst breadcrumbs = [{ i18nKey: 'scheduling.appointments.label', location: '/appointments' }]\n\nconst ViewAppointments = () => {\n  const { t } = useTranslator()\n  const history = useHistory()\n  const updateTitle = useUpdateTitle()\n  useEffect(() => {\n    updateTitle(t('scheduling.appointments.label'))\n  })\n  const { data: appointments, isLoading } = useAppointments()\n  const [events, setEvents] = useState<Event[]>([])\n  const setButtonToolBar = useButtonToolbarSetter()\n  useAddBreadcrumbs(breadcrumbs, true)\n\n  useEffect(() => {\n    setButtonToolBar([\n      <Button\n        key=\"newAppointmentButton\"\n        outlined\n        color=\"success\"\n        icon=\"appointment-add\"\n        onClick={() => history.push('/appointments/new')}\n      >\n        {t('scheduling.appointments.new')}\n      </Button>,\n    ])\n\n    return () => {\n      setButtonToolBar([])\n    }\n  }, [setButtonToolBar, history, t])\n\n  useEffect(() => {\n    if (appointments && !isLoading) {\n      appointments.map(async (appointment: Appointment) => {\n        const patient = await PatientRepository.find(appointment.patient)\n        setEvents((eventsArray) => [\n          ...eventsArray,\n          {\n            id: appointment.id,\n            start: new Date(appointment.startDateTime),\n            end: new Date(appointment.endDateTime),\n            title: patient && patient.fullName ? patient.fullName : '',\n            allDay: false,\n          },\n        ])\n      })\n    }\n    return () => {\n      setEvents([])\n    }\n  }, [appointments, isLoading])\n\n  if (isLoading || appointments === undefined) {\n    return <Loading />\n  }\n\n  return (\n    <div>\n      <Calendar\n        events={events}\n        onEventClick={(event) => {\n          history.push(`/appointments/${event.id}`)\n        }}\n      />\n    </div>\n  )\n}\n\nexport default ViewAppointments\n","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { Switch } from 'react-router-dom'\n\nimport PrivateRoute from '../../shared/components/PrivateRoute'\nimport Permissions from '../../shared/model/Permissions'\nimport { RootState } from '../../shared/store'\nimport EditAppointment from './edit/EditAppointment'\nimport NewAppointment from './new/NewAppointment'\nimport ViewAppointment from './view/ViewAppointment'\nimport ViewAppointments from './ViewAppointments'\n\nconst Appointments = () => {\n  const permissions = useSelector((state: RootState) => state.user.permissions)\n  return (\n    <Switch>\n      <PrivateRoute\n        isAuthenticated={permissions.includes(Permissions.ReadAppointments)}\n        exact\n        path=\"/appointments\"\n        component={ViewAppointments}\n      />\n      <PrivateRoute\n        isAuthenticated={permissions.includes(Permissions.WriteAppointments)}\n        exact\n        path=\"/appointments/new\"\n        component={NewAppointment}\n      />\n      <PrivateRoute\n        isAuthenticated={\n          permissions.includes(Permissions.WriteAppointments) &&\n          permissions.includes(Permissions.ReadAppointments)\n        }\n        exact\n        path=\"/appointments/edit/:id\"\n        component={EditAppointment}\n      />\n      <PrivateRoute\n        isAuthenticated={permissions.includes(Permissions.ReadAppointments)}\n        exact\n        path=\"/appointments/:id\"\n        component={ViewAppointment}\n      />\n    </Switch>\n  )\n}\n\nexport default Appointments\n","import { Row, Column } from '@hospitalrun/components'\nimport React, { useEffect } from 'react'\n\nimport { useUpdateTitle } from '../page-header/title/TitleContext'\nimport LanguageSelector from '../shared/components/input/LanguageSelector'\nimport useTranslator from '../shared/hooks/useTranslator'\n\nconst Settings = () => {\n  const { t } = useTranslator()\n  const updateTitle = useUpdateTitle()\n  useEffect(() => {\n    updateTitle(t('settings.label'))\n  })\n  return (\n    <>\n      <Row>\n        <Column xs={12} sm={9}>\n          <LanguageSelector />\n        </Column>\n        <Column xs={0} sm={3} />\n      </Row>\n    </>\n  )\n}\n\nexport default Settings\n","/* eslint-disable no-underscore-dangle */\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit'\n\nimport { remoteDb } from '../shared/config/pouchdb'\nimport Permissions from '../shared/model/Permissions'\nimport User from '../shared/model/User'\nimport { AppThunk } from '../shared/store'\n\nexport interface LoginError {\n  message?: string\n  username?: string\n  password?: string\n}\n\nexport interface UserState {\n  permissions: (Permissions | null)[]\n  user?: User\n  loginError?: LoginError\n}\n\nconst initialState: UserState = {\n  user: {\n    givenName: 'HospitalRun',\n    familyName: 'Test',\n    fullName: 'HospitalRun Test',\n    id: 'test-hospitalrun',\n  },\n  permissions: [\n    Permissions.ReadPatients,\n    Permissions.WritePatients,\n    Permissions.ReadAppointments,\n    Permissions.WriteAppointments,\n    Permissions.DeleteAppointment,\n    Permissions.AddAllergy,\n    Permissions.AddDiagnosis,\n    Permissions.ViewLabs,\n    Permissions.ViewLab,\n    Permissions.RequestLab,\n    Permissions.CompleteLab,\n    Permissions.CancelLab,\n    Permissions.ViewIncident,\n    Permissions.ViewIncidents,\n    Permissions.ReportIncident,\n    Permissions.ResolveIncident,\n    Permissions.ViewIncidentWidgets,\n    Permissions.AddCarePlan,\n    Permissions.ReadCarePlan,\n    Permissions.AddCareGoal,\n    Permissions.ReadCareGoal,\n    Permissions.RequestMedication,\n    Permissions.CompleteMedication,\n    Permissions.CancelMedication,\n    Permissions.ViewMedications,\n    Permissions.ViewMedication,\n    Permissions.AddVisit,\n    Permissions.ReadVisits,\n    Permissions.ViewImagings,\n    Permissions.RequestImaging,\n  ],\n}\n\nconst userSlice = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    fetchPermissions(state, { payload }: PayloadAction<Permissions[]>) {\n      state.permissions = payload\n    },\n    loginSuccess(\n      state,\n      { payload }: PayloadAction<{ user: User; permissions: (Permissions | null)[] }>,\n    ) {\n      state.user = payload.user\n      state.permissions = initialState.permissions\n    },\n    loginError(state, { payload }: PayloadAction<LoginError>) {\n      state.loginError = payload\n    },\n    logoutSuccess(state) {\n      state.user = undefined\n      state.permissions = []\n    },\n  },\n})\n\nexport const { fetchPermissions, loginError, loginSuccess, logoutSuccess } = userSlice.actions\n\nexport const getCurrentSession = (username: string): AppThunk => async (dispatch) => {\n  const user = await remoteDb.getUser(username)\n  dispatch(\n    loginSuccess({\n      user: {\n        id: user._id,\n        givenName: (user as any).metadata.givenName,\n        familyName: (user as any).metadata.familyName,\n      },\n      permissions: initialState.permissions,\n    }),\n  )\n}\n\nexport const login = (username: string, password: string): AppThunk => async (dispatch) => {\n  try {\n    const response = await remoteDb.logIn(username, password)\n    const user = await remoteDb.getUser(response.name)\n    dispatch(\n      loginSuccess({\n        user: {\n          id: user._id,\n          givenName: (user as any).metadata.givenName,\n          familyName: (user as any).metadata.familyName,\n        },\n        permissions: initialState.permissions,\n      }),\n    )\n  } catch (error) {\n    if (!username || !password) {\n      dispatch(\n        loginError({\n          message: 'user.login.error.message.required',\n          username: 'user.login.error.username.required',\n          password: 'user.login.error.password.required',\n        }),\n      )\n    } else if (error.status === 401) {\n      dispatch(\n        loginError({\n          message: 'user.login.error.message.incorrect',\n        }),\n      )\n    }\n  }\n}\n\nexport const logout = (): AppThunk => async (dispatch) => {\n  await remoteDb.logOut()\n  dispatch(logoutSuccess())\n}\n\nexport default userSlice.reducer\n","import Permissions from '../../model/Permissions'\n\ntype Page = { permission: Permissions | null; label: string; path: string; icon: string }\n\nconst pageMap: {\n  [key: string]: Page\n} = {\n  dashboard: {\n    permission: null,\n    label: 'dashboard.label',\n    path: '/',\n    icon: 'dashboard',\n  },\n  newPatient: {\n    permission: Permissions.WritePatients,\n    label: 'patients.newPatient',\n    path: '/patients/new',\n    icon: 'patient-add',\n  },\n  viewPatients: {\n    permission: Permissions.ReadPatients,\n    label: 'patients.patientsList',\n    path: '/patients',\n    icon: 'patients',\n  },\n  newAppointment: {\n    permission: Permissions.WriteAppointments,\n    label: 'scheduling.appointments.new',\n    path: '/appointments/new',\n    icon: 'appointment-add',\n  },\n  viewAppointments: {\n    permission: Permissions.ReadAppointments,\n    label: 'scheduling.appointments.schedule',\n    path: '/appointments',\n    icon: 'appointment',\n  },\n  newMedication: {\n    permission: Permissions.RequestMedication,\n    label: 'medications.requests.new',\n    path: '/medications/new',\n    icon: 'add',\n  },\n  viewMedications: {\n    permission: Permissions.ViewMedications,\n    label: 'medications.requests.label',\n    path: '/medications',\n    icon: 'medication',\n  },\n  newLab: {\n    permission: Permissions.RequestLab,\n    label: 'labs.requests.new',\n    path: '/labs/new',\n    icon: 'add',\n  },\n  viewLabs: {\n    permission: Permissions.ViewLabs,\n    label: 'labs.requests.label',\n    path: '/labs',\n    icon: 'lab',\n  },\n  newImaging: {\n    permission: Permissions.RequestImaging,\n    label: 'imagings.requests.new',\n    path: '/imaging/new',\n    icon: 'add',\n  },\n  viewImagings: {\n    permission: Permissions.ReadPatients,\n    label: 'imagings.requests.label',\n    path: '/imaging',\n    icon: 'image',\n  },\n  newIncident: {\n    permission: Permissions.ReportIncident,\n    label: 'incidents.reports.new',\n    path: '/incidents/new',\n    icon: 'add',\n  },\n  viewIncidents: {\n    permission: Permissions.ViewIncidents,\n    label: 'incidents.reports.label',\n    path: '/incidents',\n    icon: 'incident',\n  },\n  viewIncidentWidgets: {\n    permission: Permissions.ViewIncidentWidgets,\n    label: 'incidents.visualize.label',\n    path: '/incidents/visualize',\n    icon: 'incident',\n  },\n  settings: {\n    permission: null,\n    label: 'settings.label',\n    path: '/settings',\n    icon: 'setting',\n  },\n}\n\nexport default pageMap\nexport type { Page }\n","import { Navbar as HospitalRunNavbar } from '@hospitalrun/components'\nimport React from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { useHistory } from 'react-router-dom'\n\nimport { logout } from '../../../user/user-slice'\nimport useTranslator from '../../hooks/useTranslator'\nimport { RootState } from '../../store'\nimport pageMap, { Page } from './pageMap'\n\nconst Navbar = () => {\n  const dispatch = useDispatch()\n  const history = useHistory()\n  const { t } = useTranslator()\n  const { permissions, user } = useSelector((state: RootState) => state.user)\n\n  const navigateTo = (location: string) => {\n    history.push(location)\n  }\n\n  const dividerAboveLabels = [\n    'scheduling.appointments.new',\n    'labs.requests.new',\n    'medications.requests.new',\n    'incidents.reports.new',\n    'imagings.requests.new',\n    'settings.label',\n  ]\n\n  function getDropdownListOfPages(pages: Page[]) {\n    return pages\n      .filter((page) => !page.permission || permissions.includes(page.permission))\n      .map((page) => ({\n        type: 'link',\n        label: t(page.label),\n        icon: `${page.icon}`,\n        onClick: () => {\n          navigateTo(page.path)\n        },\n        dividerAbove: dividerAboveLabels.includes(page.label),\n      }))\n  }\n\n  // For Mobile, hamburger menu\n  const hambergerPages = Object.keys(pageMap).map((key) => pageMap[key])\n\n  // For Desktop, add shortcuts menu\n  const addPages = [\n    pageMap.newPatient,\n    pageMap.newAppointment,\n    pageMap.newMedication,\n    pageMap.newLab,\n    pageMap.newImaging,\n    pageMap.newIncident,\n  ]\n\n  return (\n    <HospitalRunNavbar\n      bg=\"dark\"\n      variant=\"dark\"\n      navItems={[\n        {\n          name: 'menu',\n          size: 'lg',\n          type: 'link-list-icon',\n          children: getDropdownListOfPages(hambergerPages),\n          label: '',\n          className: 'nav-hamberger pr-4 d-md-none',\n        },\n        {\n          type: 'image',\n          src:\n            'data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53%0D%0AMy5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5r%0D%0AIiB2aWV3Qm94PSIwIDAgMjk5IDI5OSI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOnVybCgjbGlu%0D%0AZWFyLWdyYWRpZW50KTt9PC9zdHlsZT48bGluZWFyR3JhZGllbnQgaWQ9ImxpbmVhci1ncmFkaWVu%0D%0AdCIgeDE9IjcyLjU4IiB5MT0iMTYuMDQiIHgyPSIyMjcuMzEiIHkyPSIyODQuMDIiIGdyYWRpZW50%0D%0AVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9IjAuMDEiIHN0b3AtY29sb3I9IiM2%0D%0AMGQxYmIiLz48c3RvcCBvZmZzZXQ9IjAuNSIgc3RvcC1jb2xvcj0iIzFhYmM5YyIvPjxzdG9wIG9m%0D%0AZnNldD0iMSIgc3RvcC1jb2xvcj0iIzAwOWI5ZSIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjx0%0D%0AaXRsZT5jcm9zcy1pY29uPC90aXRsZT48cGF0aCBpZD0iY3Jvc3MiIGNsYXNzPSJjbHMtMSIgZD0i%0D%0ATTI5Mi45NCw5Ny40NkgyMDUuM1Y3LjA2QTYuNTYsNi41NiwwLDAsMCwxOTguNzQuNUgxMDEuMjZB%0D%0ANi41Niw2LjU2LDAsMCwwLDk0LjcsNy4wNnY5MC40SDcuMDZBNi41OCw2LjU4LDAsMCwwLC41LDEw%0D%0ANFYxOTYuM2E2LjIzLDYuMjMsMCwwLDAsNi4yMyw2LjI0aDg4djkwLjRhNi41Niw2LjU2LDAsMCww%0D%0ALDYuNTYsNi41Nmg5Ny40OGE2LjU2LDYuNTYsMCwwLDAsNi41Ni02LjU2di05MC40aDg4YTYuMjMs%0D%0ANi4yMywwLDAsMCw2LjIzLTYuMjRWMTA0QTYuNTgsNi41OCwwLDAsMCwyOTIuOTQsOTcuNDZaIiB0%0D%0AcmFuc2Zvcm09InRyYW5zbGF0ZSgtMC41IC0wLjUpIi8+PC9zdmc+',\n          onClick: () => {\n            navigateTo('/')\n          },\n          className: 'nav-icon',\n        },\n        {\n          type: 'header',\n          label: 'HospitalRun',\n          onClick: () => {\n            navigateTo('/')\n          },\n          className: 'nav-header',\n        },\n        {\n          type: 'link-list-icon',\n          alignRight: true,\n          children: getDropdownListOfPages(addPages),\n          className: 'ml-auto nav-add-new d-none d-md-block',\n          iconClassName: 'align-bottom',\n          label: 'Add',\n          name: 'add',\n          size: 'lg',\n        },\n        {\n          type: 'link-list-icon',\n          alignRight: true,\n          children: [\n            {\n              type: 'link',\n              label: `${t('user.login.currentlySignedInAs')} ${user?.givenName} ${\n                user?.familyName\n              }`,\n              onClick: () => {\n                navigateTo('/settings')\n              },\n            },\n            {\n              type: 'link',\n              label: t('settings.label'),\n              onClick: () => {\n                navigateTo('/settings')\n              },\n            },\n            {\n              type: 'link',\n              label: t('actions.logout'),\n              onClick: () => {\n                dispatch(logout())\n                navigateTo('/login')\n              },\n            },\n          ],\n          className: 'pl-2 d-none d-md-block nav-account',\n          iconClassName: 'align-bottom',\n          label: 'Patient',\n          name: 'patient',\n          size: 'lg',\n        },\n      ]}\n    />\n  )\n}\nexport default Navbar\n","import React, { useState } from 'react'\n\nimport useTranslator from '../../hooks/useTranslator'\nimport { useNetworkStatus } from './useNetworkStatus'\n\nconst ONLINE_COLOR = 'rgba(0, 255, 0, 0.55)'\nconst OFFLINE_COLOR = 'rgba(255, 0, 0, 0.65)'\nconst OPACITY_TRANSITION_TIME = 4000\nconst BASE_STYLE = {\n  height: '50px',\n  pointerEvents: 'none' as const,\n  transition: `opacity ${OPACITY_TRANSITION_TIME}ms ease-in`,\n}\n\nexport const NetworkStatusMessage = () => {\n  const { t } = useTranslator()\n  const { isOnline, wasOffline } = useNetworkStatus()\n  const [shouldRender, setShouldRender] = useState(true)\n  const [opacity, setOpacity] = useState(1)\n\n  if (isOnline && !wasOffline) {\n    return null\n  }\n\n  if (!isOnline && opacity !== 1) {\n    setShouldRender(true)\n    setOpacity(1)\n  }\n\n  if (isOnline && wasOffline && opacity !== 0) {\n    setOpacity(0)\n    setTimeout(() => {\n      setShouldRender(false)\n    }, OPACITY_TRANSITION_TIME)\n  }\n\n  if (!shouldRender) {\n    return null\n  }\n\n  const style = {\n    ...BASE_STYLE,\n    backgroundColor: isOnline ? ONLINE_COLOR : OFFLINE_COLOR,\n    opacity,\n  }\n\n  return (\n    <div\n      className={`fixed-bottom d-flex justify-content-center align-items-center ${\n        isOnline ? 'online' : 'offline'\n      }`}\n      style={style}\n    >\n      {isOnline ? t('networkStatus.online') : t('networkStatus.offline')}\n    </div>\n  )\n}\n","import { useState, useEffect } from 'react'\n\nimport { NetworkStatus } from './types'\n\nexport const useNetworkStatus = (): NetworkStatus => {\n  const isOnline = navigator.onLine\n  const [networkStatus, setNetworkStatus] = useState({\n    isOnline,\n    wasOffline: !isOnline,\n  })\n  const handleOnline = () => {\n    setNetworkStatus((prevState) => ({ ...prevState, isOnline: true }))\n  }\n  const handleOffline = () => {\n    setNetworkStatus((prevState) => ({ ...prevState, isOnline: false, wasOffline: true }))\n  }\n  useEffect(() => {\n    window.addEventListener('online', handleOnline)\n    window.addEventListener('offline', handleOffline)\n\n    return () => {\n      window.removeEventListener('online', handleOnline)\n      window.removeEventListener('offline', handleOffline)\n    }\n  }, [])\n\n  return networkStatus\n}\n","import { createSlice } from '@reduxjs/toolkit'\n\nimport { AppThunk } from '../store'\n\ninterface ComponentState {\n  sidebarCollapsed: boolean\n}\n\nconst initialState: ComponentState = {\n  sidebarCollapsed: false,\n}\n\nconst componentSlice = createSlice({\n  name: 'components',\n  initialState,\n  reducers: {\n    toggleSidebar(state) {\n      state.sidebarCollapsed = !state.sidebarCollapsed\n    },\n  },\n})\n\nexport const { toggleSidebar } = componentSlice.actions\n\nexport const updateSidebar = (): AppThunk => async (dispatch) => {\n  dispatch(toggleSidebar())\n}\n\nexport default componentSlice.reducer\n","import { List, ListItem, Icon } from '@hospitalrun/components'\nimport React, { useState, CSSProperties } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { useLocation, useHistory } from 'react-router-dom'\n\nimport useTranslator from '../hooks/useTranslator'\nimport Permissions from '../model/Permissions'\nimport { RootState } from '../store'\nimport { updateSidebar } from './component-slice'\n\nconst Sidebar = () => {\n  const dispatch = useDispatch()\n  const { sidebarCollapsed } = useSelector((state: RootState) => state.components)\n  const permissions = useSelector((state: RootState) => state.user.permissions)\n\n  const { t } = useTranslator()\n  const path = useLocation()\n  const history = useHistory()\n  const { pathname } = path\n  const splittedPath = pathname.split('/')\n\n  const navigateTo = (location: string) => {\n    history.push(location)\n  }\n\n  const listItemStyle: CSSProperties = {\n    cursor: 'pointer',\n  }\n\n  const expandibleArrow: CSSProperties = {\n    marginRight: '20px',\n  }\n\n  const iconMargin: CSSProperties = {\n    marginRight: '10px',\n  }\n\n  const [expandedItem, setExpandedItem] = useState(\n    splittedPath[1].includes('patients')\n      ? 'patient'\n      : splittedPath[1].includes('appointments')\n      ? 'appointment'\n      : splittedPath[1].includes('labs')\n      ? 'labs'\n      : splittedPath[1].includes('medications')\n      ? 'medications'\n      : splittedPath[1].includes('incidents')\n      ? 'incidents'\n      : splittedPath[1].includes('imagings')\n      ? 'imagings'\n      : 'none',\n  )\n\n  const setExpansion = (item: string) => {\n    if (expandedItem === item) {\n      setExpandedItem('none')\n      return\n    }\n\n    setExpandedItem(item.toString())\n  }\n\n  const listSubItemStyle: CSSProperties = {\n    cursor: 'pointer',\n    fontSize: 'small',\n    borderBottomWidth: 0,\n    borderTopWidth: 0,\n    color: 'black',\n    padding: '.6rem 1.25rem',\n    backgroundColor: 'rgba(245,245,245,1)',\n  }\n\n  const listSubItemStyleNew: CSSProperties = {\n    cursor: 'pointer',\n    fontSize: 'small',\n    borderBottomWidth: 0,\n    borderTopWidth: 0,\n    color: 'black',\n    padding: '.6rem 1.25rem',\n    backgroundColor: 'rgba(245,245,245,1)',\n  }\n\n  const getDashboardLink = () => (\n    <>\n      <ListItem\n        active={pathname === '/'}\n        onClick={() => {\n          navigateTo('/')\n          setExpansion('none')\n        }}\n        className=\"nav-item\"\n        style={listItemStyle}\n      >\n        <Icon icon=\"dashboard\" /> {!sidebarCollapsed && t('dashboard.label')}\n      </ListItem>\n    </>\n  )\n\n  const getPatientLinks = () => (\n    <>\n      <ListItem\n        active={splittedPath[1].includes('patient')}\n        onClick={() => {\n          navigateTo('/patients')\n          if (expandedItem === 'patient') {\n            setExpandedItem('none')\n            return\n          }\n\n          setExpandedItem('patient')\n        }}\n        className=\"nav-item\"\n        style={listItemStyle}\n      >\n        <Icon\n          icon={\n            splittedPath[1].includes('patient') && expandedItem === 'patient'\n              ? 'down-arrow'\n              : 'right-arrow'\n          }\n          style={expandibleArrow}\n        />\n        <Icon icon=\"patients\" /> {!sidebarCollapsed && t('patients.label')}\n      </ListItem>\n      {splittedPath[1].includes('patient') && expandedItem === 'patient' && (\n        <List layout=\"flush\">\n          {permissions.includes(Permissions.WritePatients) && (\n            <ListItem\n              className=\"nav-item\"\n              style={listSubItemStyleNew}\n              onClick={() => navigateTo('/patients/new')}\n              active={splittedPath[1].includes('patients') && splittedPath.length > 2}\n            >\n              <Icon icon=\"patient-add\" style={iconMargin} />\n              {!sidebarCollapsed && t('patients.newPatient')}\n            </ListItem>\n          )}\n          {permissions.includes(Permissions.ReadPatients) && (\n            <ListItem\n              className=\"nav-item\"\n              style={listSubItemStyle}\n              onClick={() => navigateTo('/patients')}\n              active={splittedPath[1].includes('patients') && splittedPath.length < 3}\n            >\n              <Icon icon=\"incident\" style={iconMargin} />\n              {!sidebarCollapsed && t('patients.patientsList')}\n            </ListItem>\n          )}\n        </List>\n      )}\n    </>\n  )\n\n  const getAppointmentLinks = () => (\n    <>\n      <ListItem\n        active={splittedPath[1].includes('appointments')}\n        onClick={() => {\n          navigateTo('/appointments')\n          setExpansion('appointment')\n        }}\n        className=\"nav-item\"\n        style={listItemStyle}\n      >\n        <Icon\n          icon={\n            splittedPath[1].includes('appointments') && expandedItem === 'appointment'\n              ? 'down-arrow'\n              : 'right-arrow'\n          }\n          style={expandibleArrow}\n        />\n        <Icon icon=\"appointment\" /> {!sidebarCollapsed && t('scheduling.label')}\n      </ListItem>\n      {splittedPath[1].includes('appointment') && expandedItem === 'appointment' && (\n        <List layout=\"flush\" className=\"nav flex-column\">\n          {permissions.includes(Permissions.WriteAppointments) && (\n            <ListItem\n              className=\"nav-item\"\n              style={listSubItemStyleNew}\n              onClick={() => navigateTo('/appointments/new')}\n              active={splittedPath[1].includes('appointments') && splittedPath.length > 2}\n            >\n              <Icon icon=\"appointment-add\" style={iconMargin} />\n              {!sidebarCollapsed && t('scheduling.appointments.new')}\n            </ListItem>\n          )}\n          {permissions.includes(Permissions.ReadAppointments) && (\n            <ListItem\n              className=\"nav-item\"\n              style={listSubItemStyle}\n              onClick={() => navigateTo('/appointments')}\n              active={splittedPath[1].includes('appointments') && splittedPath.length < 3}\n            >\n              <Icon icon=\"incident\" style={iconMargin} />\n              {!sidebarCollapsed && t('scheduling.appointments.schedule')}\n            </ListItem>\n          )}\n        </List>\n      )}\n    </>\n  )\n\n  const getLabLinks = () => (\n    <>\n      <ListItem\n        active={splittedPath[1].includes('labs')}\n        onClick={() => {\n          navigateTo('/labs')\n          setExpansion('labs')\n        }}\n        className=\"nav-item\"\n        style={listItemStyle}\n      >\n        <Icon\n          icon={\n            splittedPath[1].includes('labs') && expandedItem === 'labs'\n              ? 'down-arrow'\n              : 'right-arrow'\n          }\n          style={expandibleArrow}\n        />\n        <Icon icon=\"lab\" /> {!sidebarCollapsed && t('labs.label')}\n      </ListItem>\n      {splittedPath[1].includes('labs') && expandedItem === 'labs' && (\n        <List layout=\"flush\" className=\"nav flex-column\">\n          {permissions.includes(Permissions.RequestLab) && (\n            <ListItem\n              className=\"nav-item\"\n              style={listSubItemStyleNew}\n              onClick={() => navigateTo('/labs/new')}\n              active={splittedPath[1].includes('labs') && splittedPath.length > 2}\n            >\n              <Icon icon=\"add\" style={iconMargin} />\n              {!sidebarCollapsed && t('labs.requests.new')}\n            </ListItem>\n          )}\n          {permissions.includes(Permissions.ViewLabs) && (\n            <ListItem\n              className=\"nav-item\"\n              style={listSubItemStyle}\n              onClick={() => navigateTo('/labs')}\n              active={splittedPath[1].includes('labs') && splittedPath.length < 3}\n            >\n              <Icon icon=\"incident\" style={iconMargin} />\n              {!sidebarCollapsed && t('labs.requests.label')}\n            </ListItem>\n          )}\n        </List>\n      )}\n    </>\n  )\n\n  const getMedicationLinks = () => (\n    <>\n      <ListItem\n        active={splittedPath[1].includes('medications')}\n        onClick={() => {\n          navigateTo('/medications')\n          setExpansion('medications')\n        }}\n        className=\"nav-item\"\n        style={listItemStyle}\n      >\n        <Icon\n          icon={\n            splittedPath[1].includes('medications') && expandedItem === 'medications'\n              ? 'down-arrow'\n              : 'right-arrow'\n          }\n          style={expandibleArrow}\n        />\n        <Icon icon=\"medication\" /> {!sidebarCollapsed && t('medications.label')}\n      </ListItem>\n      {splittedPath[1].includes('medications') && expandedItem === 'medications' && (\n        <List layout=\"flush\" className=\"nav flex-column\">\n          {permissions.includes(Permissions.RequestMedication) && (\n            <ListItem\n              className=\"nav-item\"\n              style={listSubItemStyleNew}\n              onClick={() => navigateTo('/medications/new')}\n              active={splittedPath[1].includes('medications') && splittedPath.length > 2}\n            >\n              <Icon icon=\"add\" style={iconMargin} />\n              {!sidebarCollapsed && t('medications.requests.new')}\n            </ListItem>\n          )}\n          {permissions.includes(Permissions.ViewMedications) && (\n            <ListItem\n              className=\"nav-item\"\n              style={listSubItemStyle}\n              onClick={() => navigateTo('/medications')}\n              active={splittedPath[1].includes('medications') && splittedPath.length < 3}\n            >\n              <Icon icon=\"incident\" style={iconMargin} />\n              {!sidebarCollapsed && t('medications.requests.label')}\n            </ListItem>\n          )}\n        </List>\n      )}\n    </>\n  )\n\n  const getIncidentLinks = () => (\n    <>\n      <ListItem\n        active={splittedPath[1].includes('incidents')}\n        onClick={() => {\n          navigateTo('/incidents')\n          setExpansion('incidents')\n        }}\n        className=\"nav-item\"\n        style={listItemStyle}\n      >\n        <Icon\n          icon={\n            splittedPath[1].includes('incidents') && expandedItem === 'incidents'\n              ? 'down-arrow'\n              : 'right-arrow'\n          }\n          style={expandibleArrow}\n        />\n        <Icon icon=\"incident\" /> {!sidebarCollapsed && t('incidents.label')}\n      </ListItem>\n      {splittedPath[1].includes('incidents') && expandedItem === 'incidents' && (\n        <List layout=\"flush\" className=\"nav flex-column\">\n          {permissions.includes(Permissions.ReportIncident) && (\n            <ListItem\n              className=\"nav-item\"\n              style={listSubItemStyleNew}\n              onClick={() => navigateTo('/incidents/new')}\n              active={splittedPath[1].includes('incidents') && splittedPath.length > 2}\n            >\n              <Icon icon=\"add\" style={iconMargin} />\n              {!sidebarCollapsed && t('incidents.reports.new')}\n            </ListItem>\n          )}\n          {permissions.includes(Permissions.ViewIncidents) && (\n            <ListItem\n              className=\"nav-item\"\n              style={listSubItemStyle}\n              onClick={() => navigateTo('/incidents')}\n              active={splittedPath[1].includes('incidents') && splittedPath.length < 3}\n            >\n              <Icon icon=\"incident\" style={iconMargin} />\n              {!sidebarCollapsed && t('incidents.reports.label')}\n            </ListItem>\n          )}\n          {permissions.includes(Permissions.ViewIncidentWidgets) && (\n            <ListItem\n              className=\"nav-item\"\n              style={listSubItemStyle}\n              onClick={() => navigateTo('/incidents/visualize')}\n              active={splittedPath[1].includes('incidents') && splittedPath.length < 3}\n            >\n              <Icon icon=\"incident\" style={iconMargin} />\n              {!sidebarCollapsed && t('incidents.visualize.label')}\n            </ListItem>\n          )}\n        </List>\n      )}\n    </>\n  )\n\n  const getImagingLinks = () => (\n    <>\n      <ListItem\n        active={splittedPath[1].includes('imaging')}\n        onClick={() => {\n          navigateTo('/imaging')\n          setExpansion('imagings')\n        }}\n        className=\"nav-item\"\n        style={listItemStyle}\n      >\n        <Icon\n          icon={\n            splittedPath[1].includes('imaging') && expandedItem === 'imagings'\n              ? 'down-arrow'\n              : 'right-arrow'\n          }\n          style={expandibleArrow}\n        />\n        <Icon icon=\"image\" /> {!sidebarCollapsed && t('imagings.label')}\n      </ListItem>\n      {splittedPath[1].includes('imaging') && expandedItem === 'imagings' && (\n        <List layout=\"flush\" className=\"nav flex-column\">\n          {permissions.includes(Permissions.RequestImaging) && (\n            <ListItem\n              className=\"nav-item\"\n              style={listSubItemStyleNew}\n              onClick={() => navigateTo('/imaging/new')}\n              active={splittedPath[1].includes('imaging') && splittedPath.length > 2}\n            >\n              <Icon icon=\"add\" style={iconMargin} />\n              {!sidebarCollapsed && t('imagings.requests.new')}\n            </ListItem>\n          )}\n          {permissions.includes(Permissions.ViewImagings) && (\n            <ListItem\n              className=\"nav-item\"\n              style={listSubItemStyle}\n              onClick={() => navigateTo('/imaging')}\n              active={splittedPath[1].includes('imaging') && splittedPath.length < 3}\n            >\n              <Icon icon=\"image\" style={iconMargin} />\n              {!sidebarCollapsed && t('imagings.requests.label')}\n            </ListItem>\n          )}\n        </List>\n      )}\n    </>\n  )\n\n  return (\n    <nav\n      className=\"d-none d-md-block bg-light sidebar\"\n      style={{ width: sidebarCollapsed ? '56px' : '' }}\n    >\n      <div className=\"sidebar-sticky\">\n        <List layout=\"flush\" className=\"nav flex-column\">\n          <ListItem\n            onClick={() => dispatch(updateSidebar())}\n            className=\"nav-item\"\n            style={listItemStyle}\n          >\n            <Icon\n              style={{ float: sidebarCollapsed ? 'left' : 'right' }}\n              icon={sidebarCollapsed ? 'right-arrow' : 'left-arrow'}\n            />\n          </ListItem>\n          {getDashboardLink()}\n          {getPatientLinks()}\n          {getAppointmentLinks()}\n          {getMedicationLinks()}\n          {getLabLinks()}\n          {getImagingLinks()}\n          {getIncidentLinks()}\n        </List>\n      </div>\n    </nav>\n  )\n}\n\nexport default Sidebar\n","import { Toaster } from '@hospitalrun/components'\nimport React from 'react'\nimport { useSelector } from 'react-redux'\nimport { Route, Switch } from 'react-router-dom'\n\nimport Dashboard from './dashboard/Dashboard'\nimport Imagings from './imagings/Imagings'\nimport Incidents from './incidents/Incidents'\nimport Labs from './labs/Labs'\nimport Medications from './medications/Medications'\nimport Breadcrumbs from './page-header/breadcrumbs/Breadcrumbs'\nimport { ButtonBarProvider } from './page-header/button-toolbar/ButtonBarProvider'\nimport ButtonToolBar from './page-header/button-toolbar/ButtonToolBar'\nimport { useTitle } from './page-header/title/TitleContext'\nimport Patients from './patients/Patients'\nimport Appointments from './scheduling/appointments/Appointments'\nimport Settings from './settings/Settings'\nimport Navbar from './shared/components/navbar/Navbar'\nimport { NetworkStatusMessage } from './shared/components/network-status'\nimport Sidebar from './shared/components/Sidebar'\nimport { RootState } from './shared/store'\n\nconst HospitalRun = () => {\n  const { title } = useTitle()\n  const { sidebarCollapsed } = useSelector((state: RootState) => state.components)\n\n  return (\n    <div>\n      <NetworkStatusMessage />\n      <Navbar />\n      <div className=\"container-fluid\">\n        <div className=\"col-md-2\">\n          <Sidebar />\n        </div>\n        <ButtonBarProvider>\n          <div className=\"row\">\n            <main\n              role=\"main\"\n              className={`${\n                sidebarCollapsed ? 'col-md-10 col-lg-11' : 'col-md-9 col-lg-10'\n              } ml-sm-auto px-4`}\n            >\n              <div className=\"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom\">\n                <h1 className=\"h2\">{title}</h1>\n                <ButtonToolBar />\n              </div>\n              <Breadcrumbs />\n              <div>\n                <Switch>\n                  <Route exact path=\"/\" component={Dashboard} />\n                  <Route path=\"/appointments\" component={Appointments} />\n                  <Route path=\"/patients\" component={Patients} />\n                  <Route path=\"/labs\" component={Labs} />\n                  <Route path=\"/medications\" component={Medications} />\n                  <Route path=\"/incidents\" component={Incidents} />\n                  <Route path=\"/settings\" component={Settings} />\n                  <Route path=\"/imaging\" component={Imagings} />\n                </Switch>\n              </div>\n              <Toaster autoClose={5000} hideProgressBar draggable />\n            </main>\n          </div>\n        </ButtonBarProvider>\n      </div>\n    </div>\n  )\n}\n\nexport default HospitalRun\n","/* eslint-disable no-console */\n\nimport { Spinner } from '@hospitalrun/components'\nimport React, { Suspense, useEffect, useState } from 'react'\nimport { ReactQueryDevtools } from 'react-query-devtools'\nimport { useDispatch } from 'react-redux'\nimport { BrowserRouter, Route, Switch } from 'react-router-dom'\n\nimport HospitalRun from './HospitalRun'\nimport { TitleProvider } from './page-header/title/TitleContext'\nimport { remoteDb } from './shared/config/pouchdb'\nimport { getCurrentSession } from './user/user-slice'\n\nconst App: React.FC = () => {\n  const dispatch = useDispatch()\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    let cancelled = false\n\n    remoteDb\n      .getSession()\n      .then((session) => {\n        if (cancelled) {\n          return\n        }\n        if (session.userCtx.name) {\n          dispatch(getCurrentSession(session.userCtx.name))\n        }\n      })\n      .catch((e) => {\n        console.log(e)\n      })\n      .finally(() => {\n        if (!cancelled) {\n          setLoading(false)\n        }\n      })\n\n    return () => {\n      cancelled = true\n    }\n  }, [dispatch])\n\n  if (loading) {\n    return null\n  }\n\n  return (\n    <>\n      <BrowserRouter>\n        <Suspense fallback={<Spinner color=\"blue\" loading size={[10, 25]} type=\"ScaleLoader\" />}>\n          <Switch>\n            <TitleProvider>\n              <Route path=\"/\" component={HospitalRun} />\n            </TitleProvider>\n          </Switch>\n        </Suspense>\n      </BrowserRouter>\n      <ReactQueryDevtools initialIsOpen={false} />\n    </>\n  )\n}\n\nexport default App\n","/* eslint-disable */\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\"No internet connection found. App is running in offline mode.\");\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit'\n\nimport PatientRepository from '../shared/db/PatientRepository'\nimport SortRequest, { Unsorted } from '../shared/db/SortRequest'\nimport Patient from '../shared/model/Patient'\nimport { AppThunk } from '../shared/store'\n\ninterface PatientsState {\n  isLoading: boolean\n  patients: Patient[]\n  count: number\n}\n\nconst initialState: PatientsState = {\n  isLoading: false,\n  patients: [],\n  count: 0,\n}\n\nfunction startLoading(state: PatientsState) {\n  state.isLoading = true\n}\n\nconst patientsSlice = createSlice({\n  name: 'patients',\n  initialState,\n  reducers: {\n    fetchPatientsStart: startLoading,\n    fetchPatientsSuccess(state, { payload }: PayloadAction<Patient[]>) {\n      state.isLoading = false\n      state.patients = payload\n    },\n    fetchCountSuccess(state, { payload }: PayloadAction<number>) {\n      state.count = payload\n    },\n  },\n})\n\nexport const { fetchPatientsStart, fetchPatientsSuccess, fetchCountSuccess } = patientsSlice.actions\n\nexport const fetchPatients = (sortRequest: SortRequest = Unsorted): AppThunk => async (\n  dispatch,\n) => {\n  dispatch(fetchPatientsStart())\n  const patients = await PatientRepository.findAll(sortRequest)\n  dispatch(fetchPatientsSuccess(patients))\n}\n\nexport const searchPatients = (searchString: string): AppThunk => async (dispatch) => {\n  dispatch(fetchPatientsStart())\n\n  let patients\n  if (searchString.trim() === '') {\n    patients = await PatientRepository.findAll()\n  } else {\n    patients = await PatientRepository.search(searchString)\n  }\n  const count = await PatientRepository.count()\n  dispatch(fetchCountSuccess(count))\n  dispatch(fetchPatientsSuccess(patients))\n}\n\nexport default patientsSlice.reducer\n","import { configureStore, combineReducers, Action } from '@reduxjs/toolkit'\nimport ReduxThunk, { ThunkAction } from 'redux-thunk'\n\nimport medication from '../../medications/medication-slice'\nimport breadcrumbs from '../../page-header/breadcrumbs/breadcrumbs-slice'\nimport patient from '../../patients/patient-slice'\nimport patients from '../../patients/patients-slice'\nimport user from '../../user/user-slice'\nimport components from '../components/component-slice'\n\nconst reducer = combineReducers({\n  patient,\n  patients,\n  user,\n  breadcrumbs,\n  components,\n  medication,\n})\n\nconst store = configureStore({\n  reducer,\n  middleware: [ReduxThunk],\n})\n\nexport type AppDispatch = typeof store.dispatch\nexport type AppThunk = ThunkAction<void, RootState, null, Action<string>>\nexport type RootState = ReturnType<typeof reducer>\n\nexport default store\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Provider } from 'react-redux'\n\nimport './index.css'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\nimport './shared/config/i18n'\nimport store from './shared/store'\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root'),\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register()\nserviceWorker.register({})\n"],"sourceRoot":""}